<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8"/>
<style type="text/css">
pre { white-space: pre-wrap; }
.ef0,.f0 { color: #000000; } .eb0,.b0 { background-color: #000000; }
.ef1,.f1 { color: #AA0000; } .eb1,.b1 { background-color: #AA0000; }
.ef2,.f2 { color: #00AA00; } .eb2,.b2 { background-color: #00AA00; }
.ef3,.f3 { color: #AA5500; } .eb3,.b3 { background-color: #AA5500; }
.ef4,.f4 { color: #0000AA; } .eb4,.b4 { background-color: #0000AA; }
.ef5,.f5 { color: #AA00AA; } .eb5,.b5 { background-color: #AA00AA; }
.ef6,.f6 { color: #00AAAA; } .eb6,.b6 { background-color: #00AAAA; }
.ef7,.f7 { color: #AAAAAA; } .eb7,.b7 { background-color: #AAAAAA; }
.ef8, .f0 > .bold,.bold > .f0 { color: #555555; font-weight: normal; }
.ef9, .f1 > .bold,.bold > .f1 { color: #FF5555; font-weight: normal; }
.ef10,.f2 > .bold,.bold > .f2 { color: #55FF55; font-weight: normal; }
.ef11,.f3 > .bold,.bold > .f3 { color: #FFFF55; font-weight: normal; }
.ef12,.f4 > .bold,.bold > .f4 { color: #5555FF; font-weight: normal; }
.ef13,.f5 > .bold,.bold > .f5 { color: #FF55FF; font-weight: normal; }
.ef14,.f6 > .bold,.bold > .f6 { color: #55FFFF; font-weight: normal; }
.ef15,.f7 > .bold,.bold > .f7 { color: #FFFFFF; font-weight: normal; }
.eb8  { background-color: #555555; }
.eb9  { background-color: #FF5555; }
.eb10 { background-color: #55FF55; }
.eb11 { background-color: #FFFF55; }
.eb12 { background-color: #5555FF; }
.eb13 { background-color: #FF55FF; }
.eb14 { background-color: #55FFFF; }
.eb15 { background-color: #FFFFFF; }
.ef16 { color: #000000; } .eb16 { background-color: #000000; }
.ef17 { color: #00005f; } .eb17 { background-color: #00005f; }
.ef18 { color: #000087; } .eb18 { background-color: #000087; }
.ef19 { color: #0000af; } .eb19 { background-color: #0000af; }
.ef20 { color: #0000d7; } .eb20 { background-color: #0000d7; }
.ef21 { color: #0000ff; } .eb21 { background-color: #0000ff; }
.ef22 { color: #005f00; } .eb22 { background-color: #005f00; }
.ef23 { color: #005f5f; } .eb23 { background-color: #005f5f; }
.ef24 { color: #005f87; } .eb24 { background-color: #005f87; }
.ef25 { color: #005faf; } .eb25 { background-color: #005faf; }
.ef26 { color: #005fd7; } .eb26 { background-color: #005fd7; }
.ef27 { color: #005fff; } .eb27 { background-color: #005fff; }
.ef28 { color: #008700; } .eb28 { background-color: #008700; }
.ef29 { color: #00875f; } .eb29 { background-color: #00875f; }
.ef30 { color: #008787; } .eb30 { background-color: #008787; }
.ef31 { color: #0087af; } .eb31 { background-color: #0087af; }
.ef32 { color: #0087d7; } .eb32 { background-color: #0087d7; }
.ef33 { color: #0087ff; } .eb33 { background-color: #0087ff; }
.ef34 { color: #00af00; } .eb34 { background-color: #00af00; }
.ef35 { color: #00af5f; } .eb35 { background-color: #00af5f; }
.ef36 { color: #00af87; } .eb36 { background-color: #00af87; }
.ef37 { color: #00afaf; } .eb37 { background-color: #00afaf; }
.ef38 { color: #00afd7; } .eb38 { background-color: #00afd7; }
.ef39 { color: #00afff; } .eb39 { background-color: #00afff; }
.ef40 { color: #00d700; } .eb40 { background-color: #00d700; }
.ef41 { color: #00d75f; } .eb41 { background-color: #00d75f; }
.ef42 { color: #00d787; } .eb42 { background-color: #00d787; }
.ef43 { color: #00d7af; } .eb43 { background-color: #00d7af; }
.ef44 { color: #00d7d7; } .eb44 { background-color: #00d7d7; }
.ef45 { color: #00d7ff; } .eb45 { background-color: #00d7ff; }
.ef46 { color: #00ff00; } .eb46 { background-color: #00ff00; }
.ef47 { color: #00ff5f; } .eb47 { background-color: #00ff5f; }
.ef48 { color: #00ff87; } .eb48 { background-color: #00ff87; }
.ef49 { color: #00ffaf; } .eb49 { background-color: #00ffaf; }
.ef50 { color: #00ffd7; } .eb50 { background-color: #00ffd7; }
.ef51 { color: #00ffff; } .eb51 { background-color: #00ffff; }
.ef52 { color: #5f0000; } .eb52 { background-color: #5f0000; }
.ef53 { color: #5f005f; } .eb53 { background-color: #5f005f; }
.ef54 { color: #5f0087; } .eb54 { background-color: #5f0087; }
.ef55 { color: #5f00af; } .eb55 { background-color: #5f00af; }
.ef56 { color: #5f00d7; } .eb56 { background-color: #5f00d7; }
.ef57 { color: #5f00ff; } .eb57 { background-color: #5f00ff; }
.ef58 { color: #5f5f00; } .eb58 { background-color: #5f5f00; }
.ef59 { color: #5f5f5f; } .eb59 { background-color: #5f5f5f; }
.ef60 { color: #5f5f87; } .eb60 { background-color: #5f5f87; }
.ef61 { color: #5f5faf; } .eb61 { background-color: #5f5faf; }
.ef62 { color: #5f5fd7; } .eb62 { background-color: #5f5fd7; }
.ef63 { color: #5f5fff; } .eb63 { background-color: #5f5fff; }
.ef64 { color: #5f8700; } .eb64 { background-color: #5f8700; }
.ef65 { color: #5f875f; } .eb65 { background-color: #5f875f; }
.ef66 { color: #5f8787; } .eb66 { background-color: #5f8787; }
.ef67 { color: #5f87af; } .eb67 { background-color: #5f87af; }
.ef68 { color: #5f87d7; } .eb68 { background-color: #5f87d7; }
.ef69 { color: #5f87ff; } .eb69 { background-color: #5f87ff; }
.ef70 { color: #5faf00; } .eb70 { background-color: #5faf00; }
.ef71 { color: #5faf5f; } .eb71 { background-color: #5faf5f; }
.ef72 { color: #5faf87; } .eb72 { background-color: #5faf87; }
.ef73 { color: #5fafaf; } .eb73 { background-color: #5fafaf; }
.ef74 { color: #5fafd7; } .eb74 { background-color: #5fafd7; }
.ef75 { color: #5fafff; } .eb75 { background-color: #5fafff; }
.ef76 { color: #5fd700; } .eb76 { background-color: #5fd700; }
.ef77 { color: #5fd75f; } .eb77 { background-color: #5fd75f; }
.ef78 { color: #5fd787; } .eb78 { background-color: #5fd787; }
.ef79 { color: #5fd7af; } .eb79 { background-color: #5fd7af; }
.ef80 { color: #5fd7d7; } .eb80 { background-color: #5fd7d7; }
.ef81 { color: #5fd7ff; } .eb81 { background-color: #5fd7ff; }
.ef82 { color: #5fff00; } .eb82 { background-color: #5fff00; }
.ef83 { color: #5fff5f; } .eb83 { background-color: #5fff5f; }
.ef84 { color: #5fff87; } .eb84 { background-color: #5fff87; }
.ef85 { color: #5fffaf; } .eb85 { background-color: #5fffaf; }
.ef86 { color: #5fffd7; } .eb86 { background-color: #5fffd7; }
.ef87 { color: #5fffff; } .eb87 { background-color: #5fffff; }
.ef88 { color: #870000; } .eb88 { background-color: #870000; }
.ef89 { color: #87005f; } .eb89 { background-color: #87005f; }
.ef90 { color: #870087; } .eb90 { background-color: #870087; }
.ef91 { color: #8700af; } .eb91 { background-color: #8700af; }
.ef92 { color: #8700d7; } .eb92 { background-color: #8700d7; }
.ef93 { color: #8700ff; } .eb93 { background-color: #8700ff; }
.ef94 { color: #875f00; } .eb94 { background-color: #875f00; }
.ef95 { color: #875f5f; } .eb95 { background-color: #875f5f; }
.ef96 { color: #875f87; } .eb96 { background-color: #875f87; }
.ef97 { color: #875faf; } .eb97 { background-color: #875faf; }
.ef98 { color: #875fd7; } .eb98 { background-color: #875fd7; }
.ef99 { color: #875fff; } .eb99 { background-color: #875fff; }
.ef100 { color: #878700; } .eb100 { background-color: #878700; }
.ef101 { color: #87875f; } .eb101 { background-color: #87875f; }
.ef102 { color: #878787; } .eb102 { background-color: #878787; }
.ef103 { color: #8787af; } .eb103 { background-color: #8787af; }
.ef104 { color: #8787d7; } .eb104 { background-color: #8787d7; }
.ef105 { color: #8787ff; } .eb105 { background-color: #8787ff; }
.ef106 { color: #87af00; } .eb106 { background-color: #87af00; }
.ef107 { color: #87af5f; } .eb107 { background-color: #87af5f; }
.ef108 { color: #87af87; } .eb108 { background-color: #87af87; }
.ef109 { color: #87afaf; } .eb109 { background-color: #87afaf; }
.ef110 { color: #87afd7; } .eb110 { background-color: #87afd7; }
.ef111 { color: #87afff; } .eb111 { background-color: #87afff; }
.ef112 { color: #87d700; } .eb112 { background-color: #87d700; }
.ef113 { color: #87d75f; } .eb113 { background-color: #87d75f; }
.ef114 { color: #87d787; } .eb114 { background-color: #87d787; }
.ef115 { color: #87d7af; } .eb115 { background-color: #87d7af; }
.ef116 { color: #87d7d7; } .eb116 { background-color: #87d7d7; }
.ef117 { color: #87d7ff; } .eb117 { background-color: #87d7ff; }
.ef118 { color: #87ff00; } .eb118 { background-color: #87ff00; }
.ef119 { color: #87ff5f; } .eb119 { background-color: #87ff5f; }
.ef120 { color: #87ff87; } .eb120 { background-color: #87ff87; }
.ef121 { color: #87ffaf; } .eb121 { background-color: #87ffaf; }
.ef122 { color: #87ffd7; } .eb122 { background-color: #87ffd7; }
.ef123 { color: #87ffff; } .eb123 { background-color: #87ffff; }
.ef124 { color: #af0000; } .eb124 { background-color: #af0000; }
.ef125 { color: #af005f; } .eb125 { background-color: #af005f; }
.ef126 { color: #af0087; } .eb126 { background-color: #af0087; }
.ef127 { color: #af00af; } .eb127 { background-color: #af00af; }
.ef128 { color: #af00d7; } .eb128 { background-color: #af00d7; }
.ef129 { color: #af00ff; } .eb129 { background-color: #af00ff; }
.ef130 { color: #af5f00; } .eb130 { background-color: #af5f00; }
.ef131 { color: #af5f5f; } .eb131 { background-color: #af5f5f; }
.ef132 { color: #af5f87; } .eb132 { background-color: #af5f87; }
.ef133 { color: #af5faf; } .eb133 { background-color: #af5faf; }
.ef134 { color: #af5fd7; } .eb134 { background-color: #af5fd7; }
.ef135 { color: #af5fff; } .eb135 { background-color: #af5fff; }
.ef136 { color: #af8700; } .eb136 { background-color: #af8700; }
.ef137 { color: #af875f; } .eb137 { background-color: #af875f; }
.ef138 { color: #af8787; } .eb138 { background-color: #af8787; }
.ef139 { color: #af87af; } .eb139 { background-color: #af87af; }
.ef140 { color: #af87d7; } .eb140 { background-color: #af87d7; }
.ef141 { color: #af87ff; } .eb141 { background-color: #af87ff; }
.ef142 { color: #afaf00; } .eb142 { background-color: #afaf00; }
.ef143 { color: #afaf5f; } .eb143 { background-color: #afaf5f; }
.ef144 { color: #afaf87; } .eb144 { background-color: #afaf87; }
.ef145 { color: #afafaf; } .eb145 { background-color: #afafaf; }
.ef146 { color: #afafd7; } .eb146 { background-color: #afafd7; }
.ef147 { color: #afafff; } .eb147 { background-color: #afafff; }
.ef148 { color: #afd700; } .eb148 { background-color: #afd700; }
.ef149 { color: #afd75f; } .eb149 { background-color: #afd75f; }
.ef150 { color: #afd787; } .eb150 { background-color: #afd787; }
.ef151 { color: #afd7af; } .eb151 { background-color: #afd7af; }
.ef152 { color: #afd7d7; } .eb152 { background-color: #afd7d7; }
.ef153 { color: #afd7ff; } .eb153 { background-color: #afd7ff; }
.ef154 { color: #afff00; } .eb154 { background-color: #afff00; }
.ef155 { color: #afff5f; } .eb155 { background-color: #afff5f; }
.ef156 { color: #afff87; } .eb156 { background-color: #afff87; }
.ef157 { color: #afffaf; } .eb157 { background-color: #afffaf; }
.ef158 { color: #afffd7; } .eb158 { background-color: #afffd7; }
.ef159 { color: #afffff; } .eb159 { background-color: #afffff; }
.ef160 { color: #d70000; } .eb160 { background-color: #d70000; }
.ef161 { color: #d7005f; } .eb161 { background-color: #d7005f; }
.ef162 { color: #d70087; } .eb162 { background-color: #d70087; }
.ef163 { color: #d700af; } .eb163 { background-color: #d700af; }
.ef164 { color: #d700d7; } .eb164 { background-color: #d700d7; }
.ef165 { color: #d700ff; } .eb165 { background-color: #d700ff; }
.ef166 { color: #d75f00; } .eb166 { background-color: #d75f00; }
.ef167 { color: #d75f5f; } .eb167 { background-color: #d75f5f; }
.ef168 { color: #d75f87; } .eb168 { background-color: #d75f87; }
.ef169 { color: #d75faf; } .eb169 { background-color: #d75faf; }
.ef170 { color: #d75fd7; } .eb170 { background-color: #d75fd7; }
.ef171 { color: #d75fff; } .eb171 { background-color: #d75fff; }
.ef172 { color: #d78700; } .eb172 { background-color: #d78700; }
.ef173 { color: #d7875f; } .eb173 { background-color: #d7875f; }
.ef174 { color: #d78787; } .eb174 { background-color: #d78787; }
.ef175 { color: #d787af; } .eb175 { background-color: #d787af; }
.ef176 { color: #d787d7; } .eb176 { background-color: #d787d7; }
.ef177 { color: #d787ff; } .eb177 { background-color: #d787ff; }
.ef178 { color: #d7af00; } .eb178 { background-color: #d7af00; }
.ef179 { color: #d7af5f; } .eb179 { background-color: #d7af5f; }
.ef180 { color: #d7af87; } .eb180 { background-color: #d7af87; }
.ef181 { color: #d7afaf; } .eb181 { background-color: #d7afaf; }
.ef182 { color: #d7afd7; } .eb182 { background-color: #d7afd7; }
.ef183 { color: #d7afff; } .eb183 { background-color: #d7afff; }
.ef184 { color: #d7d700; } .eb184 { background-color: #d7d700; }
.ef185 { color: #d7d75f; } .eb185 { background-color: #d7d75f; }
.ef186 { color: #d7d787; } .eb186 { background-color: #d7d787; }
.ef187 { color: #d7d7af; } .eb187 { background-color: #d7d7af; }
.ef188 { color: #d7d7d7; } .eb188 { background-color: #d7d7d7; }
.ef189 { color: #d7d7ff; } .eb189 { background-color: #d7d7ff; }
.ef190 { color: #d7ff00; } .eb190 { background-color: #d7ff00; }
.ef191 { color: #d7ff5f; } .eb191 { background-color: #d7ff5f; }
.ef192 { color: #d7ff87; } .eb192 { background-color: #d7ff87; }
.ef193 { color: #d7ffaf; } .eb193 { background-color: #d7ffaf; }
.ef194 { color: #d7ffd7; } .eb194 { background-color: #d7ffd7; }
.ef195 { color: #d7ffff; } .eb195 { background-color: #d7ffff; }
.ef196 { color: #ff0000; } .eb196 { background-color: #ff0000; }
.ef197 { color: #ff005f; } .eb197 { background-color: #ff005f; }
.ef198 { color: #ff0087; } .eb198 { background-color: #ff0087; }
.ef199 { color: #ff00af; } .eb199 { background-color: #ff00af; }
.ef200 { color: #ff00d7; } .eb200 { background-color: #ff00d7; }
.ef201 { color: #ff00ff; } .eb201 { background-color: #ff00ff; }
.ef202 { color: #ff5f00; } .eb202 { background-color: #ff5f00; }
.ef203 { color: #ff5f5f; } .eb203 { background-color: #ff5f5f; }
.ef204 { color: #ff5f87; } .eb204 { background-color: #ff5f87; }
.ef205 { color: #ff5faf; } .eb205 { background-color: #ff5faf; }
.ef206 { color: #ff5fd7; } .eb206 { background-color: #ff5fd7; }
.ef207 { color: #ff5fff; } .eb207 { background-color: #ff5fff; }
.ef208 { color: #ff8700; } .eb208 { background-color: #ff8700; }
.ef209 { color: #ff875f; } .eb209 { background-color: #ff875f; }
.ef210 { color: #ff8787; } .eb210 { background-color: #ff8787; }
.ef211 { color: #ff87af; } .eb211 { background-color: #ff87af; }
.ef212 { color: #ff87d7; } .eb212 { background-color: #ff87d7; }
.ef213 { color: #ff87ff; } .eb213 { background-color: #ff87ff; }
.ef214 { color: #ffaf00; } .eb214 { background-color: #ffaf00; }
.ef215 { color: #ffaf5f; } .eb215 { background-color: #ffaf5f; }
.ef216 { color: #ffaf87; } .eb216 { background-color: #ffaf87; }
.ef217 { color: #ffafaf; } .eb217 { background-color: #ffafaf; }
.ef218 { color: #ffafd7; } .eb218 { background-color: #ffafd7; }
.ef219 { color: #ffafff; } .eb219 { background-color: #ffafff; }
.ef220 { color: #ffd700; } .eb220 { background-color: #ffd700; }
.ef221 { color: #ffd75f; } .eb221 { background-color: #ffd75f; }
.ef222 { color: #ffd787; } .eb222 { background-color: #ffd787; }
.ef223 { color: #ffd7af; } .eb223 { background-color: #ffd7af; }
.ef224 { color: #ffd7d7; } .eb224 { background-color: #ffd7d7; }
.ef225 { color: #ffd7ff; } .eb225 { background-color: #ffd7ff; }
.ef226 { color: #ffff00; } .eb226 { background-color: #ffff00; }
.ef227 { color: #ffff5f; } .eb227 { background-color: #ffff5f; }
.ef228 { color: #ffff87; } .eb228 { background-color: #ffff87; }
.ef229 { color: #ffffaf; } .eb229 { background-color: #ffffaf; }
.ef230 { color: #ffffd7; } .eb230 { background-color: #ffffd7; }
.ef231 { color: #ffffff; } .eb231 { background-color: #ffffff; }
.ef232 { color: #080808; } .eb232 { background-color: #080808; }
.ef233 { color: #121212; } .eb233 { background-color: #121212; }
.ef234 { color: #1c1c1c; } .eb234 { background-color: #1c1c1c; }
.ef235 { color: #262626; } .eb235 { background-color: #262626; }
.ef236 { color: #303030; } .eb236 { background-color: #303030; }
.ef237 { color: #3a3a3a; } .eb237 { background-color: #3a3a3a; }
.ef238 { color: #444444; } .eb238 { background-color: #444444; }
.ef239 { color: #4e4e4e; } .eb239 { background-color: #4e4e4e; }
.ef240 { color: #585858; } .eb240 { background-color: #585858; }
.ef241 { color: #626262; } .eb241 { background-color: #626262; }
.ef242 { color: #6c6c6c; } .eb242 { background-color: #6c6c6c; }
.ef243 { color: #767676; } .eb243 { background-color: #767676; }
.ef244 { color: #808080; } .eb244 { background-color: #808080; }
.ef245 { color: #8a8a8a; } .eb245 { background-color: #8a8a8a; }
.ef246 { color: #949494; } .eb246 { background-color: #949494; }
.ef247 { color: #9e9e9e; } .eb247 { background-color: #9e9e9e; }
.ef248 { color: #a8a8a8; } .eb248 { background-color: #a8a8a8; }
.ef249 { color: #b2b2b2; } .eb249 { background-color: #b2b2b2; }
.ef250 { color: #bcbcbc; } .eb250 { background-color: #bcbcbc; }
.ef251 { color: #c6c6c6; } .eb251 { background-color: #c6c6c6; }
.ef252 { color: #d0d0d0; } .eb252 { background-color: #d0d0d0; }
.ef253 { color: #dadada; } .eb253 { background-color: #dadada; }
.ef254 { color: #e4e4e4; } .eb254 { background-color: #e4e4e4; }
.ef255 { color: #eeeeee; } .eb255 { background-color: #eeeeee; }

.f9 { color: #000000; }
.b9 { background-color: #FFFFFF; }
.f9 > .bold,.bold > .f9, body.f9 > pre > .bold {
  /* Bold is heavy black on white, or bright white
     depending on the default background */
  color: #000000;
  font-weight: bold;
}
.reverse {
  /* CSS does not support swapping fg and bg colours unfortunately,
     so just hardcode something that will look OK on all backgrounds. */
  color: #000000; background-color: #AAAAAA;
}
.underline { text-decoration: underline; }
.line-through { text-decoration: line-through; }
.blink { text-decoration: blink; }

/* Avoid pixels between adjacent span elements.
   Note this only works for lines less than 80 chars
   where we close span elements on the same line.
span { display: inline-block; }
*/
</style>
</head>

<body class="f9 b9">
<pre>
<span class="f3">commit fd775e5bd41da05295184d543a419582cb003365</span>
Author: Lu.Mao &lt;lu.mao@molex.com&gt;
Date:   Thu Nov 9 00:11:40 2023 -0800

    Support SONiC OT

<span class="bold">diff --git a/device/molex/x86_64-intel_coreboot_rangeley-r0/OLS/port-64x40G-t0.config.bcm b/device/molex/x86_64-intel_coreboot_rangeley-r0/OLS/port-64x40G-t0.config.bcm
new file mode 100644</span>
<span class="bold">index 000000000..e1eb6968d</span>
<span class="bold">--- /dev/null</span>
<span class="bold">+++ b/device/molex/x86_64-intel_coreboot_rangeley-r0/OLS/port-64x40G-t0.config.bcm</span>
<span class="f6">@@ -0,0 +1,424 @@</span>
<span class="f2">+#TH S6100 64x40</span>
<span class="f2">+</span>
<span class="f2">+# disables bcmALPMDH (ALPM distributed hitbit) thread.  This thread is purely for debug purpose</span>
<span class="f2">+l3_alpm_hit_skip=1</span>
<span class="f2">+</span>
<span class="f2">+# Disable Counting ACL Drop towards interface RX_DRP counter</span>
<span class="f2">+sai_adjust_acl_drop_in_rx_drop=1</span>
<span class="f2">+</span>
<span class="f2">+l3_alpm_enable=2</span>
<span class="f2">+pfc_deadlock_seq_control=1</span>
<span class="f2">+bcm_stat_interval=2000000</span>
<span class="f2">+bcm_num_cos=10</span>
<span class="f2">+switch_bypass_mode=0</span>
<span class="f2">+mmu_lossless=0</span>
<span class="f2">+lpm_scaling_enable=0</span>
<span class="f2">+lpm_ipv6_128b_reserved=0</span>
<span class="f2">+ipv6_lpm_128b_enable=1</span>
<span class="f2">+l2xmsg_mode=1</span>
<span class="f2">+oversubscribe_mode=1</span>
<span class="f2">+miim_intr_enable=0</span>
<span class="f2">+</span>
<span class="f2">+phy_gearbox_enable=1</span>
<span class="f2">+phy_84752=1</span>
<span class="f2">+phy_ext_rom_boot=0</span>
<span class="f2">+rate_ext_mdio_divisor=0x80</span>
<span class="f2">+</span>
<span class="f2">+serdes_fiber_pref_xe=0</span>
<span class="f2">+serdes_if_type_xe=14</span>
<span class="f2">+</span>
<span class="f2">+fpem_mem_entries=32768</span>
<span class="f2">+</span>
<span class="f2">+os=unix</span>
<span class="f2">+</span>
<span class="f2">+parity_correction=1</span>
<span class="f2">+parity_enable=1</span>
<span class="f2">+</span>
<span class="f2">+port_phy_addr_66=0x176</span>
<span class="f2">+port_phy_addr_100=0x177</span>
<span class="f2">+xgxs_tx_lane_map_104=0x3210</span>
<span class="f2">+xgxs_rx_lane_map_104=0x0312</span>
<span class="f2">+phy_xaui_tx_polarity_flip_104=0x0</span>
<span class="f2">+phy_xaui_rx_polarity_flip_104=0x0</span>
<span class="f2">+port_phy_addr_104=0x1e</span>
<span class="f2">+port_phy_addr_105=0x1e</span>
<span class="f2">+dport_map_port_104=1</span>
<span class="f2">+dport_map_port_105=2</span>
<span class="f2">+xgxs_tx_lane_map_102=0x1032</span>
<span class="f2">+xgxs_rx_lane_map_102=0x0132</span>
<span class="f2">+phy_xaui_tx_polarity_flip_102=0x3</span>
<span class="f2">+phy_xaui_rx_polarity_flip_102=0x3</span>
<span class="f2">+phy_xaui_tx_polarity_flip_103=0x3</span>
<span class="f2">+phy_xaui_rx_polarity_flip_103=0x3</span>
<span class="f2">+port_phy_addr_102=0x1f</span>
<span class="f2">+port_phy_addr_103=0x1f</span>
<span class="f2">+dport_map_port_102=3</span>
<span class="f2">+dport_map_port_103=4</span>
<span class="f2">+xgxs_tx_lane_map_70=0x0123</span>
<span class="f2">+xgxs_rx_lane_map_70=0x3201</span>
<span class="f2">+phy_xaui_tx_polarity_flip_70=0x3</span>
<span class="f2">+phy_xaui_rx_polarity_flip_70=0x3</span>
<span class="f2">+phy_xaui_tx_polarity_flip_71=0x3</span>
<span class="f2">+phy_xaui_rx_polarity_flip_71=0x3</span>
<span class="f2">+port_phy_addr_70=0xE</span>
<span class="f2">+port_phy_addr_71=0xE</span>
<span class="f2">+dport_map_port_70=5</span>
<span class="f2">+dport_map_port_71=6</span>
<span class="f2">+xgxs_tx_lane_map_68=0x2301</span>
<span class="f2">+xgxs_rx_lane_map_68=0x1023</span>
<span class="f2">+phy_xaui_tx_polarity_flip_68=0x0</span>
<span class="f2">+phy_xaui_rx_polarity_flip_68=0x2</span>
<span class="f2">+phy_xaui_tx_polarity_flip_69=0x0</span>
<span class="f2">+phy_xaui_rx_polarity_flip_69=0x3</span>
<span class="f2">+port_phy_addr_68=0xF</span>
<span class="f2">+port_phy_addr_69=0xF</span>
<span class="f2">+dport_map_port_68=7</span>
<span class="f2">+dport_map_port_69=8</span>
<span class="f2">+xgxs_tx_lane_map_44=0x0123</span>
<span class="f2">+xgxs_rx_lane_map_44=0x3201</span>
<span class="f2">+phy_xaui_tx_polarity_flip_44=0x3</span>
<span class="f2">+phy_xaui_rx_polarity_flip_44=0x3</span>
<span class="f2">+phy_xaui_tx_polarity_flip_45=0x3</span>
<span class="f2">+phy_xaui_rx_polarity_flip_45=0x3</span>
<span class="f2">+port_phy_addr_44=0x3e</span>
<span class="f2">+port_phy_addr_45=0x3e</span>
<span class="f2">+dport_map_port_44=9</span>
<span class="f2">+dport_map_port_45=10</span>
<span class="f2">+xgxs_tx_lane_map_42=0x1032</span>
<span class="f2">+xgxs_rx_lane_map_42=0x2310</span>
<span class="f2">+phy_xaui_tx_polarity_flip_42=0x0</span>
<span class="f2">+phy_xaui_rx_polarity_flip_42=0x0</span>
<span class="f2">+phy_xaui_tx_polarity_flip_43=0x3</span>
<span class="f2">+phy_xaui_rx_polarity_flip_43=0x0</span>
<span class="f2">+port_phy_addr_42=0x3f</span>
<span class="f2">+port_phy_addr_43=0x3f</span>
<span class="f2">+dport_map_port_42=11</span>
<span class="f2">+dport_map_port_43=12</span>
<span class="f2">+xgxs_tx_lane_map_11=0x0123</span>
<span class="f2">+xgxs_rx_lane_map_11=0x3201</span>
<span class="f2">+phy_xaui_tx_polarity_flip_11=0x3</span>
<span class="f2">+phy_xaui_rx_polarity_flip_11=0x0</span>
<span class="f2">+phy_xaui_tx_polarity_flip_12=0x3</span>
<span class="f2">+phy_xaui_rx_polarity_flip_12=0x0</span>
<span class="f2">+port_phy_addr_11=0x2E</span>
<span class="f2">+port_phy_addr_12=0x2E</span>
<span class="f2">+dport_map_port_11=13</span>
<span class="f2">+dport_map_port_12=14</span>
<span class="f2">+xgxs_tx_lane_map_9=0x2310</span>
<span class="f2">+xgxs_rx_lane_map_9=0x1023</span>
<span class="f2">+phy_xaui_tx_polarity_flip_9=0x0</span>
<span class="f2">+phy_xaui_rx_polarity_flip_9=0x0</span>
<span class="f2">+phy_xaui_tx_polarity_flip_10=0x0</span>
<span class="f2">+phy_xaui_rx_polarity_flip_10=0x0</span>
<span class="f2">+port_phy_addr_9=0x2F</span>
<span class="f2">+port_phy_addr_10=0x2F</span>
<span class="f2">+dport_map_port_9=15</span>
<span class="f2">+dport_map_port_10=16</span>
<span class="f2">+xgxs_tx_lane_map_13=0x0123</span>
<span class="f2">+xgxs_rx_lane_map_13=0x0132</span>
<span class="f2">+phy_xaui_tx_polarity_flip_13=0x3</span>
<span class="f2">+phy_xaui_rx_polarity_flip_13=0x3</span>
<span class="f2">+phy_xaui_tx_polarity_flip_14=0x3</span>
<span class="f2">+phy_xaui_rx_polarity_flip_14=0x3</span>
<span class="f2">+port_phy_addr_13=0x11e</span>
<span class="f2">+port_phy_addr_14=0x11e</span>
<span class="f2">+dport_map_port_13=17</span>
<span class="f2">+dport_map_port_14=18</span>
<span class="f2">+xgxs_tx_lane_map_15=0x2301</span>
<span class="f2">+xgxs_rx_lane_map_15=0x2310</span>
<span class="f2">+phy_xaui_tx_polarity_flip_15=0x0</span>
<span class="f2">+phy_xaui_rx_polarity_flip_15=0x0</span>
<span class="f2">+port_phy_addr_15=0x11f</span>
<span class="f2">+port_phy_addr_16=0x11f</span>
<span class="f2">+dport_map_port_15=19</span>
<span class="f2">+dport_map_port_16=20</span>
<span class="f2">+xgxs_tx_lane_map_46=0x3210</span>
<span class="f2">+xgxs_rx_lane_map_46=0x0132</span>
<span class="f2">+phy_xaui_tx_polarity_flip_46=0x3</span>
<span class="f2">+phy_xaui_rx_polarity_flip_46=0x3</span>
<span class="f2">+phy_xaui_tx_polarity_flip_47=0x3</span>
<span class="f2">+phy_xaui_rx_polarity_flip_47=0x3</span>
<span class="f2">+port_phy_addr_46=0x10e</span>
<span class="f2">+port_phy_addr_47=0x10e</span>
<span class="f2">+dport_map_port_46=21</span>
<span class="f2">+dport_map_port_47=22</span>
<span class="f2">+xgxs_tx_lane_map_48=0x2301</span>
<span class="f2">+xgxs_rx_lane_map_48=0x1023</span>
<span class="f2">+phy_xaui_tx_polarity_flip_48=0x0</span>
<span class="f2">+phy_xaui_rx_polarity_flip_48=0x1</span>
<span class="f2">+port_phy_addr_48=0x10F</span>
<span class="f2">+port_phy_addr_49=0x10F</span>
<span class="f2">+dport_map_port_48=23</span>
<span class="f2">+dport_map_port_49=24</span>
<span class="f2">+xgxs_tx_lane_map_72=0x3210</span>
<span class="f2">+xgxs_rx_lane_map_72=0x0132</span>
<span class="f2">+phy_xaui_tx_polarity_flip_72=0x3</span>
<span class="f2">+phy_xaui_rx_polarity_flip_72=0x0</span>
<span class="f2">+phy_xaui_tx_polarity_flip_73=0x3</span>
<span class="f2">+phy_xaui_rx_polarity_flip_73=0x0</span>
<span class="f2">+port_phy_addr_72=0x13e</span>
<span class="f2">+port_phy_addr_73=0x13e</span>
<span class="f2">+dport_map_port_72=25</span>
<span class="f2">+dport_map_port_73=26</span>
<span class="f2">+xgxs_tx_lane_map_74=0x1320</span>
<span class="f2">+xgxs_rx_lane_map_74=0x2013</span>
<span class="f2">+phy_xaui_tx_polarity_flip_74=0x0</span>
<span class="f2">+phy_xaui_rx_polarity_flip_74=0x0</span>
<span class="f2">+phy_xaui_tx_polarity_flip_75=0x3</span>
<span class="f2">+phy_xaui_rx_polarity_flip_75=0x0</span>
<span class="f2">+port_phy_addr_74=0x13f</span>
<span class="f2">+port_phy_addr_75=0x13f</span>
<span class="f2">+dport_map_port_74=27</span>
<span class="f2">+dport_map_port_75=28</span>
<span class="f2">+xgxs_tx_lane_map_106=0x3210</span>
<span class="f2">+xgxs_rx_lane_map_106=0x2310</span>
<span class="f2">+phy_xaui_tx_polarity_flip_106=0x0</span>
<span class="f2">+phy_xaui_rx_polarity_flip_106=0x3</span>
<span class="f2">+phy_xaui_tx_polarity_flip_107=0x0</span>
<span class="f2">+phy_xaui_rx_polarity_flip_107=0x3</span>
<span class="f2">+port_phy_addr_106=0x12e</span>
<span class="f2">+port_phy_addr_107=0x12e</span>
<span class="f2">+dport_map_port_106=29</span>
<span class="f2">+dport_map_port_107=30</span>
<span class="f2">+xgxs_tx_lane_map_108=0x1032</span>
<span class="f2">+xgxs_rx_lane_map_108=0x0132</span>
<span class="f2">+phy_xaui_tx_polarity_flip_108=0x3</span>
<span class="f2">+phy_xaui_rx_polarity_flip_108=0x3</span>
<span class="f2">+phy_xaui_tx_polarity_flip_109=0x3</span>
<span class="f2">+phy_xaui_rx_polarity_flip_109=0x3</span>
<span class="f2">+port_phy_addr_108=0x12f</span>
<span class="f2">+port_phy_addr_109=0x12f</span>
<span class="f2">+dport_map_port_108=31</span>
<span class="f2">+dport_map_port_109=32</span>
<span class="f2">+port_phy_addr_7=0x5e</span>
<span class="f2">+port_phy_addr_8=0x5e</span>
<span class="f2">+xgxs_tx_lane_map_7=0x3210</span>
<span class="f2">+xgxs_rx_lane_map_7=0x0132</span>
<span class="f2">+phy_xaui_tx_polarity_flip_7=0x3</span>
<span class="f2">+phy_xaui_rx_polarity_flip_7=0x1</span>
<span class="f2">+phy_xaui_tx_polarity_flip_8=0x3</span>
<span class="f2">+phy_xaui_rx_polarity_flip_8=0x3</span>
<span class="f2">+dport_map_port_7=33</span>
<span class="f2">+dport_map_port_8=34</span>
<span class="f2">+port_phy_addr_5=0x5f</span>
<span class="f2">+port_phy_addr_6=0x5f</span>
<span class="f2">+xgxs_tx_lane_map_5=0x2301</span>
<span class="f2">+xgxs_rx_lane_map_5=0x1023</span>
<span class="f2">+phy_xaui_tx_polarity_flip_5=0x0</span>
<span class="f2">+phy_xaui_rx_polarity_flip_5=0x0</span>
<span class="f2">+phy_xaui_tx_polarity_flip_6=0x0</span>
<span class="f2">+phy_xaui_tx_polarity_flip_6=0x0</span>
<span class="f2">+dport_map_port_5=35</span>
<span class="f2">+dport_map_port_6=36</span>
<span class="f2">+port_phy_addr_116=0x4e</span>
<span class="f2">+port_phy_addr_117=0x4e</span>
<span class="f2">+phy_xaui_tx_polarity_flip_116=0x0</span>
<span class="f2">+phy_xaui_rx_polarity_flip_116=0x1</span>
<span class="f2">+phy_xaui_tx_polarity_flip_117=0x3</span>
<span class="f2">+phy_xaui_rx_polarity_flip_117=0x3</span>
<span class="f2">+xgxs_tx_lane_map_116=0x0123</span>
<span class="f2">+xgxs_rx_lane_map_116=0x3201</span>
<span class="f2">+dport_map_port_116=37</span>
<span class="f2">+dport_map_port_117=38</span>
<span class="f2">+port_phy_addr_114=0x4f</span>
<span class="f2">+port_phy_addr_115=0x4f</span>
<span class="f2">+phy_xaui_tx_polarity_flip_114=0x0</span>
<span class="f2">+phy_xaui_rx_polarity_flip_114=0x0</span>
<span class="f2">+phy_xaui_tx_polarity_flip_115=0x1</span>
<span class="f2">+phy_xaui_rx_polarity_flip_115=0x0</span>
<span class="f2">+xgxs_tx_lane_map_114=0x2301</span>
<span class="f2">+xgxs_rx_lane_map_114=0x1023</span>
<span class="f2">+dport_map_port_114=39</span>
<span class="f2">+dport_map_port_115=40</span>
<span class="f2">+port_phy_addr_82=0x7e</span>
<span class="f2">+port_phy_addr_83=0x7e</span>
<span class="f2">+xgxs_tx_lane_map_82=0x3210</span>
<span class="f2">+xgxs_rx_lane_map_82=0x2310</span>
<span class="f2">+phy_xaui_tx_polarity_flip_82=0x0</span>
<span class="f2">+phy_xaui_rx_polarity_flip_82=0x0</span>
<span class="f2">+dport_map_port_82=41</span>
<span class="f2">+dport_map_port_83=42</span>
<span class="f2">+port_phy_addr_80=0x7f</span>
<span class="f2">+port_phy_addr_81=0x7f</span>
<span class="f2">+xgxs_tx_lane_map_80=0x1032</span>
<span class="f2">+xgxs_rx_lane_map_80=0x0132</span>
<span class="f2">+phy_xaui_tx_polarity_flip_80=0x3</span>
<span class="f2">+phy_xaui_rx_polarity_flip_80=0x3</span>
<span class="f2">+phy_xaui_tx_polarity_flip_81=0x0</span>
<span class="f2">+phy_xaui_rx_polarity_flip_81=0x3</span>
<span class="f2">+dport_map_port_80=43</span>
<span class="f2">+dport_map_port_81=44</span>
<span class="f2">+xgxs_tx_lane_map_40=0x0123</span>
<span class="f2">+xgxs_rx_lane_map_40=0x0132</span>
<span class="f2">+port_phy_addr_40=0x6e</span>
<span class="f2">+port_phy_addr_41=0x6e</span>
<span class="f2">+phy_xaui_tx_polarity_flip_40=0x3</span>
<span class="f2">+phy_xaui_rx_polarity_flip_40=0x0</span>
<span class="f2">+phy_xaui_tx_polarity_flip_41=0x3</span>
<span class="f2">+phy_xaui_rx_polarity_flip_41=0x0</span>
<span class="f2">+dport_map_port_40=45</span>
<span class="f2">+dport_map_port_41=46</span>
<span class="f2">+port_phy_addr_38=0x6f</span>
<span class="f2">+port_phy_addr_39=0x6f</span>
<span class="f2">+phy_xaui_tx_polarity_flip_38=0x0</span>
<span class="f2">+phy_xaui_rx_polarity_flip_38=0x0</span>
<span class="f2">+xgxs_tx_lane_map_38=0x2301</span>
<span class="f2">+xgxs_rx_lane_map_38=0x2310</span>
<span class="f2">+dport_map_port_38=47</span>
<span class="f2">+dport_map_port_39=48</span>
<span class="f2">+xgxs_tx_lane_map_110=0x2013</span>
<span class="f2">+xgxs_rx_lane_map_110=0x3102</span>
<span class="f2">+phy_xaui_tx_polarity_flip_110=0x3</span>
<span class="f2">+phy_xaui_rx_polarity_flip_110=0x3</span>
<span class="f2">+phy_xaui_tx_polarity_flip_111=0x3</span>
<span class="f2">+phy_xaui_rx_polarity_flip_111=0x3</span>
<span class="f2">+port_phy_addr_110=0x15e</span>
<span class="f2">+port_phy_addr_111=0x15e</span>
<span class="f2">+dport_map_port_110=49</span>
<span class="f2">+dport_map_port_111=50</span>
<span class="f2">+xgxs_tx_lane_map_112=0x1032</span>
<span class="f2">+xgxs_rx_lane_map_112=0x2310</span>
<span class="f2">+phy_xaui_tx_polarity_flip_112=0x3</span>
<span class="f2">+phy_xaui_rx_polarity_flip_112=0x3</span>
<span class="f2">+phy_xaui_tx_polarity_flip_113=0x3</span>
<span class="f2">+phy_xaui_rx_polarity_flip_113=0x3</span>
<span class="f2">+port_phy_addr_112=0x15f</span>
<span class="f2">+port_phy_addr_113=0x15f</span>
<span class="f2">+dport_map_port_112=51</span>
<span class="f2">+dport_map_port_113=52</span>
<span class="f2">+port_phy_addr_1=0x14e</span>
<span class="f2">+port_phy_addr_2=0x14e</span>
<span class="f2">+xgxs_tx_lane_map_1=0x0123</span>
<span class="f2">+xgxs_rx_lane_map_1=0x3201</span>
<span class="f2">+phy_xaui_tx_polarity_flip_1=0x3</span>
<span class="f2">+phy_xaui_rx_polarity_flip_1=0x3</span>
<span class="f2">+phy_xaui_tx_polarity_flip_2=0x3</span>
<span class="f2">+phy_xaui_rx_polarity_flip_2=0x3</span>
<span class="f2">+dport_map_port_1=53</span>
<span class="f2">+dport_map_port_2=54</span>
<span class="f2">+xgxs_tx_lane_map_3=0x1023</span>
<span class="f2">+xgxs_rx_lane_map_3=0x2310</span>
<span class="f2">+port_phy_addr_3=0x14f</span>
<span class="f2">+port_phy_addr_4=0x14f</span>
<span class="f2">+phy_xaui_tx_polarity_flip_3=0x3</span>
<span class="f2">+phy_xaui_rx_polarity_flip_3=0x0</span>
<span class="f2">+phy_xaui_tx_polarity_flip_4=0x3</span>
<span class="f2">+phy_xaui_rx_polarity_flip_4=0x3</span>
<span class="f2">+dport_map_port_3=55</span>
<span class="f2">+dport_map_port_4=56</span>
<span class="f2">+port_phy_addr_34=0x17e</span>
<span class="f2">+port_phy_addr_35=0x17e</span>
<span class="f2">+xgxs_tx_lane_map_34=0x0123</span>
<span class="f2">+xgxs_rx_lane_map_34=0x0132</span>
<span class="f2">+phy_xaui_tx_polarity_flip_34=0x3</span>
<span class="f2">+phy_xaui_rx_polarity_flip_34=0x0</span>
<span class="f2">+phy_xaui_tx_polarity_flip_35=0x3</span>
<span class="f2">+phy_xaui_rx_polarity_flip_35=0x0</span>
<span class="f2">+dport_map_port_34=57</span>
<span class="f2">+dport_map_port_35=58</span>
<span class="f2">+port_phy_addr_36=0x17f</span>
<span class="f2">+port_phy_addr_37=0x17f</span>
<span class="f2">+xgxs_tx_lane_map_36=0x2301</span>
<span class="f2">+xgxs_rx_lane_map_36=0x2310</span>
<span class="f2">+phy_xaui_tx_polarity_flip_36=0x0</span>
<span class="f2">+phy_xaui_rx_polarity_flip_36=0x3</span>
<span class="f2">+phy_xaui_tx_polarity_flip_37=0x3</span>
<span class="f2">+phy_xaui_rx_polarity_flip_37=0x3</span>
<span class="f2">+dport_map_port_36=59</span>
<span class="f2">+dport_map_port_37=60</span>
<span class="f2">+port_phy_addr_76=0x16e</span>
<span class="f2">+port_phy_addr_77=0x16e</span>
<span class="f2">+xgxs_tx_lane_map_76=0x3210</span>
<span class="f2">+xgxs_rx_lane_map_76=0x2310</span>
<span class="f2">+phy_xaui_tx_polarity_flip_76=0x0</span>
<span class="f2">+phy_xaui_rx_polarity_flip_76=0x3</span>
<span class="f2">+phy_xaui_tx_polarity_flip_77=0x0</span>
<span class="f2">+phy_xaui_rx_polarity_flip_77=0x3</span>
<span class="f2">+dport_map_port_76=61</span>
<span class="f2">+dport_map_port_77=62</span>
<span class="f2">+port_phy_addr_78=0x16f</span>
<span class="f2">+port_phy_addr_79=0x16f</span>
<span class="f2">+xgxs_tx_lane_map_78=0x1032</span>
<span class="f2">+xgxs_rx_lane_map_78=0x0132</span>
<span class="f2">+phy_xaui_tx_polarity_flip_78=0x3</span>
<span class="f2">+phy_xaui_rx_polarity_flip_78=0x3</span>
<span class="f2">+phy_xaui_tx_polarity_flip_79=0x3</span>
<span class="f2">+phy_xaui_rx_polarity_flip_79=0x3</span>
<span class="f2">+dport_map_port_78=63</span>
<span class="f2">+dport_map_port_79=64</span>
<span class="f2">+pbmp_xport_xe=0x3fffd0000ffff40003fffc0001fffe</span>
<span class="f2">+</span>
<span class="f2">+portmap_66=129:10</span>
<span class="f2">+portmap_100=131:10</span>
<span class="f2">+portmap_33=132:10</span>
<span class="f2">+portmap_67=133:10</span>
<span class="f2">+portmap_101=134:10</span>
<span class="f2">+portmap_135=135:10</span>
<span class="f2">+portmap_1=1:40:2</span>
<span class="f2">+portmap_2=3:40:2</span>
<span class="f2">+portmap_3=5:40:2</span>
<span class="f2">+portmap_4=7:40:2</span>
<span class="f2">+portmap_5=9:40:2</span>
<span class="f2">+portmap_6=11:40:2</span>
<span class="f2">+portmap_7=13:40:2</span>
<span class="f2">+portmap_8=15:40:2</span>
<span class="f2">+portmap_9=17:40:2</span>
<span class="f2">+portmap_10=19:40:2</span>
<span class="f2">+portmap_11=21:40:2</span>
<span class="f2">+portmap_12=23:40:2</span>
<span class="f2">+portmap_13=25:40:2</span>
<span class="f2">+portmap_14=27:40:2</span>
<span class="f2">+portmap_15=29:40:2</span>
<span class="f2">+portmap_16=31:40:2</span>
<span class="f2">+portmap_34=33:40:2</span>
<span class="f2">+portmap_35=35:40:2</span>
<span class="f2">+portmap_36=37:40:2</span>
<span class="f2">+portmap_37=39:40:2</span>
<span class="f2">+portmap_38=41:40:2</span>
<span class="f2">+portmap_39=43:40:2</span>
<span class="f2">+portmap_40=45:40:2</span>
<span class="f2">+portmap_41=47:40:2</span>
<span class="f2">+portmap_42=49:40:2</span>
<span class="f2">+portmap_43=51:40:2</span>
<span class="f2">+portmap_44=53:40:2</span>
<span class="f2">+portmap_45=55:40:2</span>
<span class="f2">+portmap_46=57:40:2</span>
<span class="f2">+portmap_47=59:40:2</span>
<span class="f2">+portmap_48=61:40:2</span>
<span class="f2">+portmap_49=63:40:2</span>
<span class="f2">+portmap_68=65:40:2</span>
<span class="f2">+portmap_69=67:40:2</span>
<span class="f2">+portmap_70=69:40:2</span>
<span class="f2">+portmap_71=71:40:2</span>
<span class="f2">+portmap_72=73:40:2</span>
<span class="f2">+portmap_73=75:40:2</span>
<span class="f2">+portmap_74=77:40:2</span>
<span class="f2">+portmap_75=79:40:2</span>
<span class="f2">+portmap_76=81:40:2</span>
<span class="f2">+portmap_77=83:40:2</span>
<span class="f2">+portmap_78=85:40:2</span>
<span class="f2">+portmap_79=87:40:2</span>
<span class="f2">+portmap_80=89:40:2</span>
<span class="f2">+portmap_81=91:40:2</span>
<span class="f2">+portmap_82=93:40:2</span>
<span class="f2">+portmap_83=95:40:2</span>
<span class="f2">+portmap_102=97:40:2</span>
<span class="f2">+portmap_103=99:40:2</span>
<span class="f2">+portmap_104=101:40:2</span>
<span class="f2">+portmap_105=103:40:2</span>
<span class="f2">+portmap_106=105:40:2</span>
<span class="f2">+portmap_107=107:40:2</span>
<span class="f2">+portmap_108=109:40:2</span>
<span class="f2">+portmap_109=111:40:2</span>
<span class="f2">+portmap_110=113:40:2</span>
<span class="f2">+portmap_111=115:40:2</span>
<span class="f2">+portmap_112=117:40:2</span>
<span class="f2">+portmap_113=119:40:2</span>
<span class="f2">+portmap_114=121:40:2</span>
<span class="f2">+portmap_115=123:40:2</span>
<span class="f2">+portmap_116=125:40:2</span>
<span class="f2">+portmap_117=127:40:2</span>
<span class="f2">+dport_map_port_66=65</span>
<span class="f2">+dport_map_port_100=66</span>
<span class="f2">+</span>
<span class="f2">+mmu_init_config=&quot;MSFT-TH-Tier0&quot;</span>
<span class="bold">diff --git a/device/molex/x86_64-intel_coreboot_rangeley-r0/OLS/port_config.ini b/device/molex/x86_64-intel_coreboot_rangeley-r0/OLS/port_config.ini</span>
<span class="bold">new file mode 100644</span>
<span class="bold">index 000000000..54809b2c9</span>
<span class="bold">--- /dev/null</span>
<span class="bold">+++ b/device/molex/x86_64-intel_coreboot_rangeley-r0/OLS/port_config.ini</span>
<span class="f6">@@ -0,0 +1,67 @@</span>
<span class="f2">+# name          lanes     alias              index   speed</span>
<span class="f2">+Ethernet0       101,102   fortyGigE1/1/1     0       40000</span>
<span class="f2">+Ethernet1       103,104   fortyGigE1/1/2     1       40000</span>
<span class="f2">+Ethernet2       97,98     fortyGigE1/1/3     2       40000</span>
<span class="f2">+Ethernet3       99,100    fortyGigE1/1/4     3       40000</span>
<span class="f2">+Ethernet4       69,70     fortyGigE1/1/5     4       40000</span>
<span class="f2">+Ethernet5       71,72     fortyGigE1/1/6     5       40000</span>
<span class="f2">+Ethernet6       65,66     fortyGigE1/1/7     6       40000</span>
<span class="f2">+Ethernet7       67,68     fortyGigE1/1/8     7       40000</span>
<span class="f2">+Ethernet8       53,54     fortyGigE1/1/9     8       40000</span>
<span class="f2">+Ethernet9       55,56     fortyGigE1/1/10    9       40000</span>
<span class="f2">+Ethernet10      49,50     fortyGigE1/1/11    10      40000</span>
<span class="f2">+Ethernet11      51,52     fortyGigE1/1/12    11      40000</span>
<span class="f2">+Ethernet12      21,22     fortyGigE1/1/13    12      40000</span>
<span class="f2">+Ethernet13      23,24     fortyGigE1/1/14    13      40000</span>
<span class="f2">+Ethernet14      17,18     fortyGigE1/1/15    14      40000</span>
<span class="f2">+Ethernet15      19,20     fortyGigE1/1/16    15      40000</span>
<span class="f2">+Ethernet16      25,26     fortyGigE1/2/1     16      40000</span>
<span class="f2">+Ethernet17      27,28     fortyGigE1/2/2     17      40000</span>
<span class="f2">+Ethernet18      29,30     fortyGigE1/2/3     18      40000</span>
<span class="f2">+Ethernet19      31,32     fortyGigE1/2/4     19      40000</span>
<span class="f2">+Ethernet20      57,58     fortyGigE1/2/5     20      40000</span>
<span class="f2">+Ethernet21      59,60     fortyGigE1/2/6     21      40000</span>
<span class="f2">+Ethernet22      61,62     fortyGigE1/2/7     22      40000</span>
<span class="f2">+Ethernet23      63,64     fortyGigE1/2/8     23      40000</span>
<span class="f2">+Ethernet24      73,74     fortyGigE1/2/9     24      40000</span>
<span class="f2">+Ethernet25      75,76     fortyGigE1/2/10    25      40000</span>
<span class="f2">+Ethernet26      77,78     fortyGigE1/2/11    26      40000</span>
<span class="f2">+Ethernet27      79,80     fortyGigE1/2/12    27      40000</span>
<span class="f2">+Ethernet28      105,106   fortyGigE1/2/13    28      40000</span>
<span class="f2">+Ethernet29      107,108   fortyGigE1/2/14    29      40000</span>
<span class="f2">+Ethernet30      109,110   fortyGigE1/2/15    30      40000</span>
<span class="f2">+Ethernet31      111,112   fortyGigE1/2/16    31      40000</span>
<span class="f2">+Ethernet32      13,14     fortyGigE1/3/1     32      40000</span>
<span class="f2">+Ethernet33      15,16     fortyGigE1/3/2     33      40000</span>
<span class="f2">+Ethernet34      9,10      fortyGigE1/3/3     34      40000</span>
<span class="f2">+Ethernet35      11,12     fortyGigE1/3/4     35      40000</span>
<span class="f2">+Ethernet36      125,126   fortyGigE1/3/5     36      40000</span>
<span class="f2">+Ethernet37      127,128   fortyGigE1/3/6     37      40000</span>
<span class="f2">+Ethernet38      121,122   fortyGigE1/3/7     38      40000</span>
<span class="f2">+Ethernet39      123,124   fortyGigE1/3/8     39      40000</span>
<span class="f2">+Ethernet40      93,94     fortyGigE1/3/9     40      40000</span>
<span class="f2">+Ethernet41      95,96     fortyGigE1/3/10    41      40000</span>
<span class="f2">+Ethernet42      89,90     fortyGigE1/3/11    42      40000</span>
<span class="f2">+Ethernet43      91,92     fortyGigE1/3/12    43      40000</span>
<span class="f2">+Ethernet44      45,46     fortyGigE1/3/13    44      40000</span>
<span class="f2">+Ethernet45      47,48     fortyGigE1/3/14    45      40000</span>
<span class="f2">+Ethernet46      41,42     fortyGigE1/3/15    46      40000</span>
<span class="f2">+Ethernet47      43,44     fortyGigE1/3/16    47      40000</span>
<span class="f2">+Ethernet48      113,114   fortyGigE1/4/1     48      40000</span>
<span class="f2">+Ethernet49      115,116   fortyGigE1/4/2     49      40000</span>
<span class="f2">+Ethernet50      117,118   fortyGigE1/4/3     50      40000</span>
<span class="f2">+Ethernet51      119,120   fortyGigE1/4/4     51      40000</span>
<span class="f2">+Ethernet52      1,2       fortyGigE1/4/5     52      40000</span>
<span class="f2">+Ethernet53      3,4       fortyGigE1/4/6     53      40000</span>
<span class="f2">+Ethernet54      5,6       fortyGigE1/4/7     54      40000</span>
<span class="f2">+Ethernet55      7,8       fortyGigE1/4/8     55      40000</span>
<span class="f2">+Ethernet56      33,34     fortyGigE1/4/9     56      40000</span>
<span class="f2">+Ethernet57      35,36     fortyGigE1/4/10    57      40000</span>
<span class="f2">+Ethernet58      37,38     fortyGigE1/4/11    58      40000</span>
<span class="f2">+Ethernet59      39,40     fortyGigE1/4/12    59      40000</span>
<span class="f2">+Ethernet60      81,82     fortyGigE1/4/13    60      40000</span>
<span class="f2">+Ethernet61      83,84     fortyGigE1/4/14    61      40000</span>
<span class="f2">+Ethernet62      85,86     fortyGigE1/4/15    62      40000</span>
<span class="f2">+Ethernet63      87,88     fortyGigE1/4/16    63      40000</span>
<span class="f2">+Ethernet64      129       tenGigE1/1         64      10000</span>
<span class="f2">+Ethernet65      131       tenGigE1/2         65      10000</span>
<span class="bold">diff --git a/device/molex/x86_64-intel_coreboot_rangeley-r0/OLS/sai.profile b/device/molex/x86_64-intel_coreboot_rangeley-r0/OLS/sai.profile</span>
<span class="bold">new file mode 100644</span>
<span class="bold">index 000000000..fce582d0d</span>
<span class="bold">--- /dev/null</span>
<span class="bold">+++ b/device/molex/x86_64-intel_coreboot_rangeley-r0/OLS/sai.profile</span>
<span class="f6">@@ -0,0 +1,2 @@</span>
<span class="f2">+SAI_INIT_CONFIG_FILE=/usr/share/sonic/hwsku/port-64x40G-t0.config.bcm</span>
<span class="f2">+SAI_NUM_ECMP_MEMBERS=64</span>
<span class="bold">diff --git a/device/molex/x86_64-intel_coreboot_rangeley-r0/default_sku b/device/molex/x86_64-intel_coreboot_rangeley-r0/default_sku</span>
<span class="bold">new file mode 100644</span>
<span class="bold">index 000000000..ed2fa70aa</span>
<span class="bold">--- /dev/null</span>
<span class="bold">+++ b/device/molex/x86_64-intel_coreboot_rangeley-r0/default_sku</span>
<span class="f6">@@ -0,0 +1 @@</span>
<span class="f2">+OLS t1</span>
<span class="bold">diff --git a/device/molex/x86_64-intel_coreboot_rangeley-r0/installer.conf b/device/molex/x86_64-intel_coreboot_rangeley-r0/installer.conf</span>
<span class="bold">new file mode 100644</span>
<span class="bold">index 000000000..e69de29bb</span>
<span class="bold">diff --git a/device/molex/x86_64-intel_coreboot_rangeley-r0/platform.json b/device/molex/x86_64-intel_coreboot_rangeley-r0/platform.json</span>
<span class="bold">new file mode 100644</span>
<span class="bold">index 000000000..61f859475</span>
<span class="bold">--- /dev/null</span>
<span class="bold">+++ b/device/molex/x86_64-intel_coreboot_rangeley-r0/platform.json</span>
<span class="f6">@@ -0,0 +1,476 @@</span>
<span class="f2">+{</span>
<span class="f2">+    &quot;chassis&quot;: {</span>
<span class="f2">+        &quot;name&quot;: &quot;OLS&quot;,</span>
<span class="f2">+        &quot;status_led&quot;: {</span>
<span class="f2">+            &quot;controllable&quot;: true,</span>
<span class="f2">+            &quot;colors&quot;: [&quot;amber&quot;, &quot;blinking amber&quot;, &quot;green&quot;, &quot;blinking green&quot;]</span>
<span class="f2">+        },</span>
<span class="f2">+        &quot;thermal_manager&quot; : false,</span>
<span class="f2">+        &quot;components&quot;: [</span>
<span class="f2">+            {</span>
<span class="f2">+                &quot;name&quot;: &quot;BIOS&quot;</span>
<span class="f2">+            },</span>
<span class="f2">+            {</span>
<span class="f2">+                &quot;name&quot;: &quot;FPGA&quot;</span>
<span class="f2">+            },</span>
<span class="f2">+            {</span>
<span class="f2">+                &quot;name&quot;: &quot;CPLD&quot;</span>
<span class="f2">+            },</span>
<span class="f2">+            {</span>
<span class="f2">+                &quot;name&quot;: &quot;SSD&quot;</span>
<span class="f2">+            },</span>
<span class="f2">+            {</span>
<span class="f2">+                &quot;name&quot;: &quot;ONIE&quot;</span>
<span class="f2">+            }</span>
<span class="f2">+        ],</span>
<span class="f2">+        &quot;fans&quot;: [</span>
<span class="f2">+            {</span>
<span class="f2">+                &quot;name&quot;: &quot;FanTray1-Fan1&quot;,</span>
<span class="f2">+                &quot;speed&quot;: {</span>
<span class="f2">+                    &quot;controllable&quot;: false</span>
<span class="f2">+                },</span>
<span class="f2">+                &quot;status_led&quot;: {</span>
<span class="f2">+                    &quot;available&quot;: false</span>
<span class="f2">+                }</span>
<span class="f2">+            },</span>
<span class="f2">+            {</span>
<span class="f2">+                &quot;name&quot;: &quot;FanTray2-Fan1&quot;,</span>
<span class="f2">+                &quot;speed&quot;: {</span>
<span class="f2">+                    &quot;controllable&quot;: false</span>
<span class="f2">+                },</span>
<span class="f2">+                &quot;status_led&quot;: {</span>
<span class="f2">+                    &quot;available&quot;: false</span>
<span class="f2">+                }</span>
<span class="f2">+            },</span>
<span class="f2">+            {</span>
<span class="f2">+                &quot;name&quot;: &quot;FanTray3-Fan1&quot;,</span>
<span class="f2">+                &quot;speed&quot;: {</span>
<span class="f2">+                    &quot;controllable&quot;: false</span>
<span class="f2">+                },</span>
<span class="f2">+                &quot;status_led&quot;: {</span>
<span class="f2">+                    &quot;available&quot;: false</span>
<span class="f2">+                }</span>
<span class="f2">+            },</span>
<span class="f2">+            {</span>
<span class="f2">+                &quot;name&quot;: &quot;FanTray4-Fan1&quot;,</span>
<span class="f2">+                &quot;speed&quot;: {</span>
<span class="f2">+                    &quot;controllable&quot;: false</span>
<span class="f2">+                },</span>
<span class="f2">+                &quot;status_led&quot;: {</span>
<span class="f2">+                    &quot;available&quot;: false</span>
<span class="f2">+                }</span>
<span class="f2">+            }</span>
<span class="f2">+        ],</span>
<span class="f2">+        &quot;fan_drawers&quot;:[</span>
<span class="f2">+            {</span>
<span class="f2">+                &quot;name&quot;: &quot;FanTray1&quot;,</span>
<span class="f2">+                &quot;status_led&quot;: {</span>
<span class="f2">+                    &quot;controllable&quot;: false</span>
<span class="f2">+                },</span>
<span class="f2">+                &quot;fans&quot;: [</span>
<span class="f2">+                    {</span>
<span class="f2">+                        &quot;name&quot;: &quot;FanTray1-Fan1&quot;,</span>
<span class="f2">+                        &quot;speed&quot;: {</span>
<span class="f2">+                            &quot;controllable&quot;: false</span>
<span class="f2">+                        },</span>
<span class="f2">+                        &quot;status_led&quot;: {</span>
<span class="f2">+                            &quot;available&quot;: false</span>
<span class="f2">+                        }</span>
<span class="f2">+                    }</span>
<span class="f2">+                ]</span>
<span class="f2">+            },</span>
<span class="f2">+            {</span>
<span class="f2">+                &quot;name&quot;: &quot;FanTray2&quot;,</span>
<span class="f2">+                &quot;status_led&quot;: {</span>
<span class="f2">+                    &quot;controllable&quot;: false</span>
<span class="f2">+                },</span>
<span class="f2">+                &quot;fans&quot;: [</span>
<span class="f2">+                    {</span>
<span class="f2">+                        &quot;name&quot;: &quot;FanTray2-Fan1&quot;,</span>
<span class="f2">+                        &quot;speed&quot;: {</span>
<span class="f2">+                            &quot;controllable&quot;: false</span>
<span class="f2">+                        },</span>
<span class="f2">+                        &quot;status_led&quot;: {</span>
<span class="f2">+                            &quot;available&quot;: false</span>
<span class="f2">+                        }</span>
<span class="f2">+                    }</span>
<span class="f2">+                ]</span>
<span class="f2">+            },</span>
<span class="f2">+            {</span>
<span class="f2">+                &quot;name&quot;: &quot;FanTray3&quot;,</span>
<span class="f2">+                &quot;status_led&quot;: {</span>
<span class="f2">+                    &quot;controllable&quot;: false</span>
<span class="f2">+                },</span>
<span class="f2">+                &quot;fans&quot;: [</span>
<span class="f2">+                    {</span>
<span class="f2">+                        &quot;name&quot;: &quot;FanTray3-Fan1&quot;,</span>
<span class="f2">+                        &quot;speed&quot;: {</span>
<span class="f2">+                            &quot;controllable&quot;: false</span>
<span class="f2">+                        },</span>
<span class="f2">+                        &quot;status_led&quot;: {</span>
<span class="f2">+                            &quot;available&quot;: false</span>
<span class="f2">+                        }</span>
<span class="f2">+                    }</span>
<span class="f2">+                ]</span>
<span class="f2">+            },</span>
<span class="f2">+            {</span>
<span class="f2">+                &quot;name&quot;: &quot;FanTray4&quot;,</span>
<span class="f2">+                &quot;status_led&quot;: {</span>
<span class="f2">+                    &quot;controllable&quot;: false</span>
<span class="f2">+                },</span>
<span class="f2">+                &quot;fans&quot;: [</span>
<span class="f2">+                    {</span>
<span class="f2">+                        &quot;name&quot;: &quot;FanTray4-Fan1&quot;,</span>
<span class="f2">+                        &quot;speed&quot;: {</span>
<span class="f2">+                            &quot;controllable&quot;: false</span>
<span class="f2">+                        },</span>
<span class="f2">+                        &quot;status_led&quot;: {</span>
<span class="f2">+                            &quot;available&quot;: false</span>
<span class="f2">+                        }</span>
<span class="f2">+                    }</span>
<span class="f2">+                ]</span>
<span class="f2">+            }</span>
<span class="f2">+        ],</span>
<span class="f2">+        &quot;psus&quot;: [</span>
<span class="f2">+            {</span>
<span class="f2">+                &quot;name&quot;: &quot;PSU1&quot;,</span>
<span class="f2">+                &quot;status_led&quot;: {</span>
<span class="f2">+                    &quot;controllable&quot;: false</span>
<span class="f2">+                },</span>
<span class="f2">+                &quot;fans&quot;: [</span>
<span class="f2">+                    {</span>
<span class="f2">+                        &quot;name&quot;: &quot;PSU1 Fan&quot;,</span>
<span class="f2">+                        &quot;speed&quot;: {</span>
<span class="f2">+                            &quot;controllable&quot;: false</span>
<span class="f2">+                        },</span>
<span class="f2">+                        &quot;status_led&quot;: {</span>
<span class="f2">+                            &quot;available&quot;: false</span>
<span class="f2">+                        }</span>
<span class="f2">+                    }</span>
<span class="f2">+                ]</span>
<span class="f2">+            },</span>
<span class="f2">+            {</span>
<span class="f2">+                &quot;name&quot;: &quot;PSU2&quot;,</span>
<span class="f2">+                &quot;status_led&quot;: {</span>
<span class="f2">+                    &quot;controllable&quot;: false</span>
<span class="f2">+                },</span>
<span class="f2">+                &quot;fans&quot;: [</span>
<span class="f2">+                    {</span>
<span class="f2">+                        &quot;name&quot;: &quot;PSU2 Fan&quot;,</span>
<span class="f2">+                        &quot;speed&quot;: {</span>
<span class="f2">+                            &quot;controllable&quot;: false</span>
<span class="f2">+                        },</span>
<span class="f2">+                        &quot;status_led&quot;: {</span>
<span class="f2">+                            &quot;available&quot;: false</span>
<span class="f2">+                        }</span>
<span class="f2">+                    }</span>
<span class="f2">+                ]</span>
<span class="f2">+            }</span>
<span class="f2">+        ],</span>
<span class="f2">+        &quot;thermals&quot;: [</span>
<span class="f2">+            {</span>
<span class="f2">+                &quot;name&quot;: &quot;CPU On-board&quot;,</span>
<span class="f2">+                &quot;controllable&quot;: false,</span>
<span class="f2">+                &quot;low-crit-threshold&quot;: false,</span>
<span class="f2">+                &quot;minimum-recorded&quot;: false,</span>
<span class="f2">+                &quot;maximum-recorded&quot;: false</span>
<span class="f2">+            },</span>
<span class="f2">+            {</span>
<span class="f2">+                &quot;name&quot;: &quot;ASIC On-board Front&quot;,</span>
<span class="f2">+                &quot;controllable&quot;: false,</span>
<span class="f2">+                &quot;low-crit-threshold&quot;: false,</span>
<span class="f2">+                &quot;minimum-recorded&quot;: false,</span>
<span class="f2">+                &quot;maximum-recorded&quot;: false</span>
<span class="f2">+            },</span>
<span class="f2">+            {</span>
<span class="f2">+                &quot;name&quot;: &quot;System Front&quot;,</span>
<span class="f2">+                &quot;controllable&quot;: false,</span>
<span class="f2">+                &quot;low-crit-threshold&quot;: false,</span>
<span class="f2">+                &quot;minimum-recorded&quot;: false,</span>
<span class="f2">+                &quot;maximum-recorded&quot;: false</span>
<span class="f2">+            },</span>
<span class="f2">+            {</span>
<span class="f2">+                &quot;name&quot;: &quot;ASIC On-board Rear&quot;,</span>
<span class="f2">+                &quot;controllable&quot;: false,</span>
<span class="f2">+                &quot;low-crit-threshold&quot;: false,</span>
<span class="f2">+                &quot;minimum-recorded&quot;: false,</span>
<span class="f2">+                &quot;maximum-recorded&quot;: false</span>
<span class="f2">+            },</span>
<span class="f2">+            {</span>
<span class="f2">+                &quot;name&quot;: &quot;Front GE board&quot;,</span>
<span class="f2">+                &quot;controllable&quot;: false,</span>
<span class="f2">+                &quot;low-crit-threshold&quot;: false,</span>
<span class="f2">+                &quot;minimum-recorded&quot;: false,</span>
<span class="f2">+                &quot;maximum-recorded&quot;: false</span>
<span class="f2">+            },</span>
<span class="f2">+            {</span>
<span class="f2">+                &quot;name&quot;: &quot;Front SFP+ board&quot;,</span>
<span class="f2">+                &quot;controllable&quot;: false,</span>
<span class="f2">+                &quot;low-crit-threshold&quot;: false,</span>
<span class="f2">+                &quot;minimum-recorded&quot;: false,</span>
<span class="f2">+                &quot;maximum-recorded&quot;: false</span>
<span class="f2">+            },</span>
<span class="f2">+            {</span>
<span class="f2">+                &quot;name&quot;: &quot;CPU Core 0&quot;,</span>
<span class="f2">+                &quot;controllable&quot;: false,</span>
<span class="f2">+                &quot;low-crit-threshold&quot;: false,</span>
<span class="f2">+                &quot;high-crit-threshold&quot;: false,</span>
<span class="f2">+                &quot;minimum-recorded&quot;: false,</span>
<span class="f2">+                &quot;maximum-recorded&quot;: false</span>
<span class="f2">+            },</span>
<span class="f2">+            {</span>
<span class="f2">+                &quot;name&quot;: &quot;CPU Core 1&quot;,</span>
<span class="f2">+                &quot;controllable&quot;: false,</span>
<span class="f2">+                &quot;low-crit-threshold&quot;: false,</span>
<span class="f2">+                &quot;high-crit-threshold&quot;: false,</span>
<span class="f2">+                &quot;minimum-recorded&quot;: false,</span>
<span class="f2">+                &quot;maximum-recorded&quot;: false</span>
<span class="f2">+            },</span>
<span class="f2">+            {</span>
<span class="f2">+                &quot;name&quot;: &quot;CPU Core 2&quot;,</span>
<span class="f2">+                &quot;controllable&quot;: false,</span>
<span class="f2">+                &quot;low-crit-threshold&quot;: false,</span>
<span class="f2">+                &quot;high-crit-threshold&quot;: false,</span>
<span class="f2">+                &quot;minimum-recorded&quot;: false,</span>
<span class="f2">+                &quot;maximum-recorded&quot;: false</span>
<span class="f2">+            },</span>
<span class="f2">+            {</span>
<span class="f2">+                &quot;name&quot;: &quot;CPU Core 3&quot;,</span>
<span class="f2">+                &quot;controllable&quot;: false,</span>
<span class="f2">+                &quot;low-crit-threshold&quot;: false,</span>
<span class="f2">+                &quot;high-crit-threshold&quot;: false,</span>
<span class="f2">+                &quot;minimum-recorded&quot;: false,</span>
<span class="f2">+                &quot;maximum-recorded&quot;: false</span>
<span class="f2">+            }</span>
<span class="f2">+        ],</span>
<span class="f2">+        &quot;modules&quot;: [</span>
<span class="f2">+            {</span>
<span class="f2">+                &quot;name&quot;: &quot;IOM1: 16x40G QSFP+ Module&quot;,</span>
<span class="f2">+                &quot;components&quot;: [</span>
<span class="f2">+                    {</span>
<span class="f2">+                        &quot;name&quot;: &quot;IOM1-CPLD&quot;</span>
<span class="f2">+                    }</span>
<span class="f2">+                ]</span>
<span class="f2">+            },</span>
<span class="f2">+            {</span>
<span class="f2">+                &quot;name&quot;: &quot;IOM2: 16x40G QSFP+ Module&quot;,</span>
<span class="f2">+                &quot;components&quot;: [</span>
<span class="f2">+                    {</span>
<span class="f2">+                        &quot;name&quot;: &quot;IOM2-CPLD&quot;</span>
<span class="f2">+                    }</span>
<span class="f2">+                ]</span>
<span class="f2">+            },</span>
<span class="f2">+            {</span>
<span class="f2">+                &quot;name&quot;: &quot;IOM3: 16x40G QSFP+ Module&quot;,</span>
<span class="f2">+                &quot;components&quot;: [</span>
<span class="f2">+                    {</span>
<span class="f2">+                        &quot;name&quot;: &quot;IOM3-CPLD&quot;</span>
<span class="f2">+                    }</span>
<span class="f2">+                ]</span>
<span class="f2">+            },</span>
<span class="f2">+            {</span>
<span class="f2">+                &quot;name&quot;: &quot;IOM4: 16x40G QSFP+ Module&quot;,</span>
<span class="f2">+                &quot;components&quot;: [</span>
<span class="f2">+                    {</span>
<span class="f2">+                        &quot;name&quot;: &quot;IOM4-CPLD&quot;</span>
<span class="f2">+                    }</span>
<span class="f2">+                ]</span>
<span class="f2">+            }</span>
<span class="f2">+        ],</span>
<span class="f2">+        &quot;sfps&quot;: [</span>
<span class="f2">+            {</span>
<span class="f2">+                &quot;name&quot;: &quot;QSFP+ or later&quot;</span>
<span class="f2">+            },</span>
<span class="f2">+            {</span>
<span class="f2">+                &quot;name&quot;: &quot;QSFP+ or later&quot;</span>
<span class="f2">+            },</span>
<span class="f2">+            {</span>
<span class="f2">+                &quot;name&quot;: &quot;QSFP+ or later&quot;</span>
<span class="f2">+            },</span>
<span class="f2">+            {</span>
<span class="f2">+                &quot;name&quot;: &quot;QSFP+ or later&quot;</span>
<span class="f2">+            },</span>
<span class="f2">+            {</span>
<span class="f2">+                &quot;name&quot;: &quot;QSFP+ or later&quot;</span>
<span class="f2">+            },</span>
<span class="f2">+            {</span>
<span class="f2">+                &quot;name&quot;: &quot;QSFP+ or later&quot;</span>
<span class="f2">+            },</span>
<span class="f2">+            {</span>
<span class="f2">+                &quot;name&quot;: &quot;QSFP+ or later&quot;</span>
<span class="f2">+            },</span>
<span class="f2">+            {</span>
<span class="f2">+                &quot;name&quot;: &quot;QSFP+ or later&quot;</span>
<span class="f2">+            },</span>
<span class="f2">+            {</span>
<span class="f2">+                &quot;name&quot;: &quot;QSFP+ or later&quot;</span>
<span class="f2">+            },</span>
<span class="f2">+            {</span>
<span class="f2">+                &quot;name&quot;: &quot;QSFP+ or later&quot;</span>
<span class="f2">+            },</span>
<span class="f2">+            {</span>
<span class="f2">+                &quot;name&quot;: &quot;QSFP+ or later&quot;</span>
<span class="f2">+            },</span>
<span class="f2">+            {</span>
<span class="f2">+                &quot;name&quot;: &quot;QSFP+ or later&quot;</span>
<span class="f2">+            },</span>
<span class="f2">+            {</span>
<span class="f2">+                &quot;name&quot;: &quot;QSFP+ or later&quot;</span>
<span class="f2">+            },</span>
<span class="f2">+            {</span>
<span class="f2">+                &quot;name&quot;: &quot;QSFP+ or later&quot;</span>
<span class="f2">+            },</span>
<span class="f2">+            {</span>
<span class="f2">+                &quot;name&quot;: &quot;QSFP+ or later&quot;</span>
<span class="f2">+            },</span>
<span class="f2">+            {</span>
<span class="f2">+                &quot;name&quot;: &quot;QSFP+ or later&quot;</span>
<span class="f2">+            },</span>
<span class="f2">+            {</span>
<span class="f2">+                &quot;name&quot;: &quot;QSFP+ or later&quot;</span>
<span class="f2">+            },</span>
<span class="f2">+            {</span>
<span class="f2">+                &quot;name&quot;: &quot;QSFP+ or later&quot;</span>
<span class="f2">+            },</span>
<span class="f2">+            {</span>
<span class="f2">+                &quot;name&quot;: &quot;QSFP+ or later&quot;</span>
<span class="f2">+            },</span>
<span class="f2">+            {</span>
<span class="f2">+                &quot;name&quot;: &quot;QSFP+ or later&quot;</span>
<span class="f2">+            },</span>
<span class="f2">+            {</span>
<span class="f2">+                &quot;name&quot;: &quot;QSFP+ or later&quot;</span>
<span class="f2">+            },</span>
<span class="f2">+            {</span>
<span class="f2">+                &quot;name&quot;: &quot;QSFP+ or later&quot;</span>
<span class="f2">+            },</span>
<span class="f2">+            {</span>
<span class="f2">+                &quot;name&quot;: &quot;QSFP+ or later&quot;</span>
<span class="f2">+            },</span>
<span class="f2">+            {</span>
<span class="f2">+                &quot;name&quot;: &quot;QSFP+ or later&quot;</span>
<span class="f2">+            },</span>
<span class="f2">+            {</span>
<span class="f2">+                &quot;name&quot;: &quot;QSFP+ or later&quot;</span>
<span class="f2">+            },</span>
<span class="f2">+            {</span>
<span class="f2">+                &quot;name&quot;: &quot;QSFP+ or later&quot;</span>
<span class="f2">+            },</span>
<span class="f2">+            {</span>
<span class="f2">+                &quot;name&quot;: &quot;QSFP+ or later&quot;</span>
<span class="f2">+            },</span>
<span class="f2">+            {</span>
<span class="f2">+                &quot;name&quot;: &quot;QSFP+ or later&quot;</span>
<span class="f2">+            },</span>
<span class="f2">+            {</span>
<span class="f2">+                &quot;name&quot;: &quot;QSFP+ or later&quot;</span>
<span class="f2">+            },</span>
<span class="f2">+            {</span>
<span class="f2">+                &quot;name&quot;: &quot;QSFP+ or later&quot;</span>
<span class="f2">+            },</span>
<span class="f2">+            {</span>
<span class="f2">+                &quot;name&quot;: &quot;QSFP+ or later&quot;</span>
<span class="f2">+            },</span>
<span class="f2">+            {</span>
<span class="f2">+                &quot;name&quot;: &quot;QSFP+ or later&quot;</span>
<span class="f2">+            },</span>
<span class="f2">+            {</span>
<span class="f2">+                &quot;name&quot;: &quot;QSFP+ or later&quot;</span>
<span class="f2">+            },</span>
<span class="f2">+            {</span>
<span class="f2">+                &quot;name&quot;: &quot;QSFP+ or later&quot;</span>
<span class="f2">+            },</span>
<span class="f2">+            {</span>
<span class="f2">+                &quot;name&quot;: &quot;QSFP+ or later&quot;</span>
<span class="f2">+            },</span>
<span class="f2">+            {</span>
<span class="f2">+                &quot;name&quot;: &quot;QSFP+ or later&quot;</span>
<span class="f2">+            },</span>
<span class="f2">+            {</span>
<span class="f2">+                &quot;name&quot;: &quot;QSFP+ or later&quot;</span>
<span class="f2">+            },</span>
<span class="f2">+            {</span>
<span class="f2">+                &quot;name&quot;: &quot;QSFP+ or later&quot;</span>
<span class="f2">+            },</span>
<span class="f2">+            {</span>
<span class="f2">+                &quot;name&quot;: &quot;QSFP+ or later&quot;</span>
<span class="f2">+            },</span>
<span class="f2">+            {</span>
<span class="f2">+                &quot;name&quot;: &quot;QSFP+ or later&quot;</span>
<span class="f2">+            },</span>
<span class="f2">+            {</span>
<span class="f2">+                &quot;name&quot;: &quot;QSFP+ or later&quot;</span>
<span class="f2">+            },</span>
<span class="f2">+            {</span>
<span class="f2">+                &quot;name&quot;: &quot;QSFP+ or later&quot;</span>
<span class="f2">+            },</span>
<span class="f2">+            {</span>
<span class="f2">+                &quot;name&quot;: &quot;QSFP+ or later&quot;</span>
<span class="f2">+            },</span>
<span class="f2">+            {</span>
<span class="f2">+                &quot;name&quot;: &quot;QSFP+ or later&quot;</span>
<span class="f2">+            },</span>
<span class="f2">+            {</span>
<span class="f2">+                &quot;name&quot;: &quot;QSFP+ or later&quot;</span>
<span class="f2">+            },</span>
<span class="f2">+            {</span>
<span class="f2">+                &quot;name&quot;: &quot;QSFP+ or later&quot;</span>
<span class="f2">+            },</span>
<span class="f2">+            {</span>
<span class="f2">+                &quot;name&quot;: &quot;QSFP+ or later&quot;</span>
<span class="f2">+            },</span>
<span class="f2">+            {</span>
<span class="f2">+                &quot;name&quot;: &quot;QSFP+ or later&quot;</span>
<span class="f2">+            },</span>
<span class="f2">+            {</span>
<span class="f2">+                &quot;name&quot;: &quot;QSFP+ or later&quot;</span>
<span class="f2">+            },</span>
<span class="f2">+            {</span>
<span class="f2">+                &quot;name&quot;: &quot;QSFP+ or later&quot;</span>
<span class="f2">+            },</span>
<span class="f2">+            {</span>
<span class="f2">+                &quot;name&quot;: &quot;QSFP+ or later&quot;</span>
<span class="f2">+            },</span>
<span class="f2">+            {</span>
<span class="f2">+                &quot;name&quot;: &quot;QSFP+ or later&quot;</span>
<span class="f2">+            },</span>
<span class="f2">+            {</span>
<span class="f2">+                &quot;name&quot;: &quot;QSFP+ or later&quot;</span>
<span class="f2">+            },</span>
<span class="f2">+            {</span>
<span class="f2">+                &quot;name&quot;: &quot;QSFP+ or later&quot;</span>
<span class="f2">+            },</span>
<span class="f2">+            {</span>
<span class="f2">+                &quot;name&quot;: &quot;QSFP+ or later&quot;</span>
<span class="f2">+            },</span>
<span class="f2">+            {</span>
<span class="f2">+                &quot;name&quot;: &quot;QSFP+ or later&quot;</span>
<span class="f2">+            },</span>
<span class="f2">+            {</span>
<span class="f2">+                &quot;name&quot;: &quot;QSFP+ or later&quot;</span>
<span class="f2">+            },</span>
<span class="f2">+            {</span>
<span class="f2">+                &quot;name&quot;: &quot;QSFP+ or later&quot;</span>
<span class="f2">+            },</span>
<span class="f2">+            {</span>
<span class="f2">+                &quot;name&quot;: &quot;QSFP+ or later&quot;</span>
<span class="f2">+            },</span>
<span class="f2">+            {</span>
<span class="f2">+                &quot;name&quot;: &quot;QSFP+ or later&quot;</span>
<span class="f2">+            },</span>
<span class="f2">+            {</span>
<span class="f2">+                &quot;name&quot;: &quot;QSFP+ or later&quot;</span>
<span class="f2">+            },</span>
<span class="f2">+            {</span>
<span class="f2">+                &quot;name&quot;: &quot;QSFP+ or later&quot;</span>
<span class="f2">+            },</span>
<span class="f2">+            {</span>
<span class="f2">+                &quot;name&quot;: &quot;QSFP+ or later&quot;</span>
<span class="f2">+            },</span>
<span class="f2">+            {</span>
<span class="f2">+                &quot;name&quot;: &quot;QSFP+ or later&quot;</span>
<span class="f2">+            }</span>
<span class="f2">+        ]</span>
<span class="f2">+    },</span>
<span class="f2">+    &quot;interfaces&quot;: {}</span>
<span class="f2">+}</span>
<span class="bold">diff --git a/device/molex/x86_64-intel_coreboot_rangeley-r0/platform_asic b/device/molex/x86_64-intel_coreboot_rangeley-r0/platform_asic</span>
<span class="bold">new file mode 100644</span>
<span class="bold">index 000000000..960467652</span>
<span class="bold">--- /dev/null</span>
<span class="bold">+++ b/device/molex/x86_64-intel_coreboot_rangeley-r0/platform_asic</span>
<span class="f6">@@ -0,0 +1 @@</span>
<span class="f2">+broadcom</span>
<span class="bold">diff --git a/device/molex/x86_64-intel_coreboot_rangeley-r0/pmon_daemon_control.json b/device/molex/x86_64-intel_coreboot_rangeley-r0/pmon_daemon_control.json</span>
<span class="bold">new file mode 100644</span>
<span class="bold">index 000000000..a860e3781</span>
<span class="bold">--- /dev/null</span>
<span class="bold">+++ b/device/molex/x86_64-intel_coreboot_rangeley-r0/pmon_daemon_control.json</span>
<span class="f6">@@ -0,0 +1,7 @@</span>
<span class="f2">+{</span>
<span class="f2">+    &quot;skip_ledd&quot;: true,</span>
<span class="f2">+    &quot;skip_pcied&quot;: true,</span>
<span class="f2">+    &quot;skip_syseepromd&quot;: true,</span>
<span class="f2">+    &quot;skip_xcvrd&quot;: true,</span>
<span class="f2">+    &quot;skip_ycabled&quot;: true</span>
<span class="f2">+}</span>
<span class="bold">diff --git a/device/molex/x86_64-ot-kvm_x86_64-r0/OLS-V/fabriclanemap.ini b/device/molex/x86_64-ot-kvm_x86_64-r0/OLS-V/fabriclanemap.ini</span>
<span class="bold">new file mode 100644</span>
<span class="bold">index 000000000..20ea8fe3a</span>
<span class="bold">--- /dev/null</span>
<span class="bold">+++ b/device/molex/x86_64-ot-kvm_x86_64-r0/OLS-V/fabriclanemap.ini</span>
<span class="f6">@@ -0,0 +1,16 @@</span>
<span class="f2">+fabric1:1</span>
<span class="f2">+fabric2:2</span>
<span class="f2">+fabric3:3</span>
<span class="f2">+fabric4:4</span>
<span class="f2">+fabric5:5</span>
<span class="f2">+fabric6:6</span>
<span class="f2">+fabric7:7</span>
<span class="f2">+fabric8:8</span>
<span class="f2">+fabric9:9</span>
<span class="f2">+fabric10:10</span>
<span class="f2">+fabric11:11</span>
<span class="f2">+fabric12:12</span>
<span class="f2">+fabric13:13</span>
<span class="f2">+fabric14:14</span>
<span class="f2">+fabric15:15</span>
<span class="f2">+fabric16:16</span>
<span class="bold">diff --git a/device/molex/x86_64-ot-kvm_x86_64-r0/OLS-V/hwsku.json b/device/molex/x86_64-ot-kvm_x86_64-r0/OLS-V/hwsku.json</span>
<span class="bold">new file mode 100644</span>
<span class="bold">index 000000000..ed121868c</span>
<span class="bold">--- /dev/null</span>
<span class="bold">+++ b/device/molex/x86_64-ot-kvm_x86_64-r0/OLS-V/hwsku.json</span>
<span class="f6">@@ -0,0 +1,100 @@</span>
<span class="f2">+{</span>
<span class="f2">+    &quot;interfaces&quot;: {</span>
<span class="f2">+        &quot;Ethernet0&quot;: {</span>
<span class="f2">+             &quot;default_brkout_mode&quot;: &quot;1x100G[40G]&quot;</span>
<span class="f2">+        },</span>
<span class="f2">+        &quot;Ethernet4&quot;: {</span>
<span class="f2">+            &quot;default_brkout_mode&quot;: &quot;1x100G[40G]&quot;</span>
<span class="f2">+        },</span>
<span class="f2">+        &quot;Ethernet8&quot;: {</span>
<span class="f2">+             &quot;default_brkout_mode&quot;: &quot;1x100G[40G]&quot;</span>
<span class="f2">+        },</span>
<span class="f2">+        &quot;Ethernet12&quot;: {</span>
<span class="f2">+             &quot;default_brkout_mode&quot;: &quot;1x100G[40G]&quot;</span>
<span class="f2">+        },</span>
<span class="f2">+        &quot;Ethernet16&quot;: {</span>
<span class="f2">+            &quot;default_brkout_mode&quot;: &quot;1x100G[40G]&quot;</span>
<span class="f2">+        },</span>
<span class="f2">+        &quot;Ethernet20&quot;: {</span>
<span class="f2">+             &quot;default_brkout_mode&quot;: &quot;1x100G[40G]&quot;</span>
<span class="f2">+        },</span>
<span class="f2">+        &quot;Ethernet24&quot;: {</span>
<span class="f2">+             &quot;default_brkout_mode&quot;: &quot;1x100G[40G]&quot;</span>
<span class="f2">+        },</span>
<span class="f2">+        &quot;Ethernet28&quot;: {</span>
<span class="f2">+             &quot;default_brkout_mode&quot;: &quot;1x100G[40G]&quot;</span>
<span class="f2">+        },</span>
<span class="f2">+        &quot;Ethernet32&quot;: {</span>
<span class="f2">+             &quot;default_brkout_mode&quot;: &quot;1x100G[40G]&quot;</span>
<span class="f2">+        },</span>
<span class="f2">+        &quot;Ethernet36&quot;: {</span>
<span class="f2">+             &quot;default_brkout_mode&quot;: &quot;1x100G[40G]&quot;</span>
<span class="f2">+        },</span>
<span class="f2">+        &quot;Ethernet40&quot;: {</span>
<span class="f2">+             &quot;default_brkout_mode&quot;: &quot;1x100G[40G]&quot;</span>
<span class="f2">+        },</span>
<span class="f2">+        &quot;Ethernet44&quot;: {</span>
<span class="f2">+             &quot;default_brkout_mode&quot;: &quot;1x100G[40G]&quot;</span>
<span class="f2">+        },</span>
<span class="f2">+        &quot;Ethernet48&quot;: {</span>
<span class="f2">+             &quot;default_brkout_mode&quot;: &quot;1x100G[40G]&quot;</span>
<span class="f2">+        },</span>
<span class="f2">+        &quot;Ethernet52&quot;: {</span>
<span class="f2">+             &quot;default_brkout_mode&quot;: &quot;1x100G[40G]&quot;</span>
<span class="f2">+        },</span>
<span class="f2">+        &quot;Ethernet56&quot;: {</span>
<span class="f2">+             &quot;default_brkout_mode&quot;: &quot;1x100G[40G]&quot;</span>
<span class="f2">+        },</span>
<span class="f2">+        &quot;Ethernet60&quot;: {</span>
<span class="f2">+             &quot;default_brkout_mode&quot;: &quot;1x100G[40G]&quot;</span>
<span class="f2">+        },</span>
<span class="f2">+        &quot;Ethernet64&quot;: {</span>
<span class="f2">+            &quot;default_brkout_mode&quot;: &quot;1x100G[40G]&quot;</span>
<span class="f2">+        },</span>
<span class="f2">+        &quot;Ethernet68&quot;: {</span>
<span class="f2">+             &quot;default_brkout_mode&quot;: &quot;1x100G[40G]&quot;</span>
<span class="f2">+        },</span>
<span class="f2">+        &quot;Ethernet72&quot;: {</span>
<span class="f2">+             &quot;default_brkout_mode&quot;: &quot;1x100G[40G]&quot;</span>
<span class="f2">+        },</span>
<span class="f2">+        &quot;Ethernet76&quot;: {</span>
<span class="f2">+             &quot;default_brkout_mode&quot;: &quot;1x100G[40G]&quot;</span>
<span class="f2">+        },</span>
<span class="f2">+        &quot;Ethernet80&quot;: {</span>
<span class="f2">+             &quot;default_brkout_mode&quot;: &quot;1x100G[40G]&quot;</span>
<span class="f2">+        },</span>
<span class="f2">+        &quot;Ethernet84&quot;: {</span>
<span class="f2">+             &quot;default_brkout_mode&quot;: &quot;1x100G[40G]&quot;</span>
<span class="f2">+        },</span>
<span class="f2">+        &quot;Ethernet88&quot;: {</span>
<span class="f2">+             &quot;default_brkout_mode&quot;: &quot;1x100G[40G]&quot;</span>
<span class="f2">+        },</span>
<span class="f2">+        &quot;Ethernet92&quot;: {</span>
<span class="f2">+             &quot;default_brkout_mode&quot;: &quot;1x100G[40G]&quot;</span>
<span class="f2">+        },</span>
<span class="f2">+        &quot;Ethernet96&quot;: {</span>
<span class="f2">+             &quot;default_brkout_mode&quot;: &quot;1x100G[40G]&quot;</span>
<span class="f2">+        },</span>
<span class="f2">+        &quot;Ethernet100&quot;: {</span>
<span class="f2">+             &quot;default_brkout_mode&quot;: &quot;1x100G[40G]&quot;</span>
<span class="f2">+        },</span>
<span class="f2">+        &quot;Ethernet104&quot;: {</span>
<span class="f2">+             &quot;default_brkout_mode&quot;: &quot;1x100G[40G]&quot;</span>
<span class="f2">+        },</span>
<span class="f2">+        &quot;Ethernet108&quot;: {</span>
<span class="f2">+             &quot;default_brkout_mode&quot;: &quot;1x100G[40G]&quot;</span>
<span class="f2">+        },</span>
<span class="f2">+        &quot;Ethernet112&quot;: {</span>
<span class="f2">+             &quot;default_brkout_mode&quot;: &quot;1x100G[40G]&quot;</span>
<span class="f2">+        },</span>
<span class="f2">+        &quot;Ethernet116&quot;: {</span>
<span class="f2">+             &quot;default_brkout_mode&quot;: &quot;1x100G[40G]&quot;</span>
<span class="f2">+        },</span>
<span class="f2">+        &quot;Ethernet120&quot;: {</span>
<span class="f2">+             &quot;default_brkout_mode&quot;: &quot;1x100G[40G]&quot;</span>
<span class="f2">+        },</span>
<span class="f2">+        &quot;Ethernet124&quot;: {</span>
<span class="f2">+             &quot;default_brkout_mode&quot;: &quot;1x100G[40G]&quot;</span>
<span class="f2">+        }</span>
<span class="f2">+    }</span>
<span class="f2">+}</span>
<span class="bold">diff --git a/device/molex/x86_64-ot-kvm_x86_64-r0/OLS-V/lanemap.ini b/device/molex/x86_64-ot-kvm_x86_64-r0/OLS-V/lanemap.ini</span>
<span class="bold">new file mode 100644</span>
<span class="bold">index 000000000..a42385bd4</span>
<span class="bold">--- /dev/null</span>
<span class="bold">+++ b/device/molex/x86_64-ot-kvm_x86_64-r0/OLS-V/lanemap.ini</span>
<span class="f6">@@ -0,0 +1,32 @@</span>
<span class="f2">+eth1:25,26,27,28</span>
<span class="f2">+eth2:29,30,31,32</span>
<span class="f2">+eth3:33,34,35,36</span>
<span class="f2">+eth4:37,38,39,40</span>
<span class="f2">+eth5:45,46,47,48</span>
<span class="f2">+eth6:41,42,43,44</span>
<span class="f2">+eth7:1,2,3,4</span>
<span class="f2">+eth8:5,6,7,8</span>
<span class="f2">+eth9:13,14,15,16</span>
<span class="f2">+eth10:9,10,11,12</span>
<span class="f2">+eth11:17,18,19,20</span>
<span class="f2">+eth12:21,22,23,24</span>
<span class="f2">+eth13:53,54,55,56</span>
<span class="f2">+eth14:49,50,51,52</span>
<span class="f2">+eth15:57,58,59,60</span>
<span class="f2">+eth16:61,62,63,64</span>
<span class="f2">+eth17:69,70,71,72</span>
<span class="f2">+eth18:65,66,67,68</span>
<span class="f2">+eth19:73,74,75,76</span>
<span class="f2">+eth20:77,78,79,80</span>
<span class="f2">+eth21:109,110,111,112</span>
<span class="f2">+eth22:105,106,107,108</span>
<span class="f2">+eth23:113,114,115,116</span>
<span class="f2">+eth24:117,118,119,120</span>
<span class="f2">+eth25:125,126,127,128</span>
<span class="f2">+eth26:121,122,123,124</span>
<span class="f2">+eth27:81,82,83,84</span>
<span class="f2">+eth28:85,86,87,88</span>
<span class="f2">+eth29:93,94,95,96</span>
<span class="f2">+eth30:89,90,91,92</span>
<span class="f2">+eth31:101,102,103,104</span>
<span class="f2">+eth32:97,98,99,100</span>
<span class="bold">diff --git a/device/molex/x86_64-ot-kvm_x86_64-r0/OLS-V/optical_config.json b/device/molex/x86_64-ot-kvm_x86_64-r0/OLS-V/optical_config.json</span>
<span class="bold">new file mode 100644</span>
<span class="bold">index 000000000..d9163ebe0</span>
<span class="bold">--- /dev/null</span>
<span class="bold">+++ b/device/molex/x86_64-ot-kvm_x86_64-r0/OLS-V/optical_config.json</span>
<span class="f6">@@ -0,0 +1,44 @@</span>
<span class="f2">+{</span>
<span class="f2">+  &quot;ATTENUATOR&quot;: {</span>
<span class="f2">+    &quot;PADDING-VOA&quot;: {</span>
<span class="f2">+      &quot;id&quot;: &quot;0&quot;,</span>
<span class="f2">+      &quot;attenuation&quot;: &quot;4.2&quot;,</span>
<span class="f2">+      &quot;attenuation-mode&quot;: &quot;CONSTANT_ATTENUATION&quot;,</span>
<span class="f2">+      &quot;enabled&quot;: &quot;true&quot;</span>
<span class="f2">+    },</span>
<span class="f2">+    &quot;PA-VOA&quot;: {</span>
<span class="f2">+      &quot;id&quot;: &quot;1&quot;,</span>
<span class="f2">+      &quot;attenuation&quot;: &quot;3.2&quot;,</span>
<span class="f2">+      &quot;attenuation-mode&quot;: &quot;CONSTANT_ATTENUATION&quot;,</span>
<span class="f2">+      &quot;enabled&quot;: &quot;true&quot;</span>
<span class="f2">+    }</span>
<span class="f2">+  },</span>
<span class="f2">+  &quot;AMPLIFIER&quot;: {</span>
<span class="f2">+    &quot;PA&quot;: {</span>
<span class="f2">+      &quot;id&quot;: &quot;0&quot;,</span>
<span class="f2">+      &quot;target-gain&quot;: &quot;4.2&quot;,</span>
<span class="f2">+      &quot;target-gain-tilt&quot;: &quot;0.4&quot;,</span>
<span class="f2">+      &quot;gain-range&quot;: &quot;FIXED_GAIN_RANGE&quot;,</span>
<span class="f2">+      &quot;amp-mode&quot;: &quot;CONSTANT_GAIN&quot;,</span>
<span class="f2">+      &quot;enabled&quot;: &quot;true&quot;,</span>
<span class="f2">+      &quot;autolos&quot;: &quot;true&quot;,</span>
<span class="f2">+      &quot;apr-enabled&quot;: &quot;true&quot;</span>
<span class="f2">+    },</span>
<span class="f2">+    &quot;BA&quot;: {</span>
<span class="f2">+      &quot;id&quot;: &quot;1&quot;,</span>
<span class="f2">+      &quot;target-gain&quot;: &quot;5.2&quot;,</span>
<span class="f2">+      &quot;target-gain-tilt&quot;: &quot;0.5&quot;,</span>
<span class="f2">+      &quot;gain-range&quot;: &quot;FIXED_GAIN_RANGE&quot;,</span>
<span class="f2">+      &quot;amp-mode&quot;: &quot;CONSTANT_GAIN&quot;,</span>
<span class="f2">+      &quot;enabled&quot;: &quot;true&quot;,</span>
<span class="f2">+      &quot;autolos&quot;: &quot;true&quot;,</span>
<span class="f2">+      &quot;apr-enabled&quot;: &quot;true&quot;</span>
<span class="f2">+    }</span><span class="b1">  </span>
<span class="f2">+  },</span>
<span class="f2">+  &quot;OSC&quot;: {</span>
<span class="f2">+    &quot;OSC&quot;: {</span>
<span class="f2">+      &quot;id&quot;: &quot;0&quot;,</span>
<span class="f2">+      &quot;osc-sfp-enabled&quot;: &quot;true&quot;</span>
<span class="f2">+    }</span>
<span class="f2">+  }</span>
<span class="f2">+}</span>
<span class="bold">diff --git a/device/molex/x86_64-ot-kvm_x86_64-r0/OLS-V/port_config.ini b/device/molex/x86_64-ot-kvm_x86_64-r0/OLS-V/port_config.ini</span>
<span class="bold">new file mode 100644</span>
<span class="bold">index 000000000..cadd9ae60</span>
<span class="bold">--- /dev/null</span>
<span class="bold">+++ b/device/molex/x86_64-ot-kvm_x86_64-r0/OLS-V/port_config.ini</span>
<span class="f6">@@ -0,0 +1,33 @@</span>
<span class="f2">+# name          lanes             alias             index       speed</span>
<span class="f2">+Ethernet1       25,26,27,28       fortyGigE0/0      0           40000</span>
<span class="f2">+Ethernet2       29,30,31,32       fortyGigE0/4      1           40000</span>
<span class="f2">+Ethernet3       33,34,35,36       fortyGigE0/8      2           40000</span>
<span class="f2">+Ethernet4       37,38,39,40       fortyGigE0/12     3           40000</span>
<span class="f2">+Ethernet5       45,46,47,48       fortyGigE0/16     4           40000</span>
<span class="f2">+Ethernet6       41,42,43,44       fortyGigE0/20     5           40000</span>
<span class="f2">+Ethernet7       1,2,3,4           fortyGigE0/24     6           40000</span>
<span class="f2">+Ethernet8       5,6,7,8           fortyGigE0/28     7           40000</span>
<span class="f2">+Ethernet9       13,14,15,16       fortyGigE0/32     8           40000</span>
<span class="f2">+Ethernet10      9,10,11,12        fortyGigE0/36     9           40000</span>
<span class="f2">+Ethernet11      17,18,19,20       fortyGigE0/40     10          40000</span>
<span class="f2">+Ethernet12      21,22,23,24       fortyGigE0/44     11          40000</span>
<span class="f2">+Ethernet13      53,54,55,56       fortyGigE0/48     12          40000</span>
<span class="f2">+Ethernet14      49,50,51,52       fortyGigE0/52     13          40000</span>
<span class="f2">+Ethernet15      57,58,59,60       fortyGigE0/56     14          40000</span>
<span class="f2">+Ethernet16      61,62,63,64       fortyGigE0/60     15          40000</span>
<span class="f2">+Ethernet17      69,70,71,72       fortyGigE0/64     16          40000</span>
<span class="f2">+Ethernet18      65,66,67,68       fortyGigE0/68     17          40000</span>
<span class="f2">+Ethernet19      73,74,75,76       fortyGigE0/72     18          40000</span>
<span class="f2">+Ethernet20      77,78,79,80       fortyGigE0/76     19          40000</span>
<span class="f2">+Ethernet21      109,110,111,112   fortyGigE0/80     20          40000</span>
<span class="f2">+Ethernet22      105,106,107,108   fortyGigE0/84     21          40000</span>
<span class="f2">+Ethernet23      113,114,115,116   fortyGigE0/88     22          40000</span>
<span class="f2">+Ethernet24      117,118,119,120   fortyGigE0/92     23          40000</span>
<span class="f2">+Ethernet25      125,126,127,128   fortyGigE0/96     24          40000</span>
<span class="f2">+Ethernet26      121,122,123,124   fortyGigE0/100    25          40000</span>
<span class="f2">+Ethernet27      81,82,83,84       fortyGigE0/104    26          40000</span>
<span class="f2">+Ethernet28      85,86,87,88       fortyGigE0/108    27          40000</span>
<span class="f2">+Ethernet29      93,94,95,96       fortyGigE0/112    28          40000</span>
<span class="f2">+Ethernet30      89,90,91,92       fortyGigE0/116    29          40000</span>
<span class="f2">+Ethernet31      101,102,103,104   fortyGigE0/120    30          40000</span>
<span class="f2">+Ethernet32      97,98,99,100      fortyGigE0/124    31          40000</span>
<span class="bold">diff --git a/device/molex/x86_64-ot-kvm_x86_64-r0/OLS-V/qos.json.j2 b/device/molex/x86_64-ot-kvm_x86_64-r0/OLS-V/qos.json.j2</span>
<span class="bold">new file mode 100644</span>
<span class="bold">index 000000000..3e548325e</span>
<span class="bold">--- /dev/null</span>
<span class="bold">+++ b/device/molex/x86_64-ot-kvm_x86_64-r0/OLS-V/qos.json.j2</span>
<span class="f6">@@ -0,0 +1 @@</span>
<span class="f2">+{%- include 'qos_config.j2' %}</span>
<span class="bold">diff --git a/device/molex/x86_64-ot-kvm_x86_64-r0/OLS-V/sai.profile b/device/molex/x86_64-ot-kvm_x86_64-r0/OLS-V/sai.profile</span>
<span class="bold">new file mode 100644</span>
<span class="bold">index 000000000..ed9dd21bd</span>
<span class="bold">--- /dev/null</span>
<span class="bold">+++ b/device/molex/x86_64-ot-kvm_x86_64-r0/OLS-V/sai.profile</span>
<span class="f6">@@ -0,0 +1,5 @@</span>
<span class="f2">+SAI_VS_SWITCH_TYPE=SAI_VS_SWITCH_TYPE_BCM56850</span>
<span class="f2">+SAI_VS_HOSTIF_USE_TAP_DEVICE=true</span>
<span class="f2">+SAI_VS_INTERFACE_LANE_MAP_FILE=/usr/share/sonic/hwsku/lanemap.ini</span>
<span class="f2">+SAI_VS_CORE_PORT_INDEX_MAP_FILE=/usr/share/sonic/hwsku/coreportindexmap.ini</span>
<span class="f2">+SAI_VS_INTERFACE_FABRIC_LANE_MAP_FILE=/usr/share/sonic/hwsku/fabriclanemap.ini</span>
<span class="bold">diff --git a/device/molex/x86_64-ot-kvm_x86_64-r0/attenuator_stats.lua b/device/molex/x86_64-ot-kvm_x86_64-r0/attenuator_stats.lua</span>
<span class="bold">new file mode 100644</span>
<span class="bold">index 000000000..dfaeea0db</span>
<span class="bold">--- /dev/null</span>
<span class="bold">+++ b/device/molex/x86_64-ot-kvm_x86_64-r0/attenuator_stats.lua</span>
<span class="f6">@@ -0,0 +1,49 @@</span>
<span class="f2">+-- KEYS - rif IDs</span>
<span class="f2">+-- ARGV[1] - counters db index</span>
<span class="f2">+-- ARGV[2] - counters table name</span>
<span class="f2">+-- ARGV[3] - poll time interval</span>
<span class="f2">+-- return log</span>
<span class="f2">+</span>
<span class="f2">+local logtable = {}</span>
<span class="f2">+</span>
<span class="f2">+local function logit(msg)</span>
<span class="f2">+  logtable[#logtable+1] = tostring(msg)</span>
<span class="f2">+end</span>
<span class="f2">+</span>
<span class="f2">+local counters_db = ARGV[1]</span>
<span class="f2">+local counters_table_name = ARGV[2]</span><span class="b1"> </span>
<span class="f2">+local state_db = &quot;6&quot;</span>
<span class="f2">+local vid_table_name = &quot;COUNTERS_ATTENUATOR_NAME_MAP&quot;</span>
<span class="f2">+local state_table_name = &quot;ATTENUATOR&quot;</span>
<span class="f2">+</span>
<span class="f2">+</span>
<span class="f2">+</span>
<span class="f2">+local n = table.getn(KEYS)</span>
<span class="f2">+for i = 1, n do</span>
<span class="f2">+    redis.call('SELECT', counters_db)</span>
<span class="f2">+</span>
<span class="f2">+    local obj_name = redis.call('HGET', vid_table_name, KEYS[i])</span>
<span class="f2">+    logit(obj_name)</span>
<span class="f2">+    -- Get new COUNTERS values</span>
<span class="f2">+    local return_loss = &quot;&quot;</span>
<span class="f2">+    local out_power = &quot;&quot;</span>
<span class="f2">+    local act_att = &quot;&quot;</span>
<span class="f2">+</span>
<span class="f2">+    if redis.call('HEXISTS', counters_table_name .. ':' .. KEYS[i], 'SAI_OTAI_ATTENUATOR_STAT_OPTICAL_RETURN_LOSS') == 1 then</span>
<span class="f2">+        return_loss = redis.call('HGET', counters_table_name .. ':' .. KEYS[i], 'SAI_OTAI_ATTENUATOR_STAT_OPTICAL_RETURN_LOSS')</span>
<span class="f2">+    end</span>
<span class="f2">+    if redis.call('HEXISTS', counters_table_name .. ':' .. KEYS[i], 'SAI_OTAI_ATTENUATOR_STAT_OUTPUT_POWER_TOTAL') == 1 then</span>
<span class="f2">+        out_power = redis.call('HGET', counters_table_name .. ':' .. KEYS[i], 'SAI_OTAI_ATTENUATOR_STAT_OUTPUT_POWER_TOTAL')</span>
<span class="f2">+    end</span>
<span class="f2">+    if redis.call('HEXISTS', counters_table_name .. ':' .. KEYS[i], 'SAI_OTAI_ATTENUATOR_STAT_ACTUAL_ATTENUATION') == 1 then</span>
<span class="f2">+        act_att = redis.call('HGET', counters_table_name .. ':' .. KEYS[i], 'SAI_OTAI_ATTENUATOR_STAT_ACTUAL_ATTENUATION')</span>
<span class="f2">+    end</span>
<span class="f2">+</span>
<span class="f2">+    redis.call('SELECT', state_db)</span>
<span class="f2">+    redis.call('HSET', state_table_name .. '|' .. obj_name, 'opticl-return-loss', return_loss)</span>
<span class="f2">+    redis.call('HSET', state_table_name .. '|' .. obj_name, 'output-power-total', out_power)</span>
<span class="f2">+    redis.call('HSET', state_table_name .. '|' .. obj_name, 'actual-attenuation', act_att)</span>
<span class="f2">+</span>
<span class="f2">+end</span>
<span class="f2">+</span>
<span class="f2">+return logtable</span>
<span class="bold">diff --git a/device/molex/x86_64-ot-kvm_x86_64-r0/default_sku b/device/molex/x86_64-ot-kvm_x86_64-r0/default_sku</span>
<span class="bold">new file mode 100644</span>
<span class="bold">index 000000000..ccf182413</span>
<span class="bold">--- /dev/null</span>
<span class="bold">+++ b/device/molex/x86_64-ot-kvm_x86_64-r0/default_sku</span>
<span class="f6">@@ -0,0 +1 @@</span>
<span class="f2">+OLS-V t1</span>
<span class="bold">diff --git a/device/molex/x86_64-ot-kvm_x86_64-r0/installer.conf b/device/molex/x86_64-ot-kvm_x86_64-r0/installer.conf</span>
<span class="bold">new file mode 100644</span>
<span class="bold">index 000000000..d8d47e673</span>
<span class="bold">--- /dev/null</span>
<span class="bold">+++ b/device/molex/x86_64-ot-kvm_x86_64-r0/installer.conf</span>
<span class="f6">@@ -0,0 +1 @@</span>
<span class="f2">+ONIE_PLATFORM_EXTRA_CMDLINE_LINUX=&quot;swiotlb=65536&quot;</span>
\ No newline at end of file
<span class="bold">diff --git a/device/molex/x86_64-ot-kvm_x86_64-r0/ot-metadata.json b/device/molex/x86_64-ot-kvm_x86_64-r0/ot-metadata.json</span>
<span class="bold">new file mode 100644</span>
<span class="bold">index 000000000..b020a7424</span>
<span class="bold">--- /dev/null</span>
<span class="bold">+++ b/device/molex/x86_64-ot-kvm_x86_64-r0/ot-metadata.json</span>
<span class="f6">@@ -0,0 +1,8 @@</span>
<span class="f2">+{</span>
<span class="f2">+    &quot;DEVICE_METADATA&quot;: {</span>
<span class="f2">+        &quot;localhost&quot;: {</span>
<span class="f2">+            &quot;type&quot;: &quot;SonicOt&quot;,</span>
<span class="f2">+            &quot;switch_type&quot;: &quot;ot&quot;</span>
<span class="f2">+        }</span>
<span class="f2">+    }</span>
<span class="f2">+}</span>
\ No newline at end of file
<span class="bold">diff --git a/device/molex/x86_64-ot-kvm_x86_64-r0/platform_asic b/device/molex/x86_64-ot-kvm_x86_64-r0/platform_asic</span>
<span class="bold">new file mode 100644</span>
<span class="bold">index 000000000..446f4ba31</span>
<span class="bold">--- /dev/null</span>
<span class="bold">+++ b/device/molex/x86_64-ot-kvm_x86_64-r0/platform_asic</span>
<span class="f6">@@ -0,0 +1 @@</span>
<span class="f2">+ot-kvm</span>
\ No newline at end of file
<span class="bold">diff --git a/device/molex/x86_64-ot-kvm_x86_64-r0/pmon_daemon_control.json b/device/molex/x86_64-ot-kvm_x86_64-r0/pmon_daemon_control.json</span>
<span class="bold">new file mode 100644</span>
<span class="bold">index 000000000..a860e3781</span>
<span class="bold">--- /dev/null</span>
<span class="bold">+++ b/device/molex/x86_64-ot-kvm_x86_64-r0/pmon_daemon_control.json</span>
<span class="f6">@@ -0,0 +1,7 @@</span>
<span class="f2">+{</span>
<span class="f2">+    &quot;skip_ledd&quot;: true,</span>
<span class="f2">+    &quot;skip_pcied&quot;: true,</span>
<span class="f2">+    &quot;skip_syseepromd&quot;: true,</span>
<span class="f2">+    &quot;skip_xcvrd&quot;: true,</span>
<span class="f2">+    &quot;skip_ycabled&quot;: true</span>
<span class="f2">+}</span>
<span class="bold">diff --git a/dockers/docker-orchagent/critical_processes.j2 b/dockers/docker-orchagent/critical_processes.j2</span>
<span class="bold">index 10828b3fa..d3afcda2f 100644</span>
<span class="bold">--- a/dockers/docker-orchagent/critical_processes.j2</span>
<span class="bold">+++ b/dockers/docker-orchagent/critical_processes.j2</span>
<span class="f6">@@ -3,6 +3,9 @@</span>
 {% if DEVICE_METADATA.localhost.switch_type == &quot;fabric&quot; %}
 {% set is_fabric_asic = 1 %}
 {% endif %}
<span class="f2">+{% if DEVICE_METADATA.localhost.switch_type == &quot;ot&quot; %}</span>
<span class="f2">+{% set is_fabric_asic = 2 %}</span>
<span class="f2">+{% endif %}</span>
 {% endif %}
 program:orchagent
 {% if is_fabric_asic == 0 %}
<span class="f6">@@ -19,3 +22,6 @@</span> program:vxlanmgrd
 program:coppmgrd
 program:tunnelmgrd
 {%- endif %}
<span class="f2">+{% if is_fabric_asic == 2 %}</span>
<span class="f2">+program:otaimgrd</span>
<span class="f2">+{%- endif %}</span>
<span class="bold">diff --git a/dockers/docker-orchagent/supervisord.conf.j2 b/dockers/docker-orchagent/supervisord.conf.j2</span>
<span class="bold">index 6c822f464..75f0f853f 100644</span>
<span class="bold">--- a/dockers/docker-orchagent/supervisord.conf.j2</span>
<span class="bold">+++ b/dockers/docker-orchagent/supervisord.conf.j2</span>
<span class="f6">@@ -35,6 +35,9 @@</span> dependent_startup=true
 {% set is_fabric_asic = 1 %}
 {% set orchagent_dependent_startup_wait_for = &quot;rsyslogd:running&quot; %}
 {%- endif %}
<span class="f2">+{% if DEVICE_METADATA.localhost.switch_type == &quot;ot&quot; %}</span>
<span class="f2">+{% set is_fabric_asic = 2 %}</span>
<span class="f2">+{%- endif %}</span>
 {%- endif %}
 {% set asan_extra_options = ':print_suppressions=0' %}
 
<span class="f6">@@ -289,3 +292,18 @@</span> dependent_startup_wait_for=swssconfig:exited
 environment=ASAN_OPTIONS=&quot;log_path=/var/log/asan/fdbsyncd-asan.log{{ asan_extra_options }}&quot;
 {% endif %}
 {%- endif %}
<span class="f2">+</span>
<span class="f2">+{% if is_fabric_asic == 2 %}</span>
<span class="f2">+[program:otaimgrd]</span>
<span class="f2">+command=/usr/bin/otaimgrd</span>
<span class="f2">+priority=18</span>
<span class="f2">+autostart=false</span>
<span class="f2">+autorestart=false</span>
<span class="f2">+stdout_logfile=syslog</span>
<span class="f2">+stderr_logfile=syslog</span>
<span class="f2">+dependent_startup=true</span>
<span class="f2">+dependent_startup_wait_for=swssconfig:exited</span>
<span class="f2">+{% if ENABLE_ASAN == &quot;y&quot; %}</span>
<span class="f2">+environment=ASAN_OPTIONS=&quot;log_path=/var/log/asan/otaimgrd-asan.log{{ asan_extra_options }}&quot;</span>
<span class="f2">+{% endif %}</span>
<span class="f2">+{%- endif %}</span>
<span class="bold">diff --git a/files/build_templates/sonic_debian_extension.j2 b/files/build_templates/sonic_debian_extension.j2</span>
<span class="bold">index 848911433..6b5289e74 100644</span>
<span class="bold">--- a/files/build_templates/sonic_debian_extension.j2</span>
<span class="bold">+++ b/files/build_templates/sonic_debian_extension.j2</span>
<span class="f6">@@ -432,6 +432,11 @@</span> sudo cp $IMAGE_CONFIGS/copp/copp-config.sh $FILESYSTEM_ROOT/usr/bin/
 sudo cp $IMAGE_CONFIGS/copp/copp_cfg.j2 $FILESYSTEM_ROOT_USR_SHARE_SONIC_TEMPLATES/
 echo &quot;copp-config.service&quot; | sudo tee -a $GENERATED_SERVICE_FILE
 
<span class="f2">+# Copy Optical configuration files and templates</span>
<span class="f2">+sudo cp $IMAGE_CONFIGS/optical/optical-config.service $FILESYSTEM_ROOT_USR_LIB_SYSTEMD_SYSTEM</span>
<span class="f2">+sudo cp $IMAGE_CONFIGS/optical/optical-config.sh $FILESYSTEM_ROOT/usr/bin/</span>
<span class="f2">+echo &quot;optical-config.service&quot; | sudo tee -a $GENERATED_SERVICE_FILE</span>
<span class="f2">+</span>
 # Copy dhcp client configuration template and create an initial configuration
 sudo cp files/dhcp/dhclient.conf.j2 $FILESYSTEM_ROOT_USR_SHARE_SONIC_TEMPLATES/
 j2 files/dhcp/dhclient.conf.j2 | sudo tee $FILESYSTEM_ROOT/etc/dhcp/dhclient.conf
<span class="bold">diff --git a/platform/molex/docker-olssyncd-molex.dep b/platform/molex/docker-olssyncd-molex.dep</span>
<span class="bold">new file mode 100644</span>
<span class="bold">index 000000000..e6d431974</span>
<span class="bold">--- /dev/null</span>
<span class="bold">+++ b/platform/molex/docker-olssyncd-molex.dep</span>
<span class="f6">@@ -0,0 +1,9 @@</span>
<span class="f2">+#DPKG FRK</span>
<span class="f2">+DPATH       := $($(DOCKER_OLSSYNCD_BASE)_PATH)</span>
<span class="f2">+DEP_FILES   := $(SONIC_COMMON_FILES_LIST) $(PLATFORM_PATH)/docker-olssyncd-molex.mk $(PLATFORM_PATH)/docker-olssyncd-molex.dep</span><span class="b1">   </span>
<span class="f2">+DEP_FILES   += $(SONIC_COMMON_BASE_FILES_LIST)</span>
<span class="f2">+DEP_FILES   += $(shell git ls-files $(DPATH))</span>
<span class="f2">+</span>
<span class="f2">+$(DOCKER_OLSSYNCD_BASE)_CACHE_MODE  := GIT_CONTENT_SHA</span><span class="b1"> </span>
<span class="f2">+$(DOCKER_OLSSYNCD_BASE)_DEP_FLAGS   := $(SONIC_COMMON_FLAGS_LIST)</span>
<span class="f2">+$(DOCKER_OLSSYNCD_BASE)_DEP_FILES   := $(DEP_FILES)</span>
<span class="bold">diff --git a/platform/molex/docker-olssyncd-molex.mk b/platform/molex/docker-olssyncd-molex.mk</span>
<span class="bold">new file mode 100644</span>
<span class="bold">index 000000000..62e4b669c</span>
<span class="bold">--- /dev/null</span>
<span class="bold">+++ b/platform/molex/docker-olssyncd-molex.mk</span>
<span class="f6">@@ -0,0 +1,31 @@</span>
<span class="f2">+# docker image for molex ols-syncd</span>
<span class="f2">+</span>
<span class="f2">+DOCKER_OLSSYNCD_PLATFORM_CODE = molex</span>
<span class="f2">+</span>
<span class="f2">+DOCKER_OLSSYNCD_BASE_STEM = docker-olssyncd-$(DOCKER_OLSSYNCD_PLATFORM_CODE)</span>
<span class="f2">+DOCKER_OLSSYNCD_BASE = $(DOCKER_OLSSYNCD_BASE_STEM).gz</span>
<span class="f2">+</span>
<span class="f2">+$(DOCKER_OLSSYNCD_BASE)_PATH = $(PLATFORM_PATH)/docker-olssyncd-$(DOCKER_OLSSYNCD_PLATFORM_CODE)</span>
<span class="f2">+</span>
<span class="f2">+$(DOCKER_OLSSYNCD_BASE)_FILES += $(SUPERVISOR_PROC_EXIT_LISTENER_SCRIPT)</span>
<span class="f2">+</span>
<span class="f2">+$(DOCKER_OLSSYNCD_BASE)_LOAD_DOCKERS += $(DOCKER_CONFIG_ENGINE_BUSTER)</span>
<span class="f2">+</span>
<span class="f2">+SONIC_DOCKER_IMAGES += $(DOCKER_OLSSYNCD_BASE)</span>
<span class="f2">+# ifneq ($(ENABLE_OLSSYNCD_RPC),y)</span>
<span class="f2">+SONIC_INSTALL_DOCKER_IMAGES += $(DOCKER_OLSSYNCD_BASE)</span>
<span class="f2">+# endif</span>
<span class="f2">+</span>
<span class="f2">+$(DOCKER_OLSSYNCD_BASE)_CONTAINER_NAME = olssyncd</span>
<span class="f2">+$(DOCKER_OLSSYNCD_BASE)_RUN_OPT += --privileged -t</span>
<span class="f2">+$(DOCKER_OLSSYNCD_BASE)_RUN_OPT += -v /host/machine.conf:/etc/machine.conf</span>
<span class="f2">+$(DOCKER_OLSSYNCD_BASE)_RUN_OPT += -v /etc/sonic:/etc/sonic:ro</span>
<span class="f2">+</span>
<span class="f2">+SONIC_BUSTER_DOCKERS += $(DOCKER_OLSSYNCD_BASE)</span>
<span class="f2">+</span>
<span class="f2">+$(DOCKER_OLSSYNCD_BASE)_DEPENDS += $(OPLINKUTIL) $(OPLINKHAL) $(OPLINKSYNCD)</span>
<span class="f2">+</span>
<span class="f2">+$(DOCKER_OLSSYNCD_BASE)_VERSION = 1.0.0</span>
<span class="f2">+$(DOCKER_OLSSYNCD_BASE)_PACKAGE_NAME = olssyncd</span>
<span class="f2">+</span>
<span class="f2">+$(DOCKER_OLSSYNCD_BASE)_RUN_OPT += -v /host/warmboot:/var/warmboot</span>
<span class="bold">diff --git a/platform/molex/docker-olssyncd-molex/Dockerfile.j2 b/platform/molex/docker-olssyncd-molex/Dockerfile.j2</span>
<span class="bold">new file mode 100644</span>
<span class="bold">index 000000000..0292f003b</span>
<span class="bold">--- /dev/null</span>
<span class="bold">+++ b/platform/molex/docker-olssyncd-molex/Dockerfile.j2</span>
<span class="f6">@@ -0,0 +1,33 @@</span>
<span class="f2">+FROM docker-config-engine-buster-{{DOCKER_USERNAME}}:{{DOCKER_USERTAG}}</span>
<span class="f2">+</span>
<span class="f2">+ARG docker_container_name</span>
<span class="f2">+</span>
<span class="f2">+RUN [ -f /etc/rsyslog.conf ] &amp;&amp; sed -ri &quot;s/%syslogtag%/$docker_container_name#%syslogtag%/;&quot; /etc/rsyslog.conf</span>
<span class="f2">+</span>
<span class="f2">+## Make apt-get non-interactive</span>
<span class="f2">+ENV DEBIAN_FRONTEND=noninteractive</span>
<span class="f2">+</span>
<span class="f2">+RUN apt-get update</span>
<span class="f2">+</span>
<span class="f2">+RUN apt-get install -f -y libjsoncpp-dev libpci3</span>
<span class="f2">+</span>
<span class="f2">+COPY \</span>
<span class="f2">+{% for deb in docker_olssyncd_molex_debs.split(' ') -%}</span>
<span class="f2">+debs/{{ deb }}{{' '}}</span>
<span class="f2">+{%- endfor -%}</span>
<span class="f2">+debs/</span>
<span class="f2">+</span>
<span class="f2">+RUN dpkg -i \</span>
<span class="f2">+{% for deb in docker_olssyncd_molex_debs.split(' ') -%}</span>
<span class="f2">+debs/{{ deb }}{{' '}}</span>
<span class="f2">+{%- endfor %} || apt-get install -f -y</span>
<span class="f2">+</span>
<span class="f2">+COPY [&quot;supervisord.conf&quot;, &quot;/etc/supervisor/conf.d/&quot;]</span>
<span class="f2">+COPY [&quot;files/supervisor-proc-exit-listener&quot;, &quot;/usr/bin&quot;]</span>
<span class="f2">+COPY [&quot;critical_processes&quot;, &quot;/etc/supervisor/&quot;]</span>
<span class="f2">+</span>
<span class="f2">+## Clean up</span>
<span class="f2">+RUN apt-get clean -y; apt-get autoclean -y; apt-get autoremove -y</span>
<span class="f2">+RUN rm -rf /debs</span>
<span class="f2">+</span>
<span class="f2">+ENTRYPOINT [&quot;/usr/local/bin/supervisord&quot;]</span>
<span class="bold">diff --git a/platform/molex/docker-olssyncd-molex/critical_processes b/platform/molex/docker-olssyncd-molex/critical_processes</span>
<span class="bold">new file mode 100644</span>
<span class="bold">index 000000000..c3f8165ea</span>
<span class="bold">--- /dev/null</span>
<span class="bold">+++ b/platform/molex/docker-olssyncd-molex/critical_processes</span>
<span class="f6">@@ -0,0 +1,2 @@</span>
<span class="f2">+program:hal</span>
<span class="f2">+program:syncd</span>
<span class="bold">diff --git a/platform/molex/docker-olssyncd-molex/supervisord.conf b/platform/molex/docker-olssyncd-molex/supervisord.conf</span>
<span class="bold">new file mode 100644</span>
<span class="bold">index 000000000..620684335</span>
<span class="bold">--- /dev/null</span>
<span class="bold">+++ b/platform/molex/docker-olssyncd-molex/supervisord.conf</span>
<span class="f6">@@ -0,0 +1,49 @@</span>
<span class="f2">+[supervisord]</span>
<span class="f2">+logfile_maxbytes=1MB</span>
<span class="f2">+logfile_backups=2</span>
<span class="f2">+nodaemon=true</span>
<span class="f2">+</span>
<span class="f2">+[eventlistener:dependent-startup]</span>
<span class="f2">+command=python3 -m supervisord_dependent_startup</span>
<span class="f2">+autostart=true</span>
<span class="f2">+autorestart=unexpected</span>
<span class="f2">+startretries=0</span>
<span class="f2">+exitcodes=0,3</span>
<span class="f2">+events=PROCESS_STATE</span>
<span class="f2">+buffer_size=1024</span>
<span class="f2">+</span>
<span class="f2">+[eventlistener:supervisor-proc-exit-listener]</span>
<span class="f2">+command=/usr/bin/supervisor-proc-exit-listener --container-name olssyncd</span>
<span class="f2">+events=PROCESS_STATE_EXITED,PROCESS_STATE_RUNNING</span>
<span class="f2">+autostart=true</span>
<span class="f2">+autorestart=unexpected</span>
<span class="f2">+buffer_size=1024</span>
<span class="f2">+</span>
<span class="f2">+[program:rsyslogd]</span>
<span class="f2">+command=/usr/sbin/rsyslogd -n -iNONE</span>
<span class="f2">+priority=1</span>
<span class="f2">+autostart=false</span>
<span class="f2">+autorestart=unexpected</span>
<span class="f2">+stdout_logfile=syslog</span>
<span class="f2">+stderr_logfile=syslog</span>
<span class="f2">+dependent_startup=true</span>
<span class="f2">+</span>
<span class="f2">+[program:hal]</span>
<span class="f2">+command=/usr/bin/hal</span>
<span class="f2">+priority=2</span>
<span class="f2">+autostart=false</span>
<span class="f2">+autorestart=true</span>
<span class="f2">+stdout_logfile=syslog</span>
<span class="f2">+stderr_logfile=syslog</span>
<span class="f2">+dependent_startup=true</span>
<span class="f2">+dependent_startup_wait_for=rsyslogd:running</span>
<span class="f2">+</span>
<span class="f2">+[program:syncd]</span>
<span class="f2">+command=/usr/bin/syncd</span>
<span class="f2">+priority=3</span>
<span class="f2">+autostart=false</span>
<span class="f2">+autorestart=true</span>
<span class="f2">+stdout_logfile=syslog</span>
<span class="f2">+stderr_logfile=syslog</span>
<span class="f2">+dependent_startup=true</span>
<span class="f2">+dependent_startup_wait_for=hal:running</span>
<span class="bold">diff --git a/platform/molex/kvm-image.dep b/platform/molex/kvm-image.dep</span>
<span class="bold">new file mode 100644</span>
<span class="bold">index 000000000..05c083a51</span>
<span class="bold">--- /dev/null</span>
<span class="bold">+++ b/platform/molex/kvm-image.dep</span>
<span class="f6">@@ -0,0 +1,2 @@</span>
<span class="f2">+#DPKG FRK</span>
<span class="f2">+$(SONIC_KVM_IMAGE)_CACHE_MODE  := none</span>
<span class="bold">diff --git a/platform/molex/kvm-image.mk b/platform/molex/kvm-image.mk</span>
<span class="bold">new file mode 100644</span>
<span class="bold">index 000000000..d534adfc4</span>
<span class="bold">--- /dev/null</span>
<span class="bold">+++ b/platform/molex/kvm-image.mk</span>
<span class="f6">@@ -0,0 +1,15 @@</span>
<span class="f2">+# sonic kvm image</span>
<span class="f2">+</span>
<span class="f2">+SONIC_KVM_IMAGE = sonic-vs.img.gz</span>
<span class="f2">+$(SONIC_KVM_IMAGE)_INSTALLS += $(SYSTEMD_SONIC_GENERATOR)</span>
<span class="f2">+$(SONIC_KVM_IMAGE)_LAZY_INSTALLS += $(OTKVM_OLSV_PLATFORM_MODULE)</span>
<span class="f2">+$(SONIC_KVM_IMAGE)_MACHINE = vs</span>
<span class="f2">+$(SONIC_KVM_IMAGE)_IMAGE_TYPE = kvm</span>
<span class="f2">+ifeq ($(INSTALL_DEBUG_TOOLS),y)</span>
<span class="f2">+$(SONIC_KVM_IMAGE)_DOCKERS += $(SONIC_INSTALL_DOCKER_DBG_IMAGES)</span>
<span class="f2">+$(SONIC_KVM_IMAGE)_DOCKERS += $(filter-out $(patsubst %-$(DBG_IMAGE_MARK).gz,%.gz, $(SONIC_INSTALL_DOCKER_DBG_IMAGES)), $(SONIC_INSTALL_DOCKER_IMAGES))</span>
<span class="f2">+else</span>
<span class="f2">+$(SONIC_KVM_IMAGE)_DOCKERS = $(SONIC_INSTALL_DOCKER_IMAGES)</span>
<span class="f2">+endif</span>
<span class="f2">+$(SONIC_KVM_IMAGE)_FILES = $(ONIE_RECOVERY_IMAGE) $(ONIE_RECOVERY_KVM_4ASIC_IMAGE) $(ONIE_RECOVERY_KVM_6ASIC_IMAGE)</span>
<span class="f2">+SONIC_INSTALLERS += $(SONIC_KVM_IMAGE)</span>
<span class="bold">diff --git a/platform/molex/one-image.dep b/platform/molex/one-image.dep</span>
<span class="bold">new file mode 100644</span>
<span class="bold">index 000000000..c5399d808</span>
<span class="bold">--- /dev/null</span>
<span class="bold">+++ b/platform/molex/one-image.dep</span>
<span class="f6">@@ -0,0 +1,2 @@</span>
<span class="f2">+#DPKG FRK</span>
<span class="f2">+$(SONIC_ONE_IMAGE)_CACHE_MODE  := none</span>
<span class="bold">diff --git a/platform/molex/one-image.mk b/platform/molex/one-image.mk</span>
<span class="bold">new file mode 100644</span>
<span class="bold">index 000000000..e0bce2055</span>
<span class="bold">--- /dev/null</span>
<span class="bold">+++ b/platform/molex/one-image.mk</span>
<span class="f6">@@ -0,0 +1,14 @@</span>
<span class="f2">+# sonic vs one image installer</span>
<span class="f2">+</span>
<span class="f2">+SONIC_ONE_IMAGE = sonic-vs.bin</span>
<span class="f2">+$(SONIC_ONE_IMAGE)_MACHINE = vs</span>
<span class="f2">+$(SONIC_ONE_IMAGE)_IMAGE_TYPE = onie</span>
<span class="f2">+$(SONIC_ONE_IMAGE)_INSTALLS += $(SYSTEMD_SONIC_GENERATOR)</span>
<span class="f2">+$(SONIC_ONE_IMAGE)_LAZY_INSTALLS += $($(SONIC_KVM_IMAGE)_LAZY_INSTALLS)</span>
<span class="f2">+ifeq ($(INSTALL_DEBUG_TOOLS),y)</span>
<span class="f2">+$(SONIC_ONE_IMAGE)_DOCKERS += $(SONIC_INSTALL_DOCKER_DBG_IMAGES)</span>
<span class="f2">+$(SONIC_ONE_IMAGE)_DOCKERS += $(filter-out $(patsubst %-$(DBG_IMAGE_MARK).gz,%.gz, $(SONIC_INSTALL_DOCKER_DBG_IMAGES)), $(SONIC_INSTALL_DOCKER_IMAGES))</span>
<span class="f2">+else</span>
<span class="f2">+$(SONIC_ONE_IMAGE)_DOCKERS = $(SONIC_INSTALL_DOCKER_IMAGES)</span>
<span class="f2">+endif</span>
<span class="f2">+SONIC_INSTALLERS += $(SONIC_ONE_IMAGE)</span>
<span class="bold">diff --git a/platform/molex/onie.dep b/platform/molex/onie.dep</span>
<span class="bold">new file mode 100644</span>
<span class="bold">index 000000000..36de83ce8</span>
<span class="bold">--- /dev/null</span>
<span class="bold">+++ b/platform/molex/onie.dep</span>
<span class="f6">@@ -0,0 +1,2 @@</span>
<span class="f2">+#DPKG FRK</span>
<span class="f2">+$(ONIE_RECOVERY_IMAGE)_CACHE_MODE  := none</span>
<span class="bold">diff --git a/platform/molex/onie.mk b/platform/molex/onie.mk</span>
<span class="bold">new file mode 100644</span>
<span class="bold">index 000000000..c64a09b88</span>
<span class="bold">--- /dev/null</span>
<span class="bold">+++ b/platform/molex/onie.mk</span>
<span class="f6">@@ -0,0 +1,10 @@</span>
<span class="f2">+ONIE_RECOVERY_IMAGE = onie-recovery-x86_64-kvm_x86_64-r0.iso</span>
<span class="f2">+$(ONIE_RECOVERY_IMAGE)_URL = &quot;https://sonicstorage.blob.core.windows.net/packages/onie/onie-recovery-x86_64-kvm_x86_64-r0.iso?sv=2015-04-05&amp;sr=b&amp;sig=XMAk1cttBFM369CMbihe5oZgXwe4uaDVfwg4CTLT%2F5U%3D&amp;se=2155-10-13T10%3A40%3A13Z&amp;sp=r&quot;
+</span>
<span class="f2">+ONIE_RECOVERY_KVM_4ASIC_IMAGE = onie-recovery-x86_64-kvm_x86_64_4_asic-r0.iso</span>
<span class="f2">+$(ONIE_RECOVERY_KVM_4ASIC_IMAGE)_URL = &quot;https://sonicstorage.blob.core.windows.net/packages/onie/onie-recovery-x86_64-kvm_x86_64_4_asic-r0.iso?sv=2020-04-08&amp;st=2021-08-27T22%3A41%3A07Z&amp;se=2030-08-28T22%3A41%3A00Z&amp;sr=b&amp;sp=r&amp;sig=zyaX7rHnE5jXldpgrnWq1nvsfmMTrVCSuESZqrIxDLc%3D&quot;
+</span>
<span class="f2">+ONIE_RECOVERY_KVM_6ASIC_IMAGE = onie-recovery-x86_64-kvm_x86_64_6_asic-r0.iso</span>
<span class="f2">+$(ONIE_RECOVERY_KVM_6ASIC_IMAGE)_URL = &quot;https://sonicstorage.blob.core.windows.net/packages/onie/onie-recovery-x86_64-kvm_x86_64_6_asic-r0.iso?sv=2020-04-08&amp;st=2021-08-27T22%3A42%3A24Z&amp;se=2030-08-28T22%3A42%3A00Z&amp;sr=b&amp;sp=r&amp;sig=RqbtHJt8Hvy7j78jt3TgXo27T7zjdUDfSxqmOID1YUU%3D&quot;
+</span>
<span class="f2">+SONIC_ONLINE_FILES += $(ONIE_RECOVERY_IMAGE) $(ONIE_RECOVERY_KVM_4ASIC_IMAGE) $(ONIE_RECOVERY_KVM_6ASIC_IMAGE)</span>
<span class="bold">diff --git a/platform/molex/oplinkhal.dep b/platform/molex/oplinkhal.dep</span>
<span class="bold">new file mode 100644</span>
<span class="bold">index 000000000..84a056f52</span>
<span class="bold">--- /dev/null</span>
<span class="bold">+++ b/platform/molex/oplinkhal.dep</span>
<span class="f6">@@ -0,0 +1,11 @@</span>
<span class="f2">+</span>
<span class="f2">+SPATH       := $($(OPLINKHAL)_SRC_PATH)</span>
<span class="f2">+DEP_FILES   := $(SONIC_COMMON_FILES_LIST)</span>
<span class="f2">+DEP_FILES	+= $(PLATFORM_PATH)/oplinkhal.mk $(PLATFORM_PATH)/oplinkhal.dep</span>
<span class="f2">+DEP_FILES   += $(SONIC_COMMON_BASE_FILES_LIST)</span>
<span class="f2">+DEP_FILES   += $(shell git ls-files $(SPATH))</span>
<span class="f2">+</span>
<span class="f2">+$(OPLINKHAL)_CACHE_MODE  := GIT_CONTENT_SHA</span>
<span class="f2">+$(OPLINKHAL)_DEP_FLAGS   := $(SONIC_COMMON_FLAGS_LIST)</span>
<span class="f2">+$(OPLINKHAL)_DEP_FILES   := $(DEP_FILES)</span>
<span class="f2">+</span>
<span class="bold">diff --git a/platform/molex/oplinkhal.mk b/platform/molex/oplinkhal.mk</span>
<span class="bold">new file mode 100644</span>
<span class="bold">index 000000000..58dba8b4d</span>
<span class="bold">--- /dev/null</span>
<span class="bold">+++ b/platform/molex/oplinkhal.mk</span>
<span class="f6">@@ -0,0 +1,14 @@</span>
<span class="f2">+# hal of oplink</span>
<span class="f2">+</span>
<span class="f2">+OPLINKHAL_VERSION = 1.0.0</span>
<span class="f2">+</span>
<span class="f2">+OPLINKHAL = oplinkhal_$(OPLINKHAL_VERSION)_$(CONFIGURED_ARCH).deb</span>
<span class="f2">+$(OPLINKHAL)_SRC_PATH = $(PLATFORM_PATH)/hal</span>
<span class="f2">+$(OPLINKHAL)_DEPENDS += $(OPLINKUTIL) $(OPLINKUTIL_DEV)</span>
<span class="f2">+$(OPLINKHAL)_RDEPENDS += $(OPLINKUTIL)</span>
<span class="f2">+SONIC_MAKE_DEBS += $(OPLINKHAL)</span>
<span class="f2">+</span>
<span class="f2">+OPLINKHAL_DEV = oplinkhal-dev_$(OPLINKHAL_VERSION)_$(CONFIGURED_ARCH).deb</span>
<span class="f2">+$(eval $(call add_derived_package,$(OPLINKHAL),$(OPLINKHAL_DEV)))</span>
<span class="f2">+</span>
<span class="f2">+export OPLINKHAL OPLINKHAL_DEV</span>
<span class="bold">diff --git a/platform/molex/oplinkutil.dep b/platform/molex/oplinkutil.dep</span>
<span class="bold">new file mode 100644</span>
<span class="bold">index 000000000..8cba48a65</span>
<span class="bold">--- /dev/null</span>
<span class="bold">+++ b/platform/molex/oplinkutil.dep</span>
<span class="f6">@@ -0,0 +1,11 @@</span>
<span class="f2">+</span>
<span class="f2">+SPATH       := $($(OPLINKUTIL)_SRC_PATH)</span>
<span class="f2">+DEP_FILES   := $(SONIC_COMMON_FILES_LIST)</span>
<span class="f2">+DEP_FILES	+= $(PLATFORM_PATH)/oplinkutil.mk $(PLATFORM_PATH)/oplinkutil.dep</span>
<span class="f2">+DEP_FILES   += $(SONIC_COMMON_BASE_FILES_LIST)</span>
<span class="f2">+DEP_FILES   += $(shell git ls-files $(SPATH))</span>
<span class="f2">+</span>
<span class="f2">+$(OPLINKUTIL)_CACHE_MODE  := GIT_CONTENT_SHA</span>
<span class="f2">+$(OPLINKUTIL)_DEP_FLAGS   := $(SONIC_COMMON_FLAGS_LIST)</span>
<span class="f2">+$(OPLINKUTIL)_DEP_FILES   := $(DEP_FILES)</span>
<span class="f2">+</span>
<span class="bold">diff --git a/platform/molex/oplinkutil.mk b/platform/molex/oplinkutil.mk</span>
<span class="bold">new file mode 100644</span>
<span class="bold">index 000000000..ea77b2a3d</span>
<span class="bold">--- /dev/null</span>
<span class="bold">+++ b/platform/molex/oplinkutil.mk</span>
<span class="f6">@@ -0,0 +1,12 @@</span>
<span class="f2">+# util-lib of oplink</span>
<span class="f2">+</span>
<span class="f2">+OPLINKUTIL_VERSION = 1.0.0</span>
<span class="f2">+</span>
<span class="f2">+OPLINKUTIL = oplinkutil_$(OPLINKUTIL_VERSION)_$(CONFIGURED_ARCH).deb</span>
<span class="f2">+$(OPLINKUTIL)_SRC_PATH = $(PLATFORM_PATH)/util-lib</span>
<span class="f2">+SONIC_MAKE_DEBS += $(OPLINKUTIL)</span>
<span class="f2">+</span>
<span class="f2">+OPLINKUTIL_DEV = oplinkutil-dev_$(OPLINKUTIL_VERSION)_$(CONFIGURED_ARCH).deb</span>
<span class="f2">+$(eval $(call add_derived_package,$(OPLINKUTIL),$(OPLINKUTIL_DEV)))</span>
<span class="f2">+</span>
<span class="f2">+export OPLINKUTIL OPLINKUTIL_DEV</span>
<span class="bold">diff --git a/platform/molex/platform-modules-ot-kvm.dep b/platform/molex/platform-modules-ot-kvm.dep</span>
<span class="bold">new file mode 100644</span>
<span class="bold">index 000000000..7d12d458f</span>
<span class="bold">--- /dev/null</span>
<span class="bold">+++ b/platform/molex/platform-modules-ot-kvm.dep</span>
<span class="f6">@@ -0,0 +1,9 @@</span>
<span class="f2">+MPATH       := $($(OTKVM_OLSV_PLATFORM_MODULE)_SRC_PATH)</span>
<span class="f2">+DEP_FILES   := $(SONIC_COMMON_FILES_LIST) platform/molex/platform-modules-ot-kvm.mk platform/molex/platform-modules-ot-kvm.dep</span><span class="b1">   </span>
<span class="f2">+DEP_FILES   += $(SONIC_COMMON_BASE_FILES_LIST)</span>
<span class="f2">+DEP_FILES   += $(shell git ls-files $(MPATH))</span>
<span class="f2">+</span>
<span class="f2">+$(OTKVM_OLSV_PLATFORM_MODULE)_CACHE_MODE  := GIT_CONTENT_SHA</span><span class="b1"> </span>
<span class="f2">+$(OTKVM_OLSV_PLATFORM_MODULE)_DEP_FLAGS   := $(SONIC_COMMON_FLAGS_LIST)</span>
<span class="f2">+$(OTKVM_OLSV_PLATFORM_MODULE)_DEP_FILES   := $(DEP_FILES)</span>
<span class="f2">+</span>
<span class="bold">diff --git a/platform/molex/platform-modules-ot-kvm.mk b/platform/molex/platform-modules-ot-kvm.mk</span>
<span class="bold">new file mode 100644</span>
<span class="bold">index 000000000..51b548ed4</span>
<span class="bold">--- /dev/null</span>
<span class="bold">+++ b/platform/molex/platform-modules-ot-kvm.mk</span>
<span class="f6">@@ -0,0 +1,10 @@</span>
<span class="f2">+# OT-KVM Platform modules</span>
<span class="f2">+</span>
<span class="f2">+OTKVM_OLSV_PLATFORM_MODULE_VERSION = 1.1</span>
<span class="f2">+export OTKVM_OLSV_PLATFORM_MODULE_VERSION</span>
<span class="f2">+</span>
<span class="f2">+OTKVM_OLSV_PLATFORM_MODULE = sonic-platform-ot-kvm-ols-v_$(OTKVM_OLSV_PLATFORM_MODULE_VERSION)_amd64.deb</span>
<span class="f2">+$(OTKVM_OLSV_PLATFORM_MODULE)_SRC_PATH = $(PLATFORM_PATH)/sonic-platform-modules-ot-kvm</span>
<span class="f2">+$(OTKVM_OLSV_PLATFORM_MODULE)_DEPENDS += $(LINUX_HEADERS) $(LINUX_HEADERS_COMMON)</span>
<span class="f2">+$(OTKVM_OLSV_PLATFORM_MODULE)_PLATFORM = x86_64-kvm_x86_64-r0</span>
<span class="f2">+SONIC_DPKG_DEBS += $(OTKVM_OLSV_PLATFORM_MODULE)</span>
<span class="bold">diff --git a/platform/molex/platform.conf b/platform/molex/platform.conf</span>
<span class="bold">new file mode 100644</span>
<span class="bold">index 000000000..e69de29bb</span>
<span class="bold">diff --git a/platform/molex/raw-image.dep b/platform/molex/raw-image.dep</span>
<span class="bold">new file mode 100644</span>
<span class="bold">index 000000000..500ba2a70</span>
<span class="bold">--- /dev/null</span>
<span class="bold">+++ b/platform/molex/raw-image.dep</span>
<span class="f6">@@ -0,0 +1,2 @@</span>
<span class="f2">+#DPKG FRK</span>
<span class="f2">+$(SONIC_RAW_IMAGE)_CACHE_MODE  := none</span>
<span class="bold">diff --git a/platform/molex/raw-image.mk b/platform/molex/raw-image.mk</span>
<span class="bold">new file mode 100644</span>
<span class="bold">index 000000000..c5a17fedb</span>
<span class="bold">--- /dev/null</span>
<span class="bold">+++ b/platform/molex/raw-image.mk</span>
<span class="f6">@@ -0,0 +1,9 @@</span>
<span class="f2">+# sonic vs raw image installer</span>
<span class="f2">+</span>
<span class="f2">+SONIC_RAW_IMAGE = sonic-vs.raw</span>
<span class="f2">+$(SONIC_RAW_IMAGE)_MACHINE = vs</span>
<span class="f2">+$(SONIC_RAW_IMAGE)_IMAGE_TYPE = raw</span>
<span class="f2">+$(SONIC_RAW_IMAGE)_INSTALLS += $(SYSTEMD_SONIC_GENERATOR)</span>
<span class="f2">+$(SONIC_RAW_IMAGE)_LAZY_INSTALLS += $($(SONIC_KVM_IMAGE)_LAZY_INSTALLS)</span>
<span class="f2">+$(SONIC_RAW_IMAGE)_DOCKERS += $(SONIC_INSTALL_DOCKER_IMAGES)</span>
<span class="f2">+SONIC_INSTALLERS += $(SONIC_RAW_IMAGE)</span>
<span class="bold">diff --git a/platform/molex/rules.dep b/platform/molex/rules.dep</span>
<span class="bold">new file mode 100644</span>
<span class="bold">index 000000000..ce1100560</span>
<span class="bold">--- /dev/null</span>
<span class="bold">+++ b/platform/molex/rules.dep</span>
<span class="f6">@@ -0,0 +1,10 @@</span>
<span class="f2">+include $(PLATFORM_PATH)/oplinkutil.dep</span>
<span class="f2">+include $(PLATFORM_PATH)/oplinkhal.dep</span>
<span class="f2">+include $(PLATFORM_PATH)/sonic-fairedis.dep</span>
<span class="f2">+include $(PLATFORM_PATH)/docker-olssyncd-molex.dep</span>
<span class="f2">+include $(PLATFORM_PATH)/platform-modules-ot-kvm.dep</span>
<span class="f2">+include $(PLATFORM_PATH)/sonic-version.dep</span>
<span class="f2">+include $(PLATFORM_PATH)/one-image.dep</span>
<span class="f2">+include $(PLATFORM_PATH)/onie.dep</span>
<span class="f2">+include $(PLATFORM_PATH)/kvm-image.dep</span>
<span class="f2">+</span>
<span class="bold">diff --git a/platform/molex/rules.mk b/platform/molex/rules.mk</span>
<span class="bold">new file mode 100644</span>
<span class="bold">index 000000000..23f295b29</span>
<span class="bold">--- /dev/null</span>
<span class="bold">+++ b/platform/molex/rules.mk</span>
<span class="f6">@@ -0,0 +1,12 @@</span>
<span class="f2">+include $(PLATFORM_PATH)/oplinkutil.mk</span>
<span class="f2">+include $(PLATFORM_PATH)/oplinkhal.mk</span>
<span class="f2">+include $(PLATFORM_PATH)/sonic-fairedis.mk</span>
<span class="f2">+include $(PLATFORM_PATH)/docker-olssyncd-molex.mk</span>
<span class="f2">+include $(PLATFORM_PATH)/platform-modules-ot-kvm.mk</span>
<span class="f2">+include $(PLATFORM_PATH)/sonic-version.mk</span>
<span class="f2">+include $(PLATFORM_PATH)/one-image.mk</span>
<span class="f2">+include $(PLATFORM_PATH)/onie.mk</span>
<span class="f2">+include $(PLATFORM_PATH)/kvm-image.mk</span>
<span class="f2">+include $(PLATFORM_PATH)/raw-image.mk</span>
<span class="f2">+</span>
<span class="f2">+SONIC_ALL += $(SONIC_ONE_IMAGE) $(SONIC_KVM_IMAGE) $(SONIC_RAW_IMAGE)</span>
<span class="bold">diff --git a/platform/molex/sonic-fairedis.dep b/platform/molex/sonic-fairedis.dep</span>
<span class="bold">new file mode 100644</span>
<span class="bold">index 000000000..041f24aad</span>
<span class="bold">--- /dev/null</span>
<span class="bold">+++ b/platform/molex/sonic-fairedis.dep</span>
<span class="f6">@@ -0,0 +1,10 @@</span>
<span class="f2">+</span>
<span class="f2">+SPATH       := $($(OPLINKSYNCD)_SRC_PATH)</span>
<span class="f2">+DEP_FILES   := $(SONIC_COMMON_FILES_LIST)</span>
<span class="f2">+DEP_FILES	+= $(PLATFORM_PATH)/oplinksyncd.mk $(PLATFORM_PATH)/oplinksyncd.dep</span>
<span class="f2">+DEP_FILES   += $(SONIC_COMMON_BASE_FILES_LIST)</span>
<span class="f2">+DEP_FILES   += $(shell git ls-files $(SPATH))</span>
<span class="f2">+</span>
<span class="f2">+$(OPLINKSYNCD)_CACHE_MODE  := GIT_CONTENT_SHA</span>
<span class="f2">+$(OPLINKSYNCD)_DEP_FLAGS   := $(SONIC_COMMON_FLAGS_LIST)</span>
<span class="f2">+$(OPLINKSYNCD)_DEP_FILES   := $(DEP_FILES)</span>
<span class="bold">diff --git a/platform/molex/sonic-fairedis.mk b/platform/molex/sonic-fairedis.mk</span>
<span class="bold">new file mode 100644</span>
<span class="bold">index 000000000..df7719e2d</span>
<span class="bold">--- /dev/null</span>
<span class="bold">+++ b/platform/molex/sonic-fairedis.mk</span>
<span class="f6">@@ -0,0 +1,11 @@</span>
<span class="f2">+# syncd of molex</span>
<span class="f2">+</span>
<span class="f2">+OPLINKSYNCD_VERSION = 1.0.0</span>
<span class="f2">+</span>
<span class="f2">+OPLINKSYNCD = oplinksyncd_$(OPLINKSYNCD_VERSION)_$(CONFIGURED_ARCH).deb</span>
<span class="f2">+$(OPLINKSYNCD)_SRC_PATH = $(PLATFORM_PATH)/sonic-fairedis</span>
<span class="f2">+$(OPLINKSYNCD)_DEPENDS += $(LIBSWSSCOMMON_DEV) $(OPLINKHAL_DEV) $(OPLINKUTIL)</span>
<span class="f2">+$(OPLINKSYNCD)_RDEPENDS += $(LIBSWSSCOMMON) $(OPLINKHAL) $(OPLINKUTIL)</span>
<span class="f2">+SONIC_MAKE_DEBS += $(OPLINKSYNCD)</span>
<span class="f2">+</span>
<span class="f2">+export OPLINKSYNCD</span>
<span class="bold">diff --git a/platform/molex/sonic-gns3a.sh b/platform/molex/sonic-gns3a.sh</span>
<span class="bold">new file mode 100644</span>
<span class="bold">index 000000000..41e39cd86</span>
<span class="bold">--- /dev/null</span>
<span class="bold">+++ b/platform/molex/sonic-gns3a.sh</span>
<span class="f6">@@ -0,0 +1,82 @@</span>
<span class="f2">+#!/bin/bash</span>
<span class="f2">+</span>
<span class="f2">+# This script creates a .gns3a SONiC appliance file</span>
<span class="f2">+IMGFILE=&quot;sonic-vs.image&quot;</span>
<span class="f2">+RELEASE=&quot;latest&quot;</span>
<span class="f2">+</span>
<span class="f2">+usage() {</span>
<span class="f2">+    echo &quot;`basename $0` [ -r &lt;ReleaseNumber&gt; ] -b &lt;SONiC VS image: sonic-vs.image&gt;&quot;</span>
<span class="f2">+    echo &quot;e.g.: `basename $0` -r 1.1 -b &lt;store_path&gt;/sonic-vs.image&quot;</span>
<span class="f2">+    exit 0</span>
<span class="f2">+}</span>
<span class="f2">+</span>
<span class="f2">+while getopts &quot;r:b:h&quot; arg; do</span>
<span class="f2">+  case $arg in</span>
<span class="f2">+    h)</span>
<span class="f2">+</span>	<span class="f2">usage</span>
<span class="f2">+</span>	<span class="f2">;;</span>
<span class="f2">+    r)</span>
<span class="f2">+</span>	<span class="f2">RELEASE=$OPTARG</span>
<span class="f2">+</span>	<span class="f2">;;</span>
<span class="f2">+    b)</span>
<span class="f2">+</span>	<span class="f2">IMGFILE=$OPTARG</span>
<span class="f2">+</span>	<span class="f2">;;</span>
<span class="f2">+  esac</span>
<span class="f2">+done</span>
<span class="f2">+</span>
<span class="f2">+if [ ! -e ${IMGFILE} ]; then</span>
<span class="f2">+    echo &quot;ERROR: ${IMGFILE} not found&quot;</span>
<span class="f2">+    exit 2</span>
<span class="f2">+fi</span>
<span class="f2">+</span>
<span class="f2">+</span>
<span class="f2">+MD5SUMIMGFILE=`md5sum  ${IMGFILE} | cut -f 1 -d &quot; &quot;`</span>
<span class="f2">+LENIMGFILE=`stat -c %s ${IMGFILE}`</span>
<span class="f2">+GNS3APPNAME=&quot;SONiC-${RELEASE}.gns3a&quot;</span>
<span class="f2">+NAMEIMGFILE=`basename $IMGFILE`</span>
<span class="f2">+</span>
<span class="f2">+echo &quot;</span>
<span class="f2">+{</span>
<span class="f2">+    \&quot;name\&quot;: \&quot;SONiC\&quot;,</span>
<span class="f2">+    \&quot;category\&quot;: \&quot;router\&quot;,</span>
<span class="f2">+    \&quot;description\&quot;: \&quot;SONiC Virtual Switch/Router\&quot;,</span>
<span class="f2">+    \&quot;vendor_name\&quot;: \&quot;SONiC\&quot;,</span>
<span class="f2">+    \&quot;vendor_url\&quot;: \&quot;https://azure.github.io/SONiC/\&quot;,</span>
<span class="f2">+    \&quot;product_name\&quot;: \&quot;SONiC\&quot;,</span>
<span class="f2">+    \&quot;product_url\&quot;: \&quot;https://azure.github.io/SONiC/\&quot;,</span>
<span class="f2">+    \&quot;registry_version\&quot;: 3,</span>
<span class="f2">+    \&quot;status\&quot;: \&quot;experimental\&quot;,</span>
<span class="f2">+    \&quot;maintainer\&quot;: \&quot;SONiC\&quot;,</span>
<span class="f2">+    \&quot;maintainer_email\&quot;: \&quot;sonicproject@googlegroups.com\&quot;,</span>
<span class="f2">+    \&quot;usage\&quot;: \&quot;Supports SONiC release: ${RELEASE}\&quot;,</span>
<span class="f2">+    \&quot;first_port_name\&quot;: \&quot;eth0\&quot;,</span>
<span class="f2">+    \&quot;qemu\&quot;: {</span>
<span class="f2">+        \&quot;adapter_type\&quot;: \&quot;e1000\&quot;,</span>
<span class="f2">+        \&quot;adapters\&quot;: 10,</span>
<span class="f2">+        \&quot;ram\&quot;: 2048,</span>
<span class="f2">+        \&quot;hda_disk_interface\&quot;: \&quot;virtio\&quot;,</span>
<span class="f2">+        \&quot;arch\&quot;: \&quot;x86_64\&quot;,</span>
<span class="f2">+        \&quot;console_type\&quot;: \&quot;telnet\&quot;,</span>
<span class="f2">+        \&quot;boot_priority\&quot;: \&quot;d\&quot;,</span>
<span class="f2">+        \&quot;kvm\&quot;: \&quot;require\&quot;</span>
<span class="f2">+    },</span>
<span class="f2">+    \&quot;images\&quot;: [</span>
<span class="f2">+        {</span>
<span class="f2">+            \&quot;filename\&quot;: \&quot;${NAMEIMGFILE}\&quot;,</span>
<span class="f2">+            \&quot;version\&quot;: \&quot;${RELEASE}\&quot;,</span>
<span class="f2">+            \&quot;md5sum\&quot;: \&quot;${MD5SUMIMGFILE}\&quot;,</span>
<span class="f2">+            \&quot;filesize\&quot;: ${LENIMGFILE}</span>
<span class="f2">+        }</span>
<span class="f2">+    ],</span>
<span class="f2">+    \&quot;versions\&quot;: [</span>
<span class="f2">+        {</span>
<span class="f2">+            \&quot;name\&quot;: \&quot;${RELEASE}\&quot;,</span>
<span class="f2">+            \&quot;images\&quot;: {</span>
<span class="f2">+                \&quot;hda_disk_image\&quot;: \&quot;${NAMEIMGFILE}\&quot;</span>
<span class="f2">+            }</span>
<span class="f2">+        }</span>
<span class="f2">+    ]</span>
<span class="f2">+}</span>
<span class="f2">+</span>
<span class="f2">+&quot; &gt; ${GNS3APPNAME}</span>
<span class="f2">+</span>
<span class="bold">diff --git a/platform/molex/sonic-platform-modules-ot-kvm/LICENSE b/platform/molex/sonic-platform-modules-ot-kvm/LICENSE</span>
<span class="bold">new file mode 100644</span>
<span class="bold">index 000000000..d159169d1</span>
<span class="bold">--- /dev/null</span>
<span class="bold">+++ b/platform/molex/sonic-platform-modules-ot-kvm/LICENSE</span>
<span class="f6">@@ -0,0 +1,339 @@</span>
<span class="f2">+                    GNU GENERAL PUBLIC LICENSE</span>
<span class="f2">+                       Version 2, June 1991</span>
<span class="f2">+</span>
<span class="f2">+ Copyright (C) 1989, 1991 Free Software Foundation, Inc.,</span>
<span class="f2">+ 51 Franklin Street, Fifth Floor, Boston, MA 02110-1301 USA</span>
<span class="f2">+ Everyone is permitted to copy and distribute verbatim copies</span>
<span class="f2">+ of this license document, but changing it is not allowed.</span>
<span class="f2">+</span>
<span class="f2">+                            Preamble</span>
<span class="f2">+</span>
<span class="f2">+  The licenses for most software are designed to take away your</span>
<span class="f2">+freedom to share and change it.  By contrast, the GNU General Public</span>
<span class="f2">+License is intended to guarantee your freedom to share and change free</span>
<span class="f2">+software--to make sure the software is free for all its users.  This</span>
<span class="f2">+General Public License applies to most of the Free Software</span>
<span class="f2">+Foundation's software and to any other program whose authors commit to</span>
<span class="f2">+using it.  (Some other Free Software Foundation software is covered by</span>
<span class="f2">+the GNU Lesser General Public License instead.)  You can apply it to</span>
<span class="f2">+your programs, too.</span>
<span class="f2">+</span>
<span class="f2">+  When we speak of free software, we are referring to freedom, not</span>
<span class="f2">+price.  Our General Public Licenses are designed to make sure that you</span>
<span class="f2">+have the freedom to distribute copies of free software (and charge for</span>
<span class="f2">+this service if you wish), that you receive source code or can get it</span>
<span class="f2">+if you want it, that you can change the software or use pieces of it</span>
<span class="f2">+in new free programs; and that you know you can do these things.</span>
<span class="f2">+</span>
<span class="f2">+  To protect your rights, we need to make restrictions that forbid</span>
<span class="f2">+anyone to deny you these rights or to ask you to surrender the rights.</span>
<span class="f2">+These restrictions translate to certain responsibilities for you if you</span>
<span class="f2">+distribute copies of the software, or if you modify it.</span>
<span class="f2">+</span>
<span class="f2">+  For example, if you distribute copies of such a program, whether</span>
<span class="f2">+gratis or for a fee, you must give the recipients all the rights that</span>
<span class="f2">+you have.  You must make sure that they, too, receive or can get the</span>
<span class="f2">+source code.  And you must show them these terms so they know their</span>
<span class="f2">+rights.</span>
<span class="f2">+</span>
<span class="f2">+  We protect your rights with two steps: (1) copyright the software, and</span>
<span class="f2">+(2) offer you this license which gives you legal permission to copy,</span>
<span class="f2">+distribute and/or modify the software.</span>
<span class="f2">+</span>
<span class="f2">+  Also, for each author's protection and ours, we want to make certain</span>
<span class="f2">+that everyone understands that there is no warranty for this free</span>
<span class="f2">+software.  If the software is modified by someone else and passed on, we</span>
<span class="f2">+want its recipients to know that what they have is not the original, so</span>
<span class="f2">+that any problems introduced by others will not reflect on the original</span>
<span class="f2">+authors' reputations.</span>
<span class="f2">+</span>
<span class="f2">+  Finally, any free program is threatened constantly by software</span>
<span class="f2">+patents.  We wish to avoid the danger that redistributors of a free</span>
<span class="f2">+program will individually obtain patent licenses, in effect making the</span>
<span class="f2">+program proprietary.  To prevent this, we have made it clear that any</span>
<span class="f2">+patent must be licensed for everyone's free use or not licensed at all.</span>
<span class="f2">+</span>
<span class="f2">+  The precise terms and conditions for copying, distribution and</span>
<span class="f2">+modification follow.</span>
<span class="f2">+</span>
<span class="f2">+                    GNU GENERAL PUBLIC LICENSE</span>
<span class="f2">+   TERMS AND CONDITIONS FOR COPYING, DISTRIBUTION AND MODIFICATION</span>
<span class="f2">+</span>
<span class="f2">+  0. This License applies to any program or other work which contains</span>
<span class="f2">+a notice placed by the copyright holder saying it may be distributed</span>
<span class="f2">+under the terms of this General Public License.  The &quot;Program&quot;, below,</span>
<span class="f2">+refers to any such program or work, and a &quot;work based on the Program&quot;</span>
<span class="f2">+means either the Program or any derivative work under copyright law:</span>
<span class="f2">+that is to say, a work containing the Program or a portion of it,</span>
<span class="f2">+either verbatim or with modifications and/or translated into another</span>
<span class="f2">+language.  (Hereinafter, translation is included without limitation in</span>
<span class="f2">+the term &quot;modification&quot;.)  Each licensee is addressed as &quot;you&quot;.</span>
<span class="f2">+</span>
<span class="f2">+Activities other than copying, distribution and modification are not</span>
<span class="f2">+covered by this License; they are outside its scope.  The act of</span>
<span class="f2">+running the Program is not restricted, and the output from the Program</span>
<span class="f2">+is covered only if its contents constitute a work based on the</span>
<span class="f2">+Program (independent of having been made by running the Program).</span>
<span class="f2">+Whether that is true depends on what the Program does.</span>
<span class="f2">+</span>
<span class="f2">+  1. You may copy and distribute verbatim copies of the Program's</span>
<span class="f2">+source code as you receive it, in any medium, provided that you</span>
<span class="f2">+conspicuously and appropriately publish on each copy an appropriate</span>
<span class="f2">+copyright notice and disclaimer of warranty; keep intact all the</span>
<span class="f2">+notices that refer to this License and to the absence of any warranty;</span>
<span class="f2">+and give any other recipients of the Program a copy of this License</span>
<span class="f2">+along with the Program.</span>
<span class="f2">+</span>
<span class="f2">+You may charge a fee for the physical act of transferring a copy, and</span>
<span class="f2">+you may at your option offer warranty protection in exchange for a fee.</span>
<span class="f2">+</span>
<span class="f2">+  2. You may modify your copy or copies of the Program or any portion</span>
<span class="f2">+of it, thus forming a work based on the Program, and copy and</span>
<span class="f2">+distribute such modifications or work under the terms of Section 1</span>
<span class="f2">+above, provided that you also meet all of these conditions:</span>
<span class="f2">+</span>
<span class="f2">+    a) You must cause the modified files to carry prominent notices</span>
<span class="f2">+    stating that you changed the files and the date of any change.</span>
<span class="f2">+</span>
<span class="f2">+    b) You must cause any work that you distribute or publish, that in</span>
<span class="f2">+    whole or in part contains or is derived from the Program or any</span>
<span class="f2">+    part thereof, to be licensed as a whole at no charge to all third</span>
<span class="f2">+    parties under the terms of this License.</span>
<span class="f2">+</span>
<span class="f2">+    c) If the modified program normally reads commands interactively</span>
<span class="f2">+    when run, you must cause it, when started running for such</span>
<span class="f2">+    interactive use in the most ordinary way, to print or display an</span>
<span class="f2">+    announcement including an appropriate copyright notice and a</span>
<span class="f2">+    notice that there is no warranty (or else, saying that you provide</span>
<span class="f2">+    a warranty) and that users may redistribute the program under</span>
<span class="f2">+    these conditions, and telling the user how to view a copy of this</span>
<span class="f2">+    License.  (Exception: if the Program itself is interactive but</span>
<span class="f2">+    does not normally print such an announcement, your work based on</span>
<span class="f2">+    the Program is not required to print an announcement.)</span>
<span class="f2">+</span>
<span class="f2">+These requirements apply to the modified work as a whole.  If</span>
<span class="f2">+identifiable sections of that work are not derived from the Program,</span>
<span class="f2">+and can be reasonably considered independent and separate works in</span>
<span class="f2">+themselves, then this License, and its terms, do not apply to those</span>
<span class="f2">+sections when you distribute them as separate works.  But when you</span>
<span class="f2">+distribute the same sections as part of a whole which is a work based</span>
<span class="f2">+on the Program, the distribution of the whole must be on the terms of</span>
<span class="f2">+this License, whose permissions for other licensees extend to the</span>
<span class="f2">+entire whole, and thus to each and every part regardless of who wrote it.</span>
<span class="f2">+</span>
<span class="f2">+Thus, it is not the intent of this section to claim rights or contest</span>
<span class="f2">+your rights to work written entirely by you; rather, the intent is to</span>
<span class="f2">+exercise the right to control the distribution of derivative or</span>
<span class="f2">+collective works based on the Program.</span>
<span class="f2">+</span>
<span class="f2">+In addition, mere aggregation of another work not based on the Program</span>
<span class="f2">+with the Program (or with a work based on the Program) on a volume of</span>
<span class="f2">+a storage or distribution medium does not bring the other work under</span>
<span class="f2">+the scope of this License.</span>
<span class="f2">+</span>
<span class="f2">+  3. You may copy and distribute the Program (or a work based on it,</span>
<span class="f2">+under Section 2) in object code or executable form under the terms of</span>
<span class="f2">+Sections 1 and 2 above provided that you also do one of the following:</span>
<span class="f2">+</span>
<span class="f2">+    a) Accompany it with the complete corresponding machine-readable</span>
<span class="f2">+    source code, which must be distributed under the terms of Sections</span>
<span class="f2">+    1 and 2 above on a medium customarily used for software interchange; or,</span>
<span class="f2">+</span>
<span class="f2">+    b) Accompany it with a written offer, valid for at least three</span>
<span class="f2">+    years, to give any third party, for a charge no more than your</span>
<span class="f2">+    cost of physically performing source distribution, a complete</span>
<span class="f2">+    machine-readable copy of the corresponding source code, to be</span>
<span class="f2">+    distributed under the terms of Sections 1 and 2 above on a medium</span>
<span class="f2">+    customarily used for software interchange; or,</span>
<span class="f2">+</span>
<span class="f2">+    c) Accompany it with the information you received as to the offer</span>
<span class="f2">+    to distribute corresponding source code.  (This alternative is</span>
<span class="f2">+    allowed only for noncommercial distribution and only if you</span>
<span class="f2">+    received the program in object code or executable form with such</span>
<span class="f2">+    an offer, in accord with Subsection b above.)</span>
<span class="f2">+</span>
<span class="f2">+The source code for a work means the preferred form of the work for</span>
<span class="f2">+making modifications to it.  For an executable work, complete source</span>
<span class="f2">+code means all the source code for all modules it contains, plus any</span>
<span class="f2">+associated interface definition files, plus the scripts used to</span>
<span class="f2">+control compilation and installation of the executable.  However, as a</span>
<span class="f2">+special exception, the source code distributed need not include</span>
<span class="f2">+anything that is normally distributed (in either source or binary</span>
<span class="f2">+form) with the major components (compiler, kernel, and so on) of the</span>
<span class="f2">+operating system on which the executable runs, unless that component</span>
<span class="f2">+itself accompanies the executable.</span>
<span class="f2">+</span>
<span class="f2">+If distribution of executable or object code is made by offering</span>
<span class="f2">+access to copy from a designated place, then offering equivalent</span>
<span class="f2">+access to copy the source code from the same place counts as</span>
<span class="f2">+distribution of the source code, even though third parties are not</span>
<span class="f2">+compelled to copy the source along with the object code.</span>
<span class="f2">+</span>
<span class="f2">+  4. You may not copy, modify, sublicense, or distribute the Program</span>
<span class="f2">+except as expressly provided under this License.  Any attempt</span>
<span class="f2">+otherwise to copy, modify, sublicense or distribute the Program is</span>
<span class="f2">+void, and will automatically terminate your rights under this License.</span>
<span class="f2">+However, parties who have received copies, or rights, from you under</span>
<span class="f2">+this License will not have their licenses terminated so long as such</span>
<span class="f2">+parties remain in full compliance.</span>
<span class="f2">+</span>
<span class="f2">+  5. You are not required to accept this License, since you have not</span>
<span class="f2">+signed it.  However, nothing else grants you permission to modify or</span>
<span class="f2">+distribute the Program or its derivative works.  These actions are</span>
<span class="f2">+prohibited by law if you do not accept this License.  Therefore, by</span>
<span class="f2">+modifying or distributing the Program (or any work based on the</span>
<span class="f2">+Program), you indicate your acceptance of this License to do so, and</span>
<span class="f2">+all its terms and conditions for copying, distributing or modifying</span>
<span class="f2">+the Program or works based on it.</span>
<span class="f2">+</span>
<span class="f2">+  6. Each time you redistribute the Program (or any work based on the</span>
<span class="f2">+Program), the recipient automatically receives a license from the</span>
<span class="f2">+original licensor to copy, distribute or modify the Program subject to</span>
<span class="f2">+these terms and conditions.  You may not impose any further</span>
<span class="f2">+restrictions on the recipients' exercise of the rights granted herein.</span>
<span class="f2">+You are not responsible for enforcing compliance by third parties to</span>
<span class="f2">+this License.</span>
<span class="f2">+</span>
<span class="f2">+  7. If, as a consequence of a court judgment or allegation of patent</span>
<span class="f2">+infringement or for any other reason (not limited to patent issues),</span>
<span class="f2">+conditions are imposed on you (whether by court order, agreement or</span>
<span class="f2">+otherwise) that contradict the conditions of this License, they do not</span>
<span class="f2">+excuse you from the conditions of this License.  If you cannot</span>
<span class="f2">+distribute so as to satisfy simultaneously your obligations under this</span>
<span class="f2">+License and any other pertinent obligations, then as a consequence you</span>
<span class="f2">+may not distribute the Program at all.  For example, if a patent</span>
<span class="f2">+license would not permit royalty-free redistribution of the Program by</span>
<span class="f2">+all those who receive copies directly or indirectly through you, then</span>
<span class="f2">+the only way you could satisfy both it and this License would be to</span>
<span class="f2">+refrain entirely from distribution of the Program.</span>
<span class="f2">+</span>
<span class="f2">+If any portion of this section is held invalid or unenforceable under</span>
<span class="f2">+any particular circumstance, the balance of the section is intended to</span>
<span class="f2">+apply and the section as a whole is intended to apply in other</span>
<span class="f2">+circumstances.</span>
<span class="f2">+</span>
<span class="f2">+It is not the purpose of this section to induce you to infringe any</span>
<span class="f2">+patents or other property right claims or to contest validity of any</span>
<span class="f2">+such claims; this section has the sole purpose of protecting the</span>
<span class="f2">+integrity of the free software distribution system, which is</span>
<span class="f2">+implemented by public license practices.  Many people have made</span>
<span class="f2">+generous contributions to the wide range of software distributed</span>
<span class="f2">+through that system in reliance on consistent application of that</span>
<span class="f2">+system; it is up to the author/donor to decide if he or she is willing</span>
<span class="f2">+to distribute software through any other system and a licensee cannot</span>
<span class="f2">+impose that choice.</span>
<span class="f2">+</span>
<span class="f2">+This section is intended to make thoroughly clear what is believed to</span>
<span class="f2">+be a consequence of the rest of this License.</span>
<span class="f2">+</span>
<span class="f2">+  8. If the distribution and/or use of the Program is restricted in</span>
<span class="f2">+certain countries either by patents or by copyrighted interfaces, the</span>
<span class="f2">+original copyright holder who places the Program under this License</span>
<span class="f2">+may add an explicit geographical distribution limitation excluding</span>
<span class="f2">+those countries, so that distribution is permitted only in or among</span>
<span class="f2">+countries not thus excluded.  In such case, this License incorporates</span>
<span class="f2">+the limitation as if written in the body of this License.</span>
<span class="f2">+</span>
<span class="f2">+  9. The Free Software Foundation may publish revised and/or new versions</span>
<span class="f2">+of the General Public License from time to time.  Such new versions will</span>
<span class="f2">+be similar in spirit to the present version, but may differ in detail to</span>
<span class="f2">+address new problems or concerns.</span>
<span class="f2">+</span>
<span class="f2">+Each version is given a distinguishing version number.  If the Program</span>
<span class="f2">+specifies a version number of this License which applies to it and &quot;any</span>
<span class="f2">+later version&quot;, you have the option of following the terms and conditions</span>
<span class="f2">+either of that version or of any later version published by the Free</span>
<span class="f2">+Software Foundation.  If the Program does not specify a version number of</span>
<span class="f2">+this License, you may choose any version ever published by the Free Software</span>
<span class="f2">+Foundation.</span>
<span class="f2">+</span>
<span class="f2">+  10. If you wish to incorporate parts of the Program into other free</span>
<span class="f2">+programs whose distribution conditions are different, write to the author</span>
<span class="f2">+to ask for permission.  For software which is copyrighted by the Free</span>
<span class="f2">+Software Foundation, write to the Free Software Foundation; we sometimes</span>
<span class="f2">+make exceptions for this.  Our decision will be guided by the two goals</span>
<span class="f2">+of preserving the free status of all derivatives of our free software and</span>
<span class="f2">+of promoting the sharing and reuse of software generally.</span>
<span class="f2">+</span>
<span class="f2">+                            NO WARRANTY</span>
<span class="f2">+</span>
<span class="f2">+  11. BECAUSE THE PROGRAM IS LICENSED FREE OF CHARGE, THERE IS NO WARRANTY</span>
<span class="f2">+FOR THE PROGRAM, TO THE EXTENT PERMITTED BY APPLICABLE LAW.  EXCEPT WHEN</span>
<span class="f2">+OTHERWISE STATED IN WRITING THE COPYRIGHT HOLDERS AND/OR OTHER PARTIES</span>
<span class="f2">+PROVIDE THE PROGRAM &quot;AS IS&quot; WITHOUT WARRANTY OF ANY KIND, EITHER EXPRESSED</span>
<span class="f2">+OR IMPLIED, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES OF</span>
<span class="f2">+MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE.  THE ENTIRE RISK AS</span>
<span class="f2">+TO THE QUALITY AND PERFORMANCE OF THE PROGRAM IS WITH YOU.  SHOULD THE</span>
<span class="f2">+PROGRAM PROVE DEFECTIVE, YOU ASSUME THE COST OF ALL NECESSARY SERVICING,</span>
<span class="f2">+REPAIR OR CORRECTION.</span>
<span class="f2">+</span>
<span class="f2">+  12. IN NO EVENT UNLESS REQUIRED BY APPLICABLE LAW OR AGREED TO IN WRITING</span>
<span class="f2">+WILL ANY COPYRIGHT HOLDER, OR ANY OTHER PARTY WHO MAY MODIFY AND/OR</span>
<span class="f2">+REDISTRIBUTE THE PROGRAM AS PERMITTED ABOVE, BE LIABLE TO YOU FOR DAMAGES,</span>
<span class="f2">+INCLUDING ANY GENERAL, SPECIAL, INCIDENTAL OR CONSEQUENTIAL DAMAGES ARISING</span>
<span class="f2">+OUT OF THE USE OR INABILITY TO USE THE PROGRAM (INCLUDING BUT NOT LIMITED</span>
<span class="f2">+TO LOSS OF DATA OR DATA BEING RENDERED INACCURATE OR LOSSES SUSTAINED BY</span>
<span class="f2">+YOU OR THIRD PARTIES OR A FAILURE OF THE PROGRAM TO OPERATE WITH ANY OTHER</span>
<span class="f2">+PROGRAMS), EVEN IF SUCH HOLDER OR OTHER PARTY HAS BEEN ADVISED OF THE</span>
<span class="f2">+POSSIBILITY OF SUCH DAMAGES.</span>
<span class="f2">+</span>
<span class="f2">+                     END OF TERMS AND CONDITIONS</span>
<span class="f2">+</span>
<span class="f2">+            How to Apply These Terms to Your New Programs</span>
<span class="f2">+</span>
<span class="f2">+  If you develop a new program, and you want it to be of the greatest</span>
<span class="f2">+possible use to the public, the best way to achieve this is to make it</span>
<span class="f2">+free software which everyone can redistribute and change under these terms.</span>
<span class="f2">+</span>
<span class="f2">+  To do so, attach the following notices to the program.  It is safest</span>
<span class="f2">+to attach them to the start of each source file to most effectively</span>
<span class="f2">+convey the exclusion of warranty; and each file should have at least</span>
<span class="f2">+the &quot;copyright&quot; line and a pointer to where the full notice is found.</span>
<span class="f2">+</span>
<span class="f2">+    &lt;one line to give the program's name and a brief idea of what it does.&gt;</span>
<span class="f2">+    Copyright (C) &lt;year&gt;  &lt;name of author&gt;</span>
<span class="f2">+</span>
<span class="f2">+    This program is free software; you can redistribute it and/or modify</span>
<span class="f2">+    it under the terms of the GNU General Public License as published by</span>
<span class="f2">+    the Free Software Foundation; either version 2 of the License, or</span>
<span class="f2">+    (at your option) any later version.</span>
<span class="f2">+</span>
<span class="f2">+    This program is distributed in the hope that it will be useful,</span>
<span class="f2">+    but WITHOUT ANY WARRANTY; without even the implied warranty of</span>
<span class="f2">+    MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the</span>
<span class="f2">+    GNU General Public License for more details.</span>
<span class="f2">+</span>
<span class="f2">+    You should have received a copy of the GNU General Public License along</span>
<span class="f2">+    with this program; if not, write to the Free Software Foundation, Inc.,</span>
<span class="f2">+    51 Franklin Street, Fifth Floor, Boston, MA 02110-1301 USA.</span>
<span class="f2">+</span>
<span class="f2">+Also add information on how to contact you by electronic and paper mail.</span>
<span class="f2">+</span>
<span class="f2">+If the program is interactive, make it output a short notice like this</span>
<span class="f2">+when it starts in an interactive mode:</span>
<span class="f2">+</span>
<span class="f2">+    Gnomovision version 69, Copyright (C) year name of author</span>
<span class="f2">+    Gnomovision comes with ABSOLUTELY NO WARRANTY; for details type `show w'.</span>
<span class="f2">+    This is free software, and you are welcome to redistribute it</span>
<span class="f2">+    under certain conditions; type `show c' for details.</span>
<span class="f2">+</span>
<span class="f2">+The hypothetical commands `show w' and `show c' should show the appropriate</span>
<span class="f2">+parts of the General Public License.  Of course, the commands you use may</span>
<span class="f2">+be called something other than `show w' and `show c'; they could even be</span>
<span class="f2">+mouse-clicks or menu items--whatever suits your program.</span>
<span class="f2">+</span>
<span class="f2">+You should also get your employer (if you work as a programmer) or your</span>
<span class="f2">+school, if any, to sign a &quot;copyright disclaimer&quot; for the program, if</span>
<span class="f2">+necessary.  Here is a sample; alter the names:</span>
<span class="f2">+</span>
<span class="f2">+  Yoyodyne, Inc., hereby disclaims all copyright interest in the program</span>
<span class="f2">+  `Gnomovision' (which makes passes at compilers) written by James Hacker.</span>
<span class="f2">+</span>
<span class="f2">+  &lt;signature of Ty Coon&gt;, 1 April 1989</span>
<span class="f2">+  Ty Coon, President of Vice</span>
<span class="f2">+</span>
<span class="f2">+This General Public License does not permit incorporating your program into</span>
<span class="f2">+proprietary programs.  If your program is a subroutine library, you may</span>
<span class="f2">+consider it more useful to permit linking proprietary applications with the</span>
<span class="f2">+library.  If this is what you want to do, use the GNU Lesser General</span>
<span class="f2">+Public License instead of this License.</span>
<span class="bold">diff --git a/platform/molex/sonic-platform-modules-ot-kvm/README.md b/platform/molex/sonic-platform-modules-ot-kvm/README.md</span>
<span class="bold">new file mode 100644</span>
<span class="bold">index 000000000..448c8722f</span>
<span class="bold">--- /dev/null</span>
<span class="bold">+++ b/platform/molex/sonic-platform-modules-ot-kvm/README.md</span>
<span class="f6">@@ -0,0 +1,4 @@</span>
<span class="f2">+OT-KVM Platform Support for SONiC</span>
<span class="f2">+================================</span>
<span class="f2">+</span>
<span class="f2">+SONiC platform monitoring implementation for OT-KVM virtual hardware.</span>
<span class="bold">diff --git a/platform/molex/sonic-platform-modules-ot-kvm/debian/changelog b/platform/molex/sonic-platform-modules-ot-kvm/debian/changelog</span>
<span class="bold">new file mode 100644</span>
<span class="bold">index 000000000..1d1e837fc</span>
<span class="bold">--- /dev/null</span>
<span class="bold">+++ b/platform/molex/sonic-platform-modules-ot-kvm/debian/changelog</span>
<span class="f6">@@ -0,0 +1,4 @@</span>
<span class="f2">+sonic-ot-kvm-platform-modules (1.1) unstable; urgency=low</span>
<span class="f2">+  * Initial release: Support SONiC platform API for OT-KVM.</span>
<span class="f2">+</span>
<span class="f2">+ -- Molex &lt;lu.mao@molex.com&gt;  Fri, 10 Feb 2023 16:00:00 +0800</span>
<span class="bold">diff --git a/platform/molex/sonic-platform-modules-ot-kvm/debian/compat b/platform/molex/sonic-platform-modules-ot-kvm/debian/compat</span>
<span class="bold">new file mode 100644</span>
<span class="bold">index 000000000..f599e28b8</span>
<span class="bold">--- /dev/null</span>
<span class="bold">+++ b/platform/molex/sonic-platform-modules-ot-kvm/debian/compat</span>
<span class="f6">@@ -0,0 +1 @@</span>
<span class="f2">+10</span>
<span class="bold">diff --git a/platform/molex/sonic-platform-modules-ot-kvm/debian/control b/platform/molex/sonic-platform-modules-ot-kvm/debian/control</span>
<span class="bold">new file mode 100644</span>
<span class="bold">index 000000000..00d135c2e</span>
<span class="bold">--- /dev/null</span>
<span class="bold">+++ b/platform/molex/sonic-platform-modules-ot-kvm/debian/control</span>
<span class="f6">@@ -0,0 +1,10 @@</span>
<span class="f2">+Source: sonic-ot-kvm-platform-modules</span>
<span class="f2">+Section: main</span>
<span class="f2">+Priority: extra</span>
<span class="f2">+Maintainer: Molex &lt;lu.mao@molex.com&gt;</span>
<span class="f2">+Build-Depends: debhelper (&gt;= 9), bzip2</span>
<span class="f2">+Standards-Version: 3.9.3</span>
<span class="f2">+</span>
<span class="f2">+Package: sonic-platform-ot-kvm-ols-v</span>
<span class="f2">+Architecture: amd64</span>
<span class="f2">+Description: kernel modules for platform devices such as fan, led, sfp</span>
<span class="bold">diff --git a/platform/molex/sonic-platform-modules-ot-kvm/debian/rules b/platform/molex/sonic-platform-modules-ot-kvm/debian/rules</span>
<span class="bold">new file mode 100644</span>
<span class="bold">index 000000000..72e2c41db</span>
<span class="bold">--- /dev/null</span>
<span class="bold">+++ b/platform/molex/sonic-platform-modules-ot-kvm/debian/rules</span>
<span class="f6">@@ -0,0 +1,37 @@</span>
<span class="f2">+#!/usr/bin/make -f</span>
<span class="f2">+</span>
<span class="f2">+export INSTALL_MOD_DIR:=extra</span>
<span class="f2">+</span>
<span class="f2">+PACKAGE_PRE_NAME := sonic-platform-ot-kvm</span>
<span class="f2">+KVERSION   ?= $(shell uname -r)</span>
<span class="f2">+KERNEL_SRC :=  /lib/modules/$(KVERSION)</span>
<span class="f2">+MOD_SRC_DIR:= $(shell pwd)</span>
<span class="f2">+MODULE_DIRS:= ols-v</span>
<span class="f2">+</span>
<span class="f2">+%:</span>
<span class="f2">+</span>	<span class="f2">dh $@ --with python3</span>
<span class="f2">+</span>
<span class="f2">+override_dh_auto_build:</span>
<span class="f2">+</span>	<span class="f2">(for mod in $(MODULE_DIRS); do \</span>
<span class="f2">+</span>	<span class="f2">    cd $(MOD_SRC_DIR)/$${mod}; \</span>
<span class="f2">+</span>	<span class="f2">    if [ -f setup.py ]; then \</span>
<span class="f2">+</span>	<span class="f2">        python3 setup.py bdist_wheel -d $(MOD_SRC_DIR)/$${mod}; \</span>
<span class="f2">+</span>		<span class="f2">echo &quot;Finished making whl package for $$mod&quot;; \</span>
<span class="f2">+</span>	<span class="f2">    fi; \</span>
<span class="f2">+</span>	<span class="f2">    cd $(MOD_SRC_DIR); \</span>
<span class="f2">+</span>	<span class="f2">done)</span>
<span class="f2">+</span>
<span class="f2">+override_dh_auto_install:</span>
<span class="f2">+</span>	<span class="f2">(for mod in $(MODULE_DIRS); do \</span>
<span class="f2">+</span>	<span class="f2">    cd $(MOD_SRC_DIR)/$${mod}; \</span>
<span class="f2">+</span>	<span class="f2">    python3 setup.py install --root=$(MOD_SRC_DIR)/debian/$(PACKAGE_PRE_NAME)-$${mod} --install-layout=deb; \</span>
<span class="f2">+</span>	<span class="f2">    cd $(MOD_SRC_DIR); \</span>
<span class="f2">+</span>	<span class="f2">done)</span>
<span class="f2">+</span>
<span class="f2">+override_dh_usrlocal:</span>
<span class="f2">+</span>
<span class="f2">+override_dh_pysupport:</span>
<span class="f2">+</span>
<span class="f2">+override_dh_clean:</span>
<span class="f2">+</span>	<span class="f2">dh_clean</span>
<span class="f2">+</span>
<span class="bold">diff --git a/platform/molex/sonic-platform-modules-ot-kvm/debian/sonic-platform-ot-kvm-ols-v.install b/platform/molex/sonic-platform-modules-ot-kvm/debian/sonic-platform-ot-kvm-ols-v.install</span>
<span class="bold">new file mode 100644</span>
<span class="bold">index 000000000..dacd871d1</span>
<span class="bold">--- /dev/null</span>
<span class="bold">+++ b/platform/molex/sonic-platform-modules-ot-kvm/debian/sonic-platform-ot-kvm-ols-v.install</span>
<span class="f6">@@ -0,0 +1 @@</span>
<span class="f2">+ols-v/sonic_platform-1.0-py3-none-any.whl usr/share/sonic/device/x86_64-kvm_x86_64-r0</span>
\ No newline at end of file
<span class="bold">diff --git a/platform/molex/sonic-platform-modules-ot-kvm/ols-v/setup.py b/platform/molex/sonic-platform-modules-ot-kvm/ols-v/setup.py</span>
<span class="bold">new file mode 100644</span>
<span class="bold">index 000000000..f2f64001c</span>
<span class="bold">--- /dev/null</span>
<span class="bold">+++ b/platform/molex/sonic-platform-modules-ot-kvm/ols-v/setup.py</span>
<span class="f6">@@ -0,0 +1,29 @@</span>
<span class="f2">+from setuptools import setup</span>
<span class="f2">+</span>
<span class="f2">+setup(</span>
<span class="f2">+    name='sonic_platform',</span>
<span class="f2">+    version='1.0',</span>
<span class="f2">+    description='SONiC platform API implementation on OT-KVM Platforms',</span>
<span class="f2">+    license='Apache 2.0',</span>
<span class="f2">+    author='Molex',</span>
<span class="f2">+    author_email='lu.mao@molex.com',</span>
<span class="f2">+    url='https://github.com/Azure/sonic-buildimage',</span>
<span class="f2">+    maintainer='Molex',</span>
<span class="f2">+    maintainer_email='lu.mao@molex.com',</span>
<span class="f2">+    packages=['sonic_platform'],</span>
<span class="f2">+    classifiers=[</span>
<span class="f2">+        'Development Status :: 3 - Alpha',</span>
<span class="f2">+        'Environment :: Plugins',</span>
<span class="f2">+        'Intended Audience :: Developers',</span>
<span class="f2">+        'Intended Audience :: Information Technology',</span>
<span class="f2">+        'Intended Audience :: System Administrators',</span>
<span class="f2">+        'License :: OSI Approved :: Apache Software License',</span>
<span class="f2">+        'Natural Language :: English',</span>
<span class="f2">+        'Operating System :: POSIX :: Linux',</span>
<span class="f2">+        'Programming Language :: Python :: 2.7',</span>
<span class="f2">+        'Programming Language :: Python :: 3.7',</span>
<span class="f2">+        'Topic :: Utilities',</span>
<span class="f2">+    ],</span>
<span class="f2">+    keywords='sonic SONiC platform PLATFORM',</span>
<span class="f2">+)</span>
<span class="f2">+</span>
<span class="bold">diff --git a/platform/molex/sonic-platform-modules-ot-kvm/ols-v/sonic_platform/__init__.py b/platform/molex/sonic-platform-modules-ot-kvm/ols-v/sonic_platform/__init__.py</span>
<span class="bold">new file mode 100644</span>
<span class="bold">index 000000000..2764c0c33</span>
<span class="bold">--- /dev/null</span>
<span class="bold">+++ b/platform/molex/sonic-platform-modules-ot-kvm/ols-v/sonic_platform/__init__.py</span>
<span class="f6">@@ -0,0 +1,3 @@</span>
<span class="f2">+__all__ = [&quot;platform&quot;, &quot;chassis&quot;, &quot;module&quot;, &quot;fan&quot;, &quot;fan_drawer&quot;, &quot;psu&quot;, &quot;sfp&quot;, &quot;thermal&quot;]</span>
<span class="f2">+from sonic_platform import *</span>
<span class="f2">+</span>
<span class="bold">diff --git a/platform/molex/sonic-platform-modules-ot-kvm/ols-v/sonic_platform/chassis.py b/platform/molex/sonic-platform-modules-ot-kvm/ols-v/sonic_platform/chassis.py</span>
<span class="bold">new file mode 100644</span>
<span class="bold">index 000000000..12a9f2098</span>
<span class="bold">--- /dev/null</span>
<span class="bold">+++ b/platform/molex/sonic-platform-modules-ot-kvm/ols-v/sonic_platform/chassis.py</span>
<span class="f6">@@ -0,0 +1,332 @@</span>
<span class="f2">+#!/usr/bin/env python</span>
<span class="f2">+</span>
<span class="f2">+#############################################################################</span>
<span class="f2">+# OT-KVM</span>
<span class="f2">+#</span>
<span class="f2">+# Module contains an implementation of SONiC Platform Base API and</span>
<span class="f2">+# provides the platformi information</span>
<span class="f2">+#</span>
<span class="f2">+#############################################################################</span>
<span class="f2">+</span>
<span class="f2">+try:</span>
<span class="f2">+    import os</span>
<span class="f2">+    import re</span>
<span class="f2">+    import time</span>
<span class="f2">+    from sonic_platform_base.device_base import DeviceBase</span>
<span class="f2">+    from sonic_platform_base.chassis_base import ChassisBase</span>
<span class="f2">+    from sonic_platform.component import Component</span>
<span class="f2">+    from sonic_platform.fan_drawer import FanDrawer</span>
<span class="f2">+    from sonic_platform.module import Module</span>
<span class="f2">+    from sonic_platform.psu import Psu</span>
<span class="f2">+    from sonic_platform.thermal import Thermal</span>
<span class="f2">+    from sonic_platform.watchdog import Watchdog</span>
<span class="f2">+    from sonic_platform.sfp import Sfp</span>
<span class="f2">+except ImportError as e:</span>
<span class="f2">+    raise ImportError(str(e) + &quot;- required module not found&quot;)</span>
<span class="f2">+</span>
<span class="f2">+MAX_OLS_V_MODULE = 4</span>
<span class="f2">+MAX_OLS_V_FANTRAY = 4</span>
<span class="f2">+MAX_OLS_V_PSU = 2</span>
<span class="f2">+MAX_OLS_V_THERMAL = 9</span>
<span class="f2">+MAX_OLS_V_COMPONENT = 8</span>
<span class="f2">+</span>
<span class="f2">+</span>
<span class="f2">+class Chassis(ChassisBase):</span>
<span class="f2">+    &quot;&quot;&quot;</span>
<span class="f2">+    OT-KVM Platform-specific Chassis class</span>
<span class="f2">+    &quot;&quot;&quot;</span>
<span class="f2">+</span>
<span class="f2">+    def __init__(self):</span>
<span class="f2">+</span>
<span class="f2">+        ChassisBase.__init__(self)</span>
<span class="f2">+        # Initialize EEPROM</span>
<span class="f2">+        for i in range(MAX_OLS_V_MODULE):</span>
<span class="f2">+            module = Module(i)</span>
<span class="f2">+            self._module_list.append(module)</span>
<span class="f2">+            self._sfp_list.extend(module._sfp_list)</span>
<span class="f2">+</span>
<span class="f2">+        for i in range(MAX_OLS_V_FANTRAY):</span>
<span class="f2">+            fandrawer = FanDrawer(i)</span>
<span class="f2">+            self._fan_drawer_list.append(fandrawer)</span>
<span class="f2">+            self._fan_list.extend(fandrawer._fan_list)</span>
<span class="f2">+</span>
<span class="f2">+        for i in range(MAX_OLS_V_PSU):</span>
<span class="f2">+            psu = Psu(i)</span>
<span class="f2">+            self._psu_list.append(psu)</span>
<span class="f2">+</span>
<span class="f2">+        for i in range(MAX_OLS_V_THERMAL):</span>
<span class="f2">+            thermal = Thermal(i)</span>
<span class="f2">+            self._thermal_list.append(thermal)</span>
<span class="f2">+</span>
<span class="f2">+        for i in range(MAX_OLS_V_COMPONENT):</span>
<span class="f2">+            component = Component(i)</span>
<span class="f2">+            self._component_list.append(component)</span>
<span class="f2">+</span>
<span class="f2">+    def get_name(self):</span>
<span class="f2">+        &quot;&quot;&quot;</span>
<span class="f2">+        Retrieves the hardware product name for the chassis</span>
<span class="f2">+</span>
<span class="f2">+        Returns:</span>
<span class="f2">+            A string containing the hardware product name for this chassis.</span>
<span class="f2">+        &quot;&quot;&quot;</span>
<span class="f2">+        return 'OLS-V'</span>
<span class="f2">+</span>
<span class="f2">+    def get_presence(self):</span>
<span class="f2">+        &quot;&quot;&quot;</span>
<span class="f2">+        Retrieves the presence of the device</span>
<span class="f2">+</span>
<span class="f2">+        Returns:</span>
<span class="f2">+            bool: True if device is present, False if not</span>
<span class="f2">+        &quot;&quot;&quot;</span>
<span class="f2">+        return True</span>
<span class="f2">+</span>
<span class="f2">+    def get_model(self):</span>
<span class="f2">+        &quot;&quot;&quot;</span>
<span class="f2">+        Retrieves the model number (or part number) of the device</span>
<span class="f2">+</span>
<span class="f2">+        Returns:</span>
<span class="f2">+            string: Model/part number of device</span>
<span class="f2">+        &quot;&quot;&quot;</span>
<span class="f2">+        return 'OLS-V-PN'</span>
<span class="f2">+</span>
<span class="f2">+    def get_serial(self):</span>
<span class="f2">+        &quot;&quot;&quot;</span>
<span class="f2">+        Retrieves the serial number of the device</span>
<span class="f2">+</span>
<span class="f2">+        Returns:</span>
<span class="f2">+            string: Serial number of device</span>
<span class="f2">+        &quot;&quot;&quot;</span>
<span class="f2">+        return 'OLS-V-SN'</span>
<span class="f2">+</span>
<span class="f2">+    def get_revision(self):</span>
<span class="f2">+        &quot;&quot;&quot;</span>
<span class="f2">+        Retrieves the hardware revision of the device</span>
<span class="f2">+</span>
<span class="f2">+        Returns:</span>
<span class="f2">+            string: Revision value of device</span>
<span class="f2">+        &quot;&quot;&quot;</span>
<span class="f2">+        return 'A0'</span>
<span class="f2">+</span>
<span class="f2">+    def get_status(self):</span>
<span class="f2">+        &quot;&quot;&quot;</span>
<span class="f2">+        Retrieves the operational status of the device</span>
<span class="f2">+</span>
<span class="f2">+        Returns:</span>
<span class="f2">+            A boolean value, True if device is operating properly, False if not</span>
<span class="f2">+        &quot;&quot;&quot;</span>
<span class="f2">+        return True</span>
<span class="f2">+</span>
<span class="f2">+    def get_position_in_parent(self):</span>
<span class="f2">+        &quot;&quot;&quot;</span>
<span class="f2">+        Retrieves 1-based relative physical position in parent device. If the agent cannot determine the parent-relative position</span>
<span class="f2">+        for some reason, or if the associated value of entPhysicalContainedIn is '0', then the value '-1' is returned</span>
<span class="f2">+        Returns:</span>
<span class="f2">+            integer: The 1-based relative physical position in parent device or -1 if cannot determine the position</span>
<span class="f2">+        &quot;&quot;&quot;</span>
<span class="f2">+        return -1</span>
<span class="f2">+</span>
<span class="f2">+    def is_replaceable(self):</span>
<span class="f2">+        &quot;&quot;&quot;</span>
<span class="f2">+        Indicate whether this device is replaceable.</span>
<span class="f2">+        Returns:</span>
<span class="f2">+            bool: True if it is replaceable.</span>
<span class="f2">+        &quot;&quot;&quot;</span>
<span class="f2">+        return False</span>
<span class="f2">+</span>
<span class="f2">+    def get_base_mac(self):</span>
<span class="f2">+        &quot;&quot;&quot;</span>
<span class="f2">+        Retrieves the base MAC address for the chassis</span>
<span class="f2">+</span>
<span class="f2">+        Returns:</span>
<span class="f2">+            A string containing the MAC address in the format</span>
<span class="f2">+            'XX:XX:XX:XX:XX:XX'</span>
<span class="f2">+        &quot;&quot;&quot;</span>
<span class="f2">+        return '52:54:00:12:34:56'</span>
<span class="f2">+</span>
<span class="f2">+    def get_system_eeprom_info(self):</span>
<span class="f2">+        &quot;&quot;&quot;</span>
<span class="f2">+        Retrieves the full content of system EEPROM information for the chassis</span>
<span class="f2">+</span>
<span class="f2">+        Returns:</span>
<span class="f2">+            A dictionary where keys are the type code defined in</span>
<span class="f2">+            OCP ONIE TlvInfo EEPROM format and values are their corresponding</span>
<span class="f2">+            values.</span>
<span class="f2">+            Ex. { '0x21':'AG9064', '0x22':'V1.0', '0x23':'AG9064-0109867821',</span>
<span class="f2">+                  '0x24':'001c0f000fcd0a', '0x25':'02/03/2018 16:22:00',</span>
<span class="f2">+                  '0x26':'01', '0x27':'REV01', '0x28':'AG9064-C2358-16G'}</span>
<span class="f2">+        &quot;&quot;&quot;</span>
<span class="f2">+        info = { '0x21':'AG9064', '0x22':'V1.0', '0x23':'AG9064-0109867821',</span>
<span class="f2">+                  '0x24':'001c0f000fcd0a', '0x25':'02/03/2018 16:22:00',</span>
<span class="f2">+                  '0x26':'01', '0x27':'REV01', '0x28':'AG9064-C2358-16G'}</span>
<span class="f2">+        return info</span>
<span class="f2">+</span>
<span class="f2">+    def get_reboot_cause(self):</span>
<span class="f2">+        &quot;&quot;&quot;</span>
<span class="f2">+        Retrieves the cause of the previous reboot</span>
<span class="f2">+</span>
<span class="f2">+        Returns:</span>
<span class="f2">+            A tuple (string, string) where the first element is a string</span>
<span class="f2">+            containing the cause of the previous reboot. This string must be</span>
<span class="f2">+            one of the predefined strings in this class. If the first string</span>
<span class="f2">+            is &quot;REBOOT_CAUSE_HARDWARE_OTHER&quot;, the second string can be used</span>
<span class="f2">+            to pass a description of the reboot cause.</span>
<span class="f2">+        &quot;&quot;&quot;</span>
<span class="f2">+        return ChassisBase.REBOOT_CAUSE_NON_HARDWARE</span>
<span class="f2">+</span>
<span class="f2">+    def get_supervisor_slot(self):</span>
<span class="f2">+        &quot;&quot;&quot;</span>
<span class="f2">+        Retrieves the physical-slot of the supervisor-module in the modular</span>
<span class="f2">+        chassis. On the supervisor or line-card modules, it will return the</span>
<span class="f2">+        physical-slot of the supervisor-module.</span>
<span class="f2">+</span>
<span class="f2">+        On the fixed-platforms, the API can be ignored.</span>
<span class="f2">+</span>
<span class="f2">+        Users of the API can catch the exception and return a default</span>
<span class="f2">+        ModuleBase.MODULE_INVALID_SLOT and bypass code for fixed-platforms.</span>
<span class="f2">+</span>
<span class="f2">+        Returns:</span>
<span class="f2">+            An integer, the vendor specific physical slot identifier of the</span>
<span class="f2">+            supervisor module in the modular-chassis.</span>
<span class="f2">+        &quot;&quot;&quot;</span>
<span class="f2">+        return 0</span>
<span class="f2">+</span>
<span class="f2">+    def get_my_slot(self):</span>
<span class="f2">+        &quot;&quot;&quot;</span>
<span class="f2">+        Retrieves the physical-slot of this module in the modular chassis.</span>
<span class="f2">+        On the supervisor, it will return the physical-slot of the supervisor</span>
<span class="f2">+        module. On the linecard, it will return the physical-slot of the</span>
<span class="f2">+        linecard module where this instance of SONiC is running.</span>
<span class="f2">+</span>
<span class="f2">+        On the fixed-platforms, the API can be ignored.</span>
<span class="f2">+</span>
<span class="f2">+        Users of the API can catch the exception and return a default</span>
<span class="f2">+        ModuleBase.MODULE_INVALID_SLOT and bypass code for fixed-platforms.</span>
<span class="f2">+</span>
<span class="f2">+        Returns:</span>
<span class="f2">+            An integer, the vendor specific physical slot identifier of this</span>
<span class="f2">+            module in the modular-chassis.</span>
<span class="f2">+        &quot;&quot;&quot;</span>
<span class="f2">+        return 0</span>
<span class="f2">+</span>
<span class="f2">+    def is_modular_chassis(self):</span>
<span class="f2">+        &quot;&quot;&quot;</span>
<span class="f2">+        Retrieves whether the sonic instance is part of modular chassis</span>
<span class="f2">+</span>
<span class="f2">+        Returns:</span>
<span class="f2">+            A bool value, should return False by default or for fixed-platforms.</span>
<span class="f2">+            Should return True for supervisor-cards, line-cards etc running as part</span>
<span class="f2">+            of modular-chassis.</span>
<span class="f2">+        &quot;&quot;&quot;</span>
<span class="f2">+        return False</span>
<span class="f2">+</span>
<span class="f2">+    def init_midplane_switch(self):</span>
<span class="f2">+        &quot;&quot;&quot;</span>
<span class="f2">+        Initializes the midplane functionality of the modular chassis. For</span>
<span class="f2">+        example, any validation of midplane, populating any lookup tables etc</span>
<span class="f2">+        can be done here. The expectation is that the required kernel modules,</span>
<span class="f2">+        ip-address assignment etc are done before the pmon, database dockers</span>
<span class="f2">+        are up.</span>
<span class="f2">+</span>
<span class="f2">+        Returns:</span>
<span class="f2">+            A bool value, should return True if the midplane initialized</span>
<span class="f2">+            successfully.</span>
<span class="f2">+        &quot;&quot;&quot;</span>
<span class="f2">+        return True</span>
<span class="f2">+</span>
<span class="f2">+    def get_module_index(self, module_name):</span>
<span class="f2">+        &quot;&quot;&quot;</span>
<span class="f2">+        Retrieves module index from the module name</span>
<span class="f2">+</span>
<span class="f2">+        Args:</span>
<span class="f2">+            module_name: A string, prefixed by SUPERVISOR, LINE-CARD or FABRIC-CARD</span>
<span class="f2">+            Ex. SUPERVISOR0, LINE-CARD1, FABRIC-CARD5</span>
<span class="f2">+</span>
<span class="f2">+        Returns:</span>
<span class="f2">+            An integer, the index of the ModuleBase object in the module_list</span>
<span class="f2">+        &quot;&quot;&quot;</span>
<span class="f2">+        return 0</span>
<span class="f2">+</span>
<span class="f2">+    def get_thermal_manager(self):</span>
<span class="f2">+        &quot;&quot;&quot;</span>
<span class="f2">+        Retrieves thermal manager class on this chassis</span>
<span class="f2">+        :return: A class derived from ThermalManagerBase representing the</span>
<span class="f2">+        specified thermal manager. ThermalManagerBase is returned as default</span>
<span class="f2">+        &quot;&quot;&quot;</span>
<span class="f2">+        return None</span>
<span class="f2">+</span>
<span class="f2">+    def get_port_or_cage_type(self, index):</span>
<span class="f2">+        &quot;&quot;&quot;</span>
<span class="f2">+        Retrieves sfp port or cage type corresponding to physical port &lt;index&gt;</span>
<span class="f2">+</span>
<span class="f2">+        Args:</span>
<span class="f2">+            index: An integer (&gt;=0), the index of the sfp to retrieve.</span>
<span class="f2">+                   The index should correspond to the physical port in a chassis.</span>
<span class="f2">+                   For example:-</span>
<span class="f2">+                   1 for Ethernet0, 2 for Ethernet4 and so on for one platform.</span>
<span class="f2">+                   0 for Ethernet0, 1 for Ethernet4 and so on for another platform.</span>
<span class="f2">+</span>
<span class="f2">+        Returns:</span>
<span class="f2">+            The masks of all types of port or cage that can be supported on the port</span>
<span class="f2">+            Types are defined in sfp_base.py</span>
<span class="f2">+            Eg.</span>
<span class="f2">+                Both SFP and SFP+ are supported on the port, the return value should be 0x0a</span>
<span class="f2">+                which is 0x02 | 0x08</span>
<span class="f2">+        &quot;&quot;&quot;</span>
<span class="f2">+        return 0</span>
<span class="f2">+</span>
<span class="f2">+    def set_status_led(self, color):</span>
<span class="f2">+        &quot;&quot;&quot;</span>
<span class="f2">+        Sets the state of the system LED</span>
<span class="f2">+</span>
<span class="f2">+        Args:</span>
<span class="f2">+            color: A string representing the color with which to set the</span>
<span class="f2">+                   system LED</span>
<span class="f2">+</span>
<span class="f2">+        Returns:</span>
<span class="f2">+            bool: True if system LED state is set successfully, False if not</span>
<span class="f2">+        &quot;&quot;&quot;</span>
<span class="f2">+        return True</span>
<span class="f2">+</span>
<span class="f2">+    def get_status_led(self):</span>
<span class="f2">+        &quot;&quot;&quot;</span>
<span class="f2">+        Gets the state of the system LED</span>
<span class="f2">+</span>
<span class="f2">+        Returns:</span>
<span class="f2">+            A string, one of the valid LED color strings which could be vendor</span>
<span class="f2">+            specified.</span>
<span class="f2">+        &quot;&quot;&quot;</span>
<span class="f2">+        return DeviceBase.STATUS_LED_COLOR_GREEN</span>
<span class="f2">+</span>
<span class="f2">+    def get_change_event(self, timeout=0):</span>
<span class="f2">+        &quot;&quot;&quot;</span>
<span class="f2">+        Returns a nested dictionary containing all devices which have</span>
<span class="f2">+        experienced a change at chassis level</span>
<span class="f2">+</span>
<span class="f2">+        Args:</span>
<span class="f2">+            timeout: Timeout in milliseconds (optional). If timeout == 0,</span>
<span class="f2">+                this method will block until a change is detected.</span>
<span class="f2">+</span>
<span class="f2">+        Returns:</span>
<span class="f2">+            (bool, dict):</span>
<span class="f2">+                - True if call successful, False if not;</span>
<span class="f2">+                - A nested dictionary where key is a device type,</span>
<span class="f2">+                  value is a dictionary with key:value pairs in the format of</span>
<span class="f2">+                  {'device_id':'device_event'},</span>
<span class="f2">+                  where device_id is the device ID for this device and</span>
<span class="f2">+                        device_event,</span>
<span class="f2">+                             status='1' represents device inserted,</span>
<span class="f2">+                             status='0' represents device removed.</span>
<span class="f2">+                  Ex. {'fan':{'0':'0', '2':'1'}, 'sfp':{'11':'0'}}</span>
<span class="f2">+                      indicates that fan 0 has been removed, fan 2</span>
<span class="f2">+                      has been inserted and sfp 11 has been removed.</span>
<span class="f2">+                  Specifically for SFP event, besides SFP plug in and plug out,</span>
<span class="f2">+                  there are some other error event could be raised from SFP, when</span>
<span class="f2">+                  these error happened, SFP eeprom will not be avalaible, XCVRD shall</span>
<span class="f2">+                  stop to read eeprom before SFP recovered from error status.</span>
<span class="f2">+                      status='2' I2C bus stuck,</span>
<span class="f2">+                      status='3' Bad eeprom,</span>
<span class="f2">+                      status='4' Unsupported cable,</span>
<span class="f2">+                      status='5' High Temperature,</span>
<span class="f2">+                      status='6' Bad cable.</span>
<span class="f2">+        &quot;&quot;&quot;</span>
<span class="f2">+        return (False, {})</span>
<span class="bold">diff --git a/platform/molex/sonic-platform-modules-ot-kvm/ols-v/sonic_platform/component.py b/platform/molex/sonic-platform-modules-ot-kvm/ols-v/sonic_platform/component.py</span>
<span class="bold">new file mode 100644</span>
<span class="bold">index 000000000..8314728a2</span>
<span class="bold">--- /dev/null</span>
<span class="bold">+++ b/platform/molex/sonic-platform-modules-ot-kvm/ols-v/sonic_platform/component.py</span>
<span class="f6">@@ -0,0 +1,178 @@</span>
<span class="f2">+#!/usr/bin/env python</span>
<span class="f2">+</span>
<span class="f2">+########################################################################</span>
<span class="f2">+# OT-KVM</span>
<span class="f2">+#</span>
<span class="f2">+# Module contains an implementation of SONiC Platform Base API and</span>
<span class="f2">+# provides the Components' (e.g., BIOS, CPLD, FPGA, etc.) available in</span>
<span class="f2">+# the platform</span>
<span class="f2">+#</span>
<span class="f2">+########################################################################</span>
<span class="f2">+</span>
<span class="f2">+try:</span>
<span class="f2">+    import json</span>
<span class="f2">+    import os</span>
<span class="f2">+    import re</span>
<span class="f2">+    import subprocess</span>
<span class="f2">+    import tarfile</span>
<span class="f2">+    from sonic_platform_base.component_base import ComponentBase</span>
<span class="f2">+except ImportError as e:</span>
<span class="f2">+    raise ImportError(str(e) + &quot;- required module not found&quot;)</span>
<span class="f2">+</span>
<span class="f2">+</span>
<span class="f2">+class Component(ComponentBase):</span>
<span class="f2">+    &quot;&quot;&quot;OT-KVM Platform-specific Component class&quot;&quot;&quot;</span>
<span class="f2">+</span>
<span class="f2">+    CHASSIS_COMPONENTS = [</span>
<span class="f2">+        [&quot;BIOS&quot;, (&quot;Performs initialization of hardware components during &quot;</span>
<span class="f2">+                  &quot;booting&quot;), &quot;1.01&quot;],</span>
<span class="f2">+        [&quot;FPGA&quot;, (&quot;Platform management controller for on-board temperature &quot;</span>
<span class="f2">+                  &quot;monitoring, in-chassis power, Fan and LED control&quot;), &quot;99.99.0016&quot;],</span>
<span class="f2">+        [&quot;CPLD&quot;, &quot;Used for managing IO modules, SFP+ modules and system LEDs&quot;, &quot;0.01.0006&quot;],</span>
<span class="f2">+        [&quot;OPS&quot;, &quot;Optical protection switch&quot;, &quot;0.01.0002&quot;],</span>
<span class="f2">+        [&quot;AMP&quot;, &quot;Optical amplifier BA&quot;, &quot;0.01.0037&quot;],</span>
<span class="f2">+        [&quot;AMP-P&quot;, &quot;Optical amplifier PA&quot;, &quot;0.01.0037&quot;],</span>
<span class="f2">+        [&quot;SCC&quot;, &quot;System controller card&quot;, &quot;0.00.0002&quot;],</span>
<span class="f2">+        [&quot;ONIE&quot;, &quot;Open Network Install Environment&quot;, &quot;2022.08&quot;]</span>
<span class="f2">+    ]</span>
<span class="f2">+    MODULE_COMPONENTS = [</span>
<span class="f2">+        [</span>
<span class="f2">+            [&quot;OPS&quot;, &quot;Optical protection switch&quot;, &quot;0.01.0002&quot;]</span>
<span class="f2">+        ],</span>
<span class="f2">+        [</span>
<span class="f2">+            [&quot;EDFA&quot;, &quot;AMP BA&quot;, &quot;9.99.0131&quot;],</span>
<span class="f2">+            [&quot;OCM&quot;, &quot;AMP OCM&quot;, &quot;0.02.0034&quot;],</span>
<span class="f2">+            [&quot;OTDR&quot;, &quot;AMP OTDR&quot;, &quot;0.01.0059&quot;]</span>
<span class="f2">+        ],</span>
<span class="f2">+        [</span>
<span class="f2">+            [&quot;EDFA-P&quot;, &quot;AMP-P PA&quot;, &quot;9.99.0131&quot;],</span>
<span class="f2">+            [&quot;OCM-P&quot;, &quot;AMP-P OCM&quot;, &quot;0.02.0034&quot;],</span>
<span class="f2">+            [&quot;OTDR-P&quot;, &quot;AMP-P OTDR&quot;, &quot;0.01.0059&quot;]</span>
<span class="f2">+        ],</span>
<span class="f2">+        [</span>
<span class="f2">+            [&quot;SCC&quot;, &quot;SCC main card&quot;, &quot;0.00.0002&quot;]</span>
<span class="f2">+        ]</span>
<span class="f2">+    ]</span>
<span class="f2">+</span>
<span class="f2">+    def __init__(self, component_index=0,</span>
<span class="f2">+                 is_module=False, iom_index=0, i2c_line=0, dependency=None):</span>
<span class="f2">+</span>
<span class="f2">+        ComponentBase.__init__(self)</span>
<span class="f2">+        self.is_module_component = is_module</span>
<span class="f2">+        self.dependency = dependency</span>
<span class="f2">+</span>
<span class="f2">+        if self.is_module_component:</span>
<span class="f2">+            self.index = iom_index</span>
<span class="f2">+            self.name = self.MODULE_COMPONENTS[component_index][iom_index][0]</span>
<span class="f2">+            self.description = self.MODULE_COMPONENTS[component_index][iom_index][1]</span>
<span class="f2">+            self.version = self.MODULE_COMPONENTS[component_index][iom_index][2]</span>
<span class="f2">+        else:</span>
<span class="f2">+            self.index = component_index</span>
<span class="f2">+            self.name = self.CHASSIS_COMPONENTS[self.index][0]</span>
<span class="f2">+            self.description = self.CHASSIS_COMPONENTS[self.index][1]</span>
<span class="f2">+            self.version = self.CHASSIS_COMPONENTS[self.index][2]</span>
<span class="f2">+</span>
<span class="f2">+    def get_name(self):</span>
<span class="f2">+        &quot;&quot;&quot;</span>
<span class="f2">+        Retrieves the name of the component</span>
<span class="f2">+</span>
<span class="f2">+        Returns:</span>
<span class="f2">+            A string containing the name of the component</span>
<span class="f2">+        &quot;&quot;&quot;</span>
<span class="f2">+        return self.name</span>
<span class="f2">+</span>
<span class="f2">+    def get_description(self):</span>
<span class="f2">+        &quot;&quot;&quot;</span>
<span class="f2">+        Retrieves the description of the component</span>
<span class="f2">+</span>
<span class="f2">+        Returns:</span>
<span class="f2">+            A string containing the description of the component</span>
<span class="f2">+        &quot;&quot;&quot;</span>
<span class="f2">+        return self.description</span>
<span class="f2">+</span>
<span class="f2">+    def get_firmware_version(self):</span>
<span class="f2">+        &quot;&quot;&quot;</span>
<span class="f2">+        Retrieves the firmware version of the component</span>
<span class="f2">+</span>
<span class="f2">+        Returns:</span>
<span class="f2">+            A string containing the firmware version of the component</span>
<span class="f2">+        &quot;&quot;&quot;</span>
<span class="f2">+        return self.version</span>
<span class="f2">+</span>
<span class="f2">+    def get_available_firmware_version(self, image_path):</span>
<span class="f2">+        &quot;&quot;&quot;</span>
<span class="f2">+        Retrieves the available firmware version of the component</span>
<span class="f2">+</span>
<span class="f2">+        Note: the firmware version will be read from image</span>
<span class="f2">+</span>
<span class="f2">+        Args:</span>
<span class="f2">+            image_path: A string, path to firmware image</span>
<span class="f2">+</span>
<span class="f2">+        Returns:</span>
<span class="f2">+            A string containing the available firmware version of the component</span>
<span class="f2">+        &quot;&quot;&quot;</span>
<span class="f2">+        return self.version</span>
<span class="f2">+</span>
<span class="f2">+    def install_firmware(self, image_path):</span>
<span class="f2">+        &quot;&quot;&quot;</span>
<span class="f2">+        Installs firmware to the component</span>
<span class="f2">+</span>
<span class="f2">+        Args:</span>
<span class="f2">+            image_path: A string, path to firmware image</span>
<span class="f2">+</span>
<span class="f2">+        Returns:</span>
<span class="f2">+            A boolean, True if install was successful, False if not</span>
<span class="f2">+        &quot;&quot;&quot;</span>
<span class="f2">+        return False</span>
<span class="f2">+</span>
<span class="f2">+    def update_firmware(self, image_path):</span>
<span class="f2">+        &quot;&quot;&quot;</span>
<span class="f2">+        Updates firmware of the component</span>
<span class="f2">+</span>
<span class="f2">+        This API performs firmware update: it assumes firmware installation and loading in a single call.</span>
<span class="f2">+        In case platform component requires some extra steps (apart from calling Low Level Utility)</span>
<span class="f2">+        to load the installed firmware (e.g, reboot, power cycle, etc.) - this will be done automatically by API</span>
<span class="f2">+</span>
<span class="f2">+        Args:</span>
<span class="f2">+            image_path: A string, path to firmware image</span>
<span class="f2">+</span>
<span class="f2">+        Returns:</span>
<span class="f2">+            Boolean False if image_path doesn't exist instead of throwing an exception error</span>
<span class="f2">+            Nothing when the update is successful</span>
<span class="f2">+</span>
<span class="f2">+        Raises:</span>
<span class="f2">+            RuntimeError: update failed</span>
<span class="f2">+        &quot;&quot;&quot;</span>
<span class="f2">+        return True</span>
<span class="f2">+</span>
<span class="f2">+    def auto_update_firmware(self, image_path, boot_type):</span>
<span class="f2">+        &quot;&quot;&quot;</span>
<span class="f2">+        Updates firmware of the component</span>
<span class="f2">+</span>
<span class="f2">+        This API performs firmware update automatically based on boot_type: it assumes firmware installation</span>
<span class="f2">+        and/or creating a loading task during the reboot, if needed, in a single call.</span>
<span class="f2">+        In case platform component requires some extra steps (apart from calling Low Level Utility)</span>
<span class="f2">+        to load the installed firmware (e.g, reboot, power cycle, etc.) - this will be done automatically during the reboot.</span>
<span class="f2">+        The loading task will be created by API.</span>
<span class="f2">+</span>
<span class="f2">+        Args:</span>
<span class="f2">+            image_path: A string, path to firmware image</span>
<span class="f2">+            boot_type: A string, reboot type following the upgrade</span>
<span class="f2">+                         - none/fast/warm/cold</span>
<span class="f2">+</span>
<span class="f2">+        Returns:</span>
<span class="f2">+            Output: A return code</span>
<span class="f2">+                return_code: An integer number, status of component firmware auto-update</span>
<span class="f2">+                    - return code of a positive number indicates successful auto-update</span>
<span class="f2">+                        - status_installed = 1</span>
<span class="f2">+                        - status_updated = 2</span>
<span class="f2">+                        - status_scheduled = 3</span>
<span class="f2">+                    - return_code of a negative number indicates failed auto-update</span>
<span class="f2">+                        - status_err_boot_type = -1</span>
<span class="f2">+                        - status_err_image = -2</span>
<span class="f2">+                        - status_err_unknown = -3</span>
<span class="f2">+</span>
<span class="f2">+        Raises:</span>
<span class="f2">+            RuntimeError: auto-update failure cause</span>
<span class="f2">+        &quot;&quot;&quot;</span>
<span class="f2">+        return 1</span>
<span class="bold">diff --git a/platform/molex/sonic-platform-modules-ot-kvm/ols-v/sonic_platform/fan.py b/platform/molex/sonic-platform-modules-ot-kvm/ols-v/sonic_platform/fan.py</span>
<span class="bold">new file mode 100644</span>
<span class="bold">index 000000000..095835034</span>
<span class="bold">--- /dev/null</span>
<span class="bold">+++ b/platform/molex/sonic-platform-modules-ot-kvm/ols-v/sonic_platform/fan.py</span>
<span class="f6">@@ -0,0 +1,190 @@</span>
<span class="f2">+#!/usr/bin/env python</span>
<span class="f2">+</span>
<span class="f2">+########################################################################</span>
<span class="f2">+# OT-KVM</span>
<span class="f2">+#</span>
<span class="f2">+# Module contains an implementation of SONiC Platform Base API and</span>
<span class="f2">+# provides the Fans' information which are available in the platform.</span>
<span class="f2">+#</span>
<span class="f2">+########################################################################</span>
<span class="f2">+</span>
<span class="f2">+import os.path</span>
<span class="f2">+</span>
<span class="f2">+try:</span>
<span class="f2">+    from sonic_platform_base.device_base import DeviceBase</span>
<span class="f2">+    from sonic_platform_base.fan_base import FanBase</span>
<span class="f2">+except ImportError as e:</span>
<span class="f2">+    raise ImportError(str(e) + &quot;- required module not found&quot;)</span>
<span class="f2">+</span>
<span class="f2">+MAX_OLS_V_PSU_FAN_SPEED = 18000</span>
<span class="f2">+MAX_OLS_V_FAN_SPEED = 16000</span>
<span class="f2">+</span>
<span class="f2">+</span>
<span class="f2">+class Fan(FanBase):</span>
<span class="f2">+    &quot;&quot;&quot;OT-KVM Platform-specific Fan class&quot;&quot;&quot;</span>
<span class="f2">+</span>
<span class="f2">+    def __init__(self, fantray_index=1, psu_index=1, psu_fan=False, dependency=None):</span>
<span class="f2">+        FanBase.__init__(self)</span>
<span class="f2">+        self.is_psu_fan = psu_fan</span>
<span class="f2">+        if not self.is_psu_fan:</span>
<span class="f2">+            self.fantrayindex = fantray_index</span>
<span class="f2">+            self.dependency = dependency</span>
<span class="f2">+            self.max_fan_speed = MAX_OLS_V_FAN_SPEED</span>
<span class="f2">+        else:</span>
<span class="f2">+            self.psuindex = psu_index</span>
<span class="f2">+            self.max_fan_speed = MAX_OLS_V_PSU_FAN_SPEED</span>
<span class="f2">+</span>
<span class="f2">+</span>
<span class="f2">+    def get_direction(self):</span>
<span class="f2">+        &quot;&quot;&quot;</span>
<span class="f2">+        Retrieves the fan airflow direction</span>
<span class="f2">+        Returns:</span>
<span class="f2">+            A string, either FAN_DIRECTION_INTAKE or FAN_DIRECTION_EXHAUST</span>
<span class="f2">+            depending on fan direction</span>
<span class="f2">+</span>
<span class="f2">+        Notes:</span>
<span class="f2">+            In OT-KVM platforms,</span>
<span class="f2">+            - Forward/Exhaust : Air flows from Port side to Fan side.</span>
<span class="f2">+            - Reverse/Intake  : Air flows from Fan side to Port side.</span>
<span class="f2">+        &quot;&quot;&quot;</span>
<span class="f2">+        direction = [self.FAN_DIRECTION_INTAKE, self.FAN_DIRECTION_EXHAUST]</span>
<span class="f2">+</span>
<span class="f2">+        return direction[1]</span>
<span class="f2">+</span>
<span class="f2">+    def get_speed(self):</span>
<span class="f2">+        &quot;&quot;&quot;</span>
<span class="f2">+        Retrieves the speed of fan</span>
<span class="f2">+        Returns:</span>
<span class="f2">+            int: percentage of the max fan speed</span>
<span class="f2">+        &quot;&quot;&quot;</span>
<span class="f2">+        speed = 60</span>
<span class="f2">+        if self.is_psu_fan:</span>
<span class="f2">+            speed = 50</span>
<span class="f2">+</span>
<span class="f2">+        return speed</span>
<span class="f2">+</span>
<span class="f2">+    def get_target_speed(self):</span>
<span class="f2">+        &quot;&quot;&quot;</span>
<span class="f2">+        Retrieves the target (expected) speed of the fan</span>
<span class="f2">+        Returns:</span>
<span class="f2">+            An integer, the percentage of full fan speed, in the range 0 (off)</span>
<span class="f2">+                 to 100 (full speed)</span>
<span class="f2">+        &quot;&quot;&quot;</span>
<span class="f2">+        return self.get_speed()</span>
<span class="f2">+</span>
<span class="f2">+    def get_speed_tolerance(self):</span>
<span class="f2">+        &quot;&quot;&quot;</span>
<span class="f2">+        Retrieves the speed tolerance of the fan</span>
<span class="f2">+        Returns:</span>
<span class="f2">+            An integer, the percentage of variance from target speed which is</span>
<span class="f2">+        considered tolerable</span>
<span class="f2">+        &quot;&quot;&quot;</span>
<span class="f2">+        tolerance = 10</span>
<span class="f2">+</span>
<span class="f2">+        return tolerance</span>
<span class="f2">+</span>
<span class="f2">+    def set_speed(self, speed):</span>
<span class="f2">+        &quot;&quot;&quot;</span>
<span class="f2">+        Set fan speed to expected value</span>
<span class="f2">+        Args:</span>
<span class="f2">+            speed: An integer, the percentage of full fan speed to set fan to,</span>
<span class="f2">+                   in the range 0 (off) to 100 (full speed)</span>
<span class="f2">+        Returns:</span>
<span class="f2">+            bool: True if set success, False if fail.</span>
<span class="f2">+        &quot;&quot;&quot;</span>
<span class="f2">+        # Fan speeds are controlled by Smart-fussion FPGA.</span>
<span class="f2">+        return True</span>
<span class="f2">+</span>
<span class="f2">+    def set_status_led(self, color):</span>
<span class="f2">+        &quot;&quot;&quot;</span>
<span class="f2">+        Set led to expected color</span>
<span class="f2">+        Args:</span>
<span class="f2">+            color: A string representing the color with which to set the</span>
<span class="f2">+                   fan module status LED</span>
<span class="f2">+        Returns:</span>
<span class="f2">+            bool: True if set success, False if fail.</span>
<span class="f2">+        &quot;&quot;&quot;</span>
<span class="f2">+        # No LED available for FanTray and PSU Fan</span>
<span class="f2">+        # Return True to avoid thermalctld alarm.</span>
<span class="f2">+        return True</span>
<span class="f2">+</span>
<span class="f2">+    def get_status_led(self):</span>
<span class="f2">+        &quot;&quot;&quot;</span>
<span class="f2">+        Gets the state of the Fan status LED</span>
<span class="f2">+</span>
<span class="f2">+        Returns:</span>
<span class="f2">+            A string, one of the predefined STATUS_LED_COLOR_* strings.</span>
<span class="f2">+        &quot;&quot;&quot;</span>
<span class="f2">+        # No LED available for FanTray and PSU Fan</span>
<span class="f2">+        return DeviceBase.STATUS_LED_COLOR_GREEN</span>
<span class="f2">+</span>
<span class="f2">+    def get_name(self):</span>
<span class="f2">+        &quot;&quot;&quot;</span>
<span class="f2">+        Retrieves the fan name</span>
<span class="f2">+        Returns:</span>
<span class="f2">+            string: The name of the device</span>
<span class="f2">+        &quot;&quot;&quot;</span>
<span class="f2">+        if self.is_psu_fan:</span>
<span class="f2">+            return &quot;PSU{} Fan&quot;.format(self.psuindex)</span>
<span class="f2">+        else:</span>
<span class="f2">+            return &quot;FanTray{}-Fan1&quot;.format(self.fantrayindex)</span>
<span class="f2">+</span>
<span class="f2">+    def get_model(self):</span>
<span class="f2">+        &quot;&quot;&quot;</span>
<span class="f2">+        Retrieves the part number of the FAN</span>
<span class="f2">+        Returns:</span>
<span class="f2">+            string: Part number of FAN</span>
<span class="f2">+        &quot;&quot;&quot;</span>
<span class="f2">+        if self.is_psu_fan:</span>
<span class="f2">+            return 'PSU-01234D'</span>
<span class="f2">+        else:</span>
<span class="f2">+            return 'FAN-01234D'</span>
<span class="f2">+</span>
<span class="f2">+    def get_serial(self):</span>
<span class="f2">+        &quot;&quot;&quot;</span>
<span class="f2">+        Retrieves the serial number of the FAN</span>
<span class="f2">+        Returns:</span>
<span class="f2">+            string: Serial number of FAN</span>
<span class="f2">+        &quot;&quot;&quot;</span>
<span class="f2">+        if self.is_psu_fan:</span>
<span class="f2">+            return 'OLS-V-PSU-01234D-{}-A0'.format(self.psuindex)</span>
<span class="f2">+        else:</span>
<span class="f2">+            return 'OLS-V-FAN-01234D-{}-A0'.format(self.fantrayindex)</span>
<span class="f2">+</span>
<span class="f2">+    def get_presence(self):</span>
<span class="f2">+        &quot;&quot;&quot;</span>
<span class="f2">+        Retrieves the presence of the FAN</span>
<span class="f2">+        Returns:</span>
<span class="f2">+            bool: True if fan is present, False if not</span>
<span class="f2">+        &quot;&quot;&quot;</span>
<span class="f2">+        presence = True</span>
<span class="f2">+</span>
<span class="f2">+        return presence</span>
<span class="f2">+</span>
<span class="f2">+    def get_status(self):</span>
<span class="f2">+        &quot;&quot;&quot;</span>
<span class="f2">+        Retrieves the operational status of the FAN</span>
<span class="f2">+        Returns:</span>
<span class="f2">+            bool: True if FAN is operating properly, False if not</span>
<span class="f2">+        &quot;&quot;&quot;</span>
<span class="f2">+        status = True</span>
<span class="f2">+</span>
<span class="f2">+        return status</span>
<span class="f2">+</span>
<span class="f2">+    def get_position_in_parent(self):</span>
<span class="f2">+        &quot;&quot;&quot;</span>
<span class="f2">+        Retrieves 1-based relative physical position in parent device.</span>
<span class="f2">+        Returns:</span>
<span class="f2">+            integer: The 1-based relative physical position in parent</span>
<span class="f2">+            device or -1 if cannot determine the position</span>
<span class="f2">+        &quot;&quot;&quot;</span>
<span class="f2">+        return 1</span>
<span class="f2">+</span>
<span class="f2">+    def is_replaceable(self):</span>
<span class="f2">+        &quot;&quot;&quot;</span>
<span class="f2">+        Indicate whether Fan is replaceable.</span>
<span class="f2">+        Returns:</span>
<span class="f2">+            bool: True if it is replaceable.</span>
<span class="f2">+        &quot;&quot;&quot;</span>
<span class="f2">+        return False</span>
<span class="f2">+</span>
<span class="bold">diff --git a/platform/molex/sonic-platform-modules-ot-kvm/ols-v/sonic_platform/fan_drawer.py b/platform/molex/sonic-platform-modules-ot-kvm/ols-v/sonic_platform/fan_drawer.py</span>
<span class="bold">new file mode 100644</span>
<span class="bold">index 000000000..05f06a189</span>
<span class="bold">--- /dev/null</span>
<span class="bold">+++ b/platform/molex/sonic-platform-modules-ot-kvm/ols-v/sonic_platform/fan_drawer.py</span>
<span class="f6">@@ -0,0 +1,68 @@</span>
<span class="f2">+#!/usr/bin/env python</span>
<span class="f2">+</span>
<span class="f2">+########################################################################</span>
<span class="f2">+# OT-KVM</span>
<span class="f2">+#</span>
<span class="f2">+# Module contains an implementation of SONiC Platform Base API and</span>
<span class="f2">+# provides the Fan-Drawers' information available in the platform.</span>
<span class="f2">+#</span>
<span class="f2">+########################################################################</span>
<span class="f2">+</span>
<span class="f2">+try:</span>
<span class="f2">+    import os</span>
<span class="f2">+    from sonic_platform_base.device_base import DeviceBase</span>
<span class="f2">+    from sonic_platform_base.fan_drawer_base import FanDrawerBase</span>
<span class="f2">+    from sonic_platform.fan import Fan</span>
<span class="f2">+except ImportError as e:</span>
<span class="f2">+    raise ImportError(str(e) + &quot;- required module not found&quot;)</span>
<span class="f2">+</span>
<span class="f2">+</span>
<span class="f2">+class FanDrawer(FanDrawerBase):</span>
<span class="f2">+    &quot;&quot;&quot;OT-KVM Platform-specific Fan Drawer class&quot;&quot;&quot;</span>
<span class="f2">+</span>
<span class="f2">+    def __init__(self, fantray_index):</span>
<span class="f2">+        FanDrawerBase.__init__(self)</span>
<span class="f2">+        # FanTray is 1-based in OT-KVM platforms</span>
<span class="f2">+        self.index = fantray_index + 1</span>
<span class="f2">+        self._fan_list.append(Fan(self.index, dependency=self))</span>
<span class="f2">+</span>
<span class="f2">+</span>
<span class="f2">+    def set_status_led(self, color):</span>
<span class="f2">+        &quot;&quot;&quot;</span>
<span class="f2">+        Set led to expected color</span>
<span class="f2">+        Args:</span>
<span class="f2">+            color: A string representing the color with which to set the</span>
<span class="f2">+                   fan module status LED</span>
<span class="f2">+        Returns:</span>
<span class="f2">+            bool: True if set success, False if fail.</span>
<span class="f2">+        &quot;&quot;&quot;</span>
<span class="f2">+        # Leds are controlled by Smart-fussion FPGA.</span>
<span class="f2">+        # Return True to avoid thermalctld alarm.</span>
<span class="f2">+        return True</span>
<span class="f2">+</span>
<span class="f2">+    def get_status_led(self):</span>
<span class="f2">+        &quot;&quot;&quot;</span>
<span class="f2">+        Gets the state of the Fan status LED</span>
<span class="f2">+</span>
<span class="f2">+        Returns:</span>
<span class="f2">+            A string, one of the predefined STATUS_LED_COLOR_* strings.</span>
<span class="f2">+        &quot;&quot;&quot;</span>
<span class="f2">+        return DeviceBase.STATUS_LED_COLOR_GREEN</span>
<span class="f2">+</span>
<span class="f2">+    def get_maximum_consumed_power(self):</span>
<span class="f2">+        &quot;&quot;&quot;</span>
<span class="f2">+        Retrives the maximum power drawn by Fan Drawer</span>
<span class="f2">+</span>
<span class="f2">+        Returns:</span>
<span class="f2">+            A float, with value of the maximum consumable power of the</span>
<span class="f2">+            component.</span>
<span class="f2">+        &quot;&quot;&quot;</span>
<span class="f2">+        return 54.0</span>
<span class="f2">+</span>
<span class="f2">+    def get_name(self):</span>
<span class="f2">+        &quot;&quot;&quot;</span>
<span class="f2">+        Retrieves the fan name</span>
<span class="f2">+        Returns:</span>
<span class="f2">+            string: The name of the device</span>
<span class="f2">+        &quot;&quot;&quot;</span>
<span class="f2">+        return &quot;FanTray{}&quot;.format(self.index)</span>
<span class="bold">diff --git a/platform/molex/sonic-platform-modules-ot-kvm/ols-v/sonic_platform/module.py b/platform/molex/sonic-platform-modules-ot-kvm/ols-v/sonic_platform/module.py</span>
<span class="bold">new file mode 100644</span>
<span class="bold">index 000000000..6cd39962f</span>
<span class="bold">--- /dev/null</span>
<span class="bold">+++ b/platform/molex/sonic-platform-modules-ot-kvm/ols-v/sonic_platform/module.py</span>
<span class="f6">@@ -0,0 +1,155 @@</span>
<span class="f2">+#!/usr/bin/env python</span>
<span class="f2">+</span>
<span class="f2">+########################################################################</span>
<span class="f2">+# OT-KVM</span>
<span class="f2">+#</span>
<span class="f2">+# Module contains an implementation of SONiC Platform Base API and</span>
<span class="f2">+# provides the Modules' information which are available in the platform</span>
<span class="f2">+#</span>
<span class="f2">+########################################################################</span>
<span class="f2">+</span>
<span class="f2">+</span>
<span class="f2">+try:</span>
<span class="f2">+    import os</span>
<span class="f2">+    from sonic_platform_base.module_base import ModuleBase</span>
<span class="f2">+    from sonic_platform.component import Component</span>
<span class="f2">+except ImportError as e:</span>
<span class="f2">+    raise ImportError(str(e) + &quot;- required module not found&quot;)</span>
<span class="f2">+</span>
<span class="f2">+</span>
<span class="f2">+class Module(ModuleBase):</span>
<span class="f2">+    &quot;&quot;&quot;OT-KVM Platform-specific Module class&quot;&quot;&quot;</span>
<span class="f2">+</span>
<span class="f2">+    CHASSIS_MODULES = [</span>
<span class="f2">+        [&quot;OPS&quot;, &quot;Optical protection switch&quot;, 1],</span>
<span class="f2">+        [&quot;AMP&quot;, &quot;Optical amplifier BA&quot;, 3],</span>
<span class="f2">+        [&quot;AMP-P&quot;, &quot;Optical amplifier PA&quot;, 3],</span>
<span class="f2">+        [&quot;SCC&quot;, &quot;System controller card&quot;, 1]</span>
<span class="f2">+    ]</span>
<span class="f2">+</span>
<span class="f2">+    def __init__(self, module_index):</span>
<span class="f2">+        ModuleBase.__init__(self)</span>
<span class="f2">+        # Modules are 1-based in OT-KVM platforms</span>
<span class="f2">+        self.index = module_index</span>
<span class="f2">+        for i in range(self.CHASSIS_MODULES[self.index][2]):</span>
<span class="f2">+            component = Component(self.index, True, i)</span>
<span class="f2">+            self._component_list.append(component)</span>
<span class="f2">+</span>
<span class="f2">+    def get_base_mac(self):</span>
<span class="f2">+        &quot;&quot;&quot;</span>
<span class="f2">+        Retrieves the base MAC address for the module</span>
<span class="f2">+</span>
<span class="f2">+        Returns:</span>
<span class="f2">+            A string containing the MAC address in the format</span>
<span class="f2">+            'XX:XX:XX:XX:XX:XX'</span>
<span class="f2">+        &quot;&quot;&quot;</span>
<span class="f2">+        # In OT-KVM, individual modules doesn't have MAC address</span>
<span class="f2">+        return '00:00:00:00:00:00'</span>
<span class="f2">+</span>
<span class="f2">+    def get_system_eeprom_info(self):</span>
<span class="f2">+        &quot;&quot;&quot;</span>
<span class="f2">+        Retrieves the full content of system EEPROM information for the module</span>
<span class="f2">+</span>
<span class="f2">+        Returns:</span>
<span class="f2">+            A dictionary where keys are the type code defined in</span>
<span class="f2">+            OCP ONIE TlvInfo EEPROM format and values are their corresponding</span>
<span class="f2">+            values.</span>
<span class="f2">+            Ex. { '0x21':'AG9064', '0x22':'V1.0', '0x23':'AG9064-0109867821',</span>
<span class="f2">+                  '0x24':'001c0f000fcd0a', '0x25':'02/03/2018 16:22:00',</span>
<span class="f2">+                  '0x26':'01', '0x27':'REV01', '0x28':'AG9064-C2358-16G'}</span>
<span class="f2">+        &quot;&quot;&quot;</span>
<span class="f2">+        return None</span>
<span class="f2">+</span>
<span class="f2">+    def get_name(self):</span>
<span class="f2">+        &quot;&quot;&quot;</span>
<span class="f2">+        Retrieves the name of the device</span>
<span class="f2">+</span>
<span class="f2">+        Returns:</span>
<span class="f2">+            string: The name of the device</span>
<span class="f2">+        &quot;&quot;&quot;</span>
<span class="f2">+        return self.CHASSIS_MODULES[self.index][0]</span>
<span class="f2">+</span>
<span class="f2">+    def get_description(self):</span>
<span class="f2">+        &quot;&quot;&quot;</span>
<span class="f2">+        Retrieves the platform vendor's product description of the module</span>
<span class="f2">+</span>
<span class="f2">+        Returns:</span>
<span class="f2">+            A string, providing the vendor's product description of the module.</span>
<span class="f2">+        &quot;&quot;&quot;</span>
<span class="f2">+        return self.CHASSIS_MODULES[self.index][1]</span>
<span class="f2">+</span>
<span class="f2">+    def get_slot(self):</span>
<span class="f2">+        &quot;&quot;&quot;</span>
<span class="f2">+        Retrieves the platform vendor's slot number of the module</span>
<span class="f2">+</span>
<span class="f2">+        Returns:</span>
<span class="f2">+            An integer, indicating the slot number in the chassis</span>
<span class="f2">+        &quot;&quot;&quot;</span>
<span class="f2">+        return self.index + 1</span>
<span class="f2">+</span>
<span class="f2">+    def get_type(self):</span>
<span class="f2">+        &quot;&quot;&quot;</span>
<span class="f2">+        Retrieves the type of the module.</span>
<span class="f2">+</span>
<span class="f2">+        Returns:</span>
<span class="f2">+            A string, the module-type from one of the predefined types:</span>
<span class="f2">+            MODULE_TYPE_SUPERVISOR, MODULE_TYPE_LINE or MODULE_TYPE_FABRIC</span>
<span class="f2">+        &quot;&quot;&quot;</span>
<span class="f2">+        return ModuleBase.MODULE_TYPE_LINE</span>
<span class="f2">+</span>
<span class="f2">+    def get_oper_status(self):</span>
<span class="f2">+        &quot;&quot;&quot;</span>
<span class="f2">+        Retrieves the operational status of the module</span>
<span class="f2">+</span>
<span class="f2">+        Returns:</span>
<span class="f2">+            A string, the operational status of the module from one of the</span>
<span class="f2">+            predefined status values: MODULE_STATUS_EMPTY, MODULE_STATUS_OFFLINE,</span>
<span class="f2">+            MODULE_STATUS_FAULT, MODULE_STATUS_PRESENT or MODULE_STATUS_ONLINE</span>
<span class="f2">+        &quot;&quot;&quot;</span>
<span class="f2">+        return self.MODULE_STATUS_PRESENT</span>
<span class="f2">+</span>
<span class="f2">+    def reboot(self, reboot_type):</span>
<span class="f2">+        &quot;&quot;&quot;</span>
<span class="f2">+        Request to reboot the module</span>
<span class="f2">+</span>
<span class="f2">+        Args:</span>
<span class="f2">+            reboot_type: A string, the type of reboot requested from one of the</span>
<span class="f2">+            predefined reboot types: MODULE_REBOOT_DEFAULT, MODULE_REBOOT_CPU_COMPLEX,</span>
<span class="f2">+            or MODULE_REBOOT_FPGA_COMPLEX</span>
<span class="f2">+</span>
<span class="f2">+        Returns:</span>
<span class="f2">+            bool: True if the request has been issued successfully, False if not</span>
<span class="f2">+        &quot;&quot;&quot;</span>
<span class="f2">+        return ModuleBase.MODULE_REBOOT_DEFAULT</span>
<span class="f2">+</span>
<span class="f2">+</span>
<span class="f2">+    def set_admin_state(self, up):</span>
<span class="f2">+        &quot;&quot;&quot;</span>
<span class="f2">+        Request to keep the card in administratively up/down state.</span>
<span class="f2">+        The down state will power down the module and the status should show</span>
<span class="f2">+        MODULE_STATUS_OFFLINE.</span>
<span class="f2">+        The up state will take the module to MODULE_STATUS_FAULT or</span>
<span class="f2">+        MODULE_STAUS_ONLINE states.</span>
<span class="f2">+</span>
<span class="f2">+        Args:</span>
<span class="f2">+            up: A boolean, True to set the admin-state to UP. False to set the</span>
<span class="f2">+            admin-state to DOWN.</span>
<span class="f2">+</span>
<span class="f2">+        Returns:</span>
<span class="f2">+            bool: True if the request has been issued successfully, False if not</span>
<span class="f2">+        &quot;&quot;&quot;</span>
<span class="f2">+        return False</span>
<span class="f2">+</span>
<span class="f2">+    def get_maximum_consumed_power(self):</span>
<span class="f2">+        &quot;&quot;&quot;</span>
<span class="f2">+        Retrives the maximum power drawn by this module</span>
<span class="f2">+</span>
<span class="f2">+        Returns:</span>
<span class="f2">+            A float, with value of the maximum consumable power of the</span>
<span class="f2">+            module.</span>
<span class="f2">+        &quot;&quot;&quot;</span>
<span class="f2">+        return 97.23</span>
<span class="f2">+</span>
<span class="f2">+</span>
<span class="f2">+</span>
<span class="f2">+</span>
<span class="bold">diff --git a/platform/molex/sonic-platform-modules-ot-kvm/ols-v/sonic_platform/platform.py b/platform/molex/sonic-platform-modules-ot-kvm/ols-v/sonic_platform/platform.py</span>
<span class="bold">new file mode 100644</span>
<span class="bold">index 000000000..94ad639f3</span>
<span class="bold">--- /dev/null</span>
<span class="bold">+++ b/platform/molex/sonic-platform-modules-ot-kvm/ols-v/sonic_platform/platform.py</span>
<span class="f6">@@ -0,0 +1,25 @@</span>
<span class="f2">+#!/usr/bin/env python</span>
<span class="f2">+</span>
<span class="f2">+#############################################################################</span>
<span class="f2">+#</span>
<span class="f2">+# Module contains an implementation of SONiC Platform Base API and</span>
<span class="f2">+# provides the platform information</span>
<span class="f2">+#</span>
<span class="f2">+#############################################################################</span>
<span class="f2">+</span>
<span class="f2">+try:</span>
<span class="f2">+    from sonic_platform_base.platform_base import PlatformBase</span>
<span class="f2">+    from sonic_platform.chassis import Chassis</span>
<span class="f2">+except ImportError as e:</span>
<span class="f2">+    raise ImportError(str(e) + &quot;- required module not found&quot;)</span>
<span class="f2">+</span>
<span class="f2">+</span>
<span class="f2">+class Platform(PlatformBase):</span>
<span class="f2">+    &quot;&quot;&quot;</span>
<span class="f2">+    OT-KVM Platform-specific class</span>
<span class="f2">+    &quot;&quot;&quot;</span>
<span class="f2">+</span>
<span class="f2">+    def __init__(self):</span>
<span class="f2">+        PlatformBase.__init__(self)</span>
<span class="f2">+        self._chassis = Chassis()</span>
<span class="f2">+</span>
<span class="bold">diff --git a/platform/molex/sonic-platform-modules-ot-kvm/ols-v/sonic_platform/psu.py b/platform/molex/sonic-platform-modules-ot-kvm/ols-v/sonic_platform/psu.py</span>
<span class="bold">new file mode 100644</span>
<span class="bold">index 000000000..8ab25a7fe</span>
<span class="bold">--- /dev/null</span>
<span class="bold">+++ b/platform/molex/sonic-platform-modules-ot-kvm/ols-v/sonic_platform/psu.py</span>
<span class="f6">@@ -0,0 +1,242 @@</span>
<span class="f2">+#!/usr/bin/env python</span>
<span class="f2">+</span>
<span class="f2">+########################################################################</span>
<span class="f2">+# OT-KVM</span>
<span class="f2">+#</span>
<span class="f2">+# Module contains an implementation of SONiC Platform Base API and</span>
<span class="f2">+# provides the PSUs' information which are available in the platform</span>
<span class="f2">+#</span>
<span class="f2">+########################################################################</span>
<span class="f2">+</span>
<span class="f2">+</span>
<span class="f2">+try:</span>
<span class="f2">+    import os</span>
<span class="f2">+    from sonic_platform_base.device_base import DeviceBase</span>
<span class="f2">+    from sonic_platform_base.psu_base import PsuBase</span>
<span class="f2">+    from sonic_platform.fan import Fan</span>
<span class="f2">+except ImportError as e:</span>
<span class="f2">+    raise ImportError(str(e) + &quot;- required module not found&quot;)</span>
<span class="f2">+</span>
<span class="f2">+</span>
<span class="f2">+class Psu(PsuBase):</span>
<span class="f2">+    &quot;&quot;&quot;OT-KVM Platform-specific PSU class&quot;&quot;&quot;</span>
<span class="f2">+</span>
<span class="f2">+    def __init__(self, psu_index):</span>
<span class="f2">+        PsuBase.__init__(self)</span>
<span class="f2">+        # PSU is 1-based in OT-KVM platforms</span>
<span class="f2">+        self.index = psu_index + 1</span>
<span class="f2">+</span>
<span class="f2">+        # Passing True to specify it is a PSU fan</span>
<span class="f2">+        psu_fan = Fan(psu_index=self.index, psu_fan=True)</span>
<span class="f2">+        self._fan_list.append(psu_fan)</span>
<span class="f2">+</span>
<span class="f2">+    def get_voltage(self):</span>
<span class="f2">+        &quot;&quot;&quot;</span>
<span class="f2">+        Retrieves current PSU voltage output</span>
<span class="f2">+</span>
<span class="f2">+        Returns:</span>
<span class="f2">+            A float number, the output voltage in volts,</span>
<span class="f2">+            e.g. 12.1</span>
<span class="f2">+        &quot;&quot;&quot;</span>
<span class="f2">+        psu_voltage = 12.00</span>
<span class="f2">+</span>
<span class="f2">+        return psu_voltage</span>
<span class="f2">+</span>
<span class="f2">+    def get_current(self):</span>
<span class="f2">+        &quot;&quot;&quot;</span>
<span class="f2">+        Retrieves present electric current supplied by PSU</span>
<span class="f2">+</span>
<span class="f2">+        Returns:</span>
<span class="f2">+            A float number, electric current in amperes,</span>
<span class="f2">+            e.g. 15.4</span>
<span class="f2">+        &quot;&quot;&quot;</span>
<span class="f2">+        psu_current = 5.5</span>
<span class="f2">+</span>
<span class="f2">+        return psu_current</span>
<span class="f2">+</span>
<span class="f2">+    def get_power(self):</span>
<span class="f2">+        &quot;&quot;&quot;</span>
<span class="f2">+        Retrieves current energy supplied by PSU</span>
<span class="f2">+</span>
<span class="f2">+        Returns:</span>
<span class="f2">+            A float number, the power in watts,</span>
<span class="f2">+            e.g. 302.6</span>
<span class="f2">+        &quot;&quot;&quot;</span>
<span class="f2">+        psu_power = 66.0</span>
<span class="f2">+</span>
<span class="f2">+        return psu_power</span>
<span class="f2">+</span>
<span class="f2">+    def get_powergood_status(self):</span>
<span class="f2">+        &quot;&quot;&quot;</span>
<span class="f2">+        Retrieves the powergood status of PSU</span>
<span class="f2">+</span>
<span class="f2">+        Returns:</span>
<span class="f2">+            A boolean, True if PSU has stablized its output voltages and</span>
<span class="f2">+            passed all its internal self-tests, False if not.</span>
<span class="f2">+        &quot;&quot;&quot;</span>
<span class="f2">+        status = True</span>
<span class="f2">+</span>
<span class="f2">+        return status</span>
<span class="f2">+</span>
<span class="f2">+    def set_status_led(self, color):</span>
<span class="f2">+        &quot;&quot;&quot;</span>
<span class="f2">+        Sets the state of the PSU status LED</span>
<span class="f2">+        Args:</span>
<span class="f2">+            color: A string representing the color with which to set the</span>
<span class="f2">+                   PSU status LED</span>
<span class="f2">+        Returns:</span>
<span class="f2">+            bool: True if status LED state is set successfully, False if</span>
<span class="f2">+                  not</span>
<span class="f2">+        &quot;&quot;&quot;</span>
<span class="f2">+        # In OT-KVM, SmartFusion FPGA controls the PSU LED and the PSU</span>
<span class="f2">+        # LED state cannot be changed from CPU.</span>
<span class="f2">+        return True</span>
<span class="f2">+</span>
<span class="f2">+    def get_status_led(self):</span>
<span class="f2">+        &quot;&quot;&quot;</span>
<span class="f2">+        Gets the state of the PSU status LED</span>
<span class="f2">+</span>
<span class="f2">+        Returns:</span>
<span class="f2">+            A string, one of the predefined STATUS_LED_COLOR_* strings.</span>
<span class="f2">+        &quot;&quot;&quot;</span>
<span class="f2">+        return DeviceBase.STATUS_LED_COLOR_GREEN</span>
<span class="f2">+</span>
<span class="f2">+    def get_temperature(self):</span>
<span class="f2">+        &quot;&quot;&quot;</span>
<span class="f2">+        Retrieves current temperature reading from PSU</span>
<span class="f2">+</span>
<span class="f2">+        Returns:</span>
<span class="f2">+            A float number of current temperature in Celsius up to</span>
<span class="f2">+            nearest thousandth of one degree Celsius, e.g. 30.125</span>
<span class="f2">+        &quot;&quot;&quot;</span>
<span class="f2">+        temperature = 25.1</span>
<span class="f2">+</span>
<span class="f2">+        return temperature</span>
<span class="f2">+</span>
<span class="f2">+    def get_temperature_high_threshold(self):</span>
<span class="f2">+        &quot;&quot;&quot;</span>
<span class="f2">+        Retrieves the high threshold temperature of PSU</span>
<span class="f2">+</span>
<span class="f2">+        Returns:</span>
<span class="f2">+            A float number, the high threshold temperature of PSU in</span>
<span class="f2">+            Celsius up to nearest thousandth of one degree Celsius,</span>
<span class="f2">+            e.g. 30.125</span>
<span class="f2">+        &quot;&quot;&quot;</span>
<span class="f2">+        return 90.0</span>
<span class="f2">+</span>
<span class="f2">+    def get_voltage_high_threshold(self):</span>
<span class="f2">+        &quot;&quot;&quot;</span>
<span class="f2">+        Retrieves the high threshold PSU voltage output</span>
<span class="f2">+</span>
<span class="f2">+        Returns:</span>
<span class="f2">+            A float number, the high threshold output voltage in volts,</span>
<span class="f2">+            e.g. 12.1</span>
<span class="f2">+        &quot;&quot;&quot;</span>
<span class="f2">+        voltage_high_threshold = 12.5</span>
<span class="f2">+</span>
<span class="f2">+        return voltage_high_threshold</span>
<span class="f2">+</span>
<span class="f2">+    def get_voltage_low_threshold(self):</span>
<span class="f2">+        &quot;&quot;&quot;</span>
<span class="f2">+        Retrieves the low threshold PSU voltage output</span>
<span class="f2">+</span>
<span class="f2">+        Returns:</span>
<span class="f2">+            A float number, the low threshold output voltage in volts,</span>
<span class="f2">+            e.g. 12.1</span>
<span class="f2">+        &quot;&quot;&quot;</span>
<span class="f2">+        voltage_low_threshold = 11.5</span>
<span class="f2">+</span>
<span class="f2">+        return voltage_low_threshold</span>
<span class="f2">+</span>
<span class="f2">+    def get_maximum_supplied_power(self):</span>
<span class="f2">+        &quot;&quot;&quot;</span>
<span class="f2">+        Retrieves the maximum supplied power by PSU</span>
<span class="f2">+</span>
<span class="f2">+        Returns:</span>
<span class="f2">+            A float number, the maximum power output in Watts.</span>
<span class="f2">+            e.g. 1200.1</span>
<span class="f2">+        &quot;&quot;&quot;</span>
<span class="f2">+        psu_maxpower = 120.0</span>
<span class="f2">+</span>
<span class="f2">+        return psu_maxpower</span>
<span class="f2">+</span>
<span class="f2">+    def get_psu_power_warning_suppress_threshold(self):</span>
<span class="f2">+        &quot;&quot;&quot;</span>
<span class="f2">+        Retrieve the warning suppress threshold of the power on this PSU</span>
<span class="f2">+        The value can be volatile, so the caller should call the API each time it is used.</span>
<span class="f2">+</span>
<span class="f2">+        Returns:</span>
<span class="f2">+            A float number, the warning suppress threshold of the PSU in watts.</span>
<span class="f2">+        &quot;&quot;&quot;</span>
<span class="f2">+        return 120.0</span>
<span class="f2">+</span>
<span class="f2">+    def get_psu_power_critical_threshold(self):</span>
<span class="f2">+        &quot;&quot;&quot;</span>
<span class="f2">+        Retrieve the critical threshold of the power on this PSU</span>
<span class="f2">+        The value can be volatile, so the caller should call the API each time it is used.</span>
<span class="f2">+</span>
<span class="f2">+        Returns:</span>
<span class="f2">+            A float number, the critical threshold of the PSU in watts.</span>
<span class="f2">+        &quot;&quot;&quot;</span>
<span class="f2">+        return 120.0</span>
<span class="f2">+</span>
<span class="f2">+    def get_input_voltage(self):</span>
<span class="f2">+        &quot;&quot;&quot;</span>
<span class="f2">+        Retrieves current PSU voltage input</span>
<span class="f2">+</span>
<span class="f2">+        Returns:</span>
<span class="f2">+            A float number, the input voltage in volts,</span>
<span class="f2">+            e.g. 12.1</span>
<span class="f2">+        &quot;&quot;&quot;</span>
<span class="f2">+        return 12.1</span>
<span class="f2">+</span>
<span class="f2">+    def get_input_current(self):</span>
<span class="f2">+        &quot;&quot;&quot;</span>
<span class="f2">+        Retrieves the input current draw of the power supply</span>
<span class="f2">+</span>
<span class="f2">+        Returns:</span>
<span class="f2">+            A float number, the electric current in amperes, e.g 15.4</span>
<span class="f2">+        &quot;&quot;&quot;</span>
<span class="f2">+        return 6.1</span>
<span class="f2">+</span>
<span class="f2">+    def get_presence(self):</span>
<span class="f2">+        &quot;&quot;&quot;</span>
<span class="f2">+        Retrieves the presence of the Power Supply Unit (PSU)</span>
<span class="f2">+</span>
<span class="f2">+        Returns:</span>
<span class="f2">+            bool: True if PSU is present, False if not</span>
<span class="f2">+        &quot;&quot;&quot;</span>
<span class="f2">+        return True</span>
<span class="f2">+</span>
<span class="f2">+    def get_model(self):</span>
<span class="f2">+        &quot;&quot;&quot;</span>
<span class="f2">+        Retrieves the part number of the PSU</span>
<span class="f2">+</span>
<span class="f2">+        Returns:</span>
<span class="f2">+            string: Part number of PSU</span>
<span class="f2">+        &quot;&quot;&quot;</span>
<span class="f2">+        # For Serial number &quot;US-01234D-54321-25A-0123-A00&quot;, the part</span>
<span class="f2">+        # number is &quot;01234D&quot;</span>
<span class="f2">+        psu_partno = '01234D'</span>
<span class="f2">+        return psu_partno</span>
<span class="f2">+</span>
<span class="f2">+    def get_serial(self):</span>
<span class="f2">+        &quot;&quot;&quot;</span>
<span class="f2">+        Retrieves the serial number of the PSU</span>
<span class="f2">+</span>
<span class="f2">+        Returns:</span>
<span class="f2">+            string: Serial number of PSU</span>
<span class="f2">+        &quot;&quot;&quot;</span>
<span class="f2">+        # Sample Serial number format &quot;US-01234D-54321-25A-0123-A00&quot;</span>
<span class="f2">+        psu_serialno = 'OLS-V-PSU-01234D-{}-A0'.format(self.index)</span>
<span class="f2">+        return psu_serialno</span>
<span class="f2">+</span>
<span class="f2">+    def get_revision(self):</span>
<span class="f2">+        &quot;&quot;&quot;</span>
<span class="f2">+        Retrieves the hardware revision of the device</span>
<span class="f2">+</span>
<span class="f2">+        Returns:</span>
<span class="f2">+            string: Revision value of device</span>
<span class="f2">+        &quot;&quot;&quot;</span>
<span class="f2">+        psu_rev = 'A0'</span>
<span class="f2">+        return psu_rev</span>
\ No newline at end of file
<span class="bold">diff --git a/platform/molex/sonic-platform-modules-ot-kvm/ols-v/sonic_platform/sfp.py b/platform/molex/sonic-platform-modules-ot-kvm/ols-v/sonic_platform/sfp.py</span>
<span class="bold">new file mode 100644</span>
<span class="bold">index 000000000..f9bfc8e7d</span>
<span class="bold">--- /dev/null</span>
<span class="bold">+++ b/platform/molex/sonic-platform-modules-ot-kvm/ols-v/sonic_platform/sfp.py</span>
<span class="f6">@@ -0,0 +1,365 @@</span>
<span class="f2">+#!/usr/bin/env python</span>
<span class="f2">+</span>
<span class="f2">+#############################################################################</span>
<span class="f2">+# OT-KVM</span>
<span class="f2">+#</span>
<span class="f2">+# Module contains an implementation of SONiC Platform Base API and</span>
<span class="f2">+# provides the platform information</span>
<span class="f2">+#</span>
<span class="f2">+#############################################################################</span>
<span class="f2">+</span>
<span class="f2">+try:</span>
<span class="f2">+    import os</span>
<span class="f2">+    import syslog</span>
<span class="f2">+    import time</span>
<span class="f2">+    from sonic_platform_base.sfp_base import SfpBase</span>
<span class="f2">+except ImportError as e:</span>
<span class="f2">+    raise ImportError(str(e) + &quot;- required module not found&quot;)</span>
<span class="f2">+</span>
<span class="f2">+QSFP_INFO_OFFSET = 128</span>
<span class="f2">+</span>
<span class="f2">+</span>
<span class="f2">+class Sfp(SfpBase):</span>
<span class="f2">+    &quot;&quot;&quot;</span>
<span class="f2">+    OT-KVM Platform-specific Sfp class</span>
<span class="f2">+    &quot;&quot;&quot;</span>
<span class="f2">+</span>
<span class="f2">+    def __init__(self, index):</span>
<span class="f2">+        SfpBase.__init__(self)</span>
<span class="f2">+        self.index = index + 1</span>
<span class="f2">+</span>
<span class="f2">+    def get_transceiver_info(self):</span>
<span class="f2">+        &quot;&quot;&quot;</span>
<span class="f2">+        Retrieves transceiver info of this SFP</span>
<span class="f2">+</span>
<span class="f2">+        Returns:</span>
<span class="f2">+            A dict which contains following keys/values :</span>
<span class="f2">+        ================================================================================</span>
<span class="f2">+        keys                       |Value Format   |Information</span>
<span class="f2">+        ---------------------------|---------------|----------------------------</span>
<span class="f2">+        type                       |1*255VCHAR     |type of SFP</span>
<span class="f2">+        type_abbrv_name            |1*255VCHAR     |type of SFP, abbreviated</span>
<span class="f2">+        hardware_rev               |1*255VCHAR     |hardware version of SFP</span>
<span class="f2">+        vendor_rev                 |1*255VCHAR     |vendor revision of SFP</span>
<span class="f2">+        serial                     |1*255VCHAR     |serial number of the SFP</span>
<span class="f2">+        manufacturer               |1*255VCHAR     |SFP vendor name</span>
<span class="f2">+        model                      |1*255VCHAR     |SFP model name</span>
<span class="f2">+        connector                  |1*255VCHAR     |connector information</span>
<span class="f2">+        encoding                   |1*255VCHAR     |encoding information</span>
<span class="f2">+        ext_identifier             |1*255VCHAR     |extend identifier</span>
<span class="f2">+        ext_rateselect_compliance  |1*255VCHAR     |extended rateSelect compliance</span>
<span class="f2">+        cable_length               |INT            |cable length in m</span>
<span class="f2">+        nominal_bit_rate           |INT            |nominal bit rate by 100Mbs</span>
<span class="f2">+        specification_compliance   |1*255VCHAR     |specification compliance</span>
<span class="f2">+        vendor_date                |1*255VCHAR     |vendor date</span>
<span class="f2">+        vendor_oui                 |1*255VCHAR     |vendor OUI</span>
<span class="f2">+        application_advertisement  |1*255VCHAR     |supported applications advertisement</span>
<span class="f2">+        ================================================================================</span>
<span class="f2">+        &quot;&quot;&quot;</span>
<span class="f2">+        return None</span>
<span class="f2">+</span>
<span class="f2">+    def get_transceiver_bulk_status(self):</span>
<span class="f2">+        &quot;&quot;&quot;</span>
<span class="f2">+        Retrieves transceiver bulk status of this SFP</span>
<span class="f2">+</span>
<span class="f2">+        Returns:</span>
<span class="f2">+            A dict which contains following keys/values :</span>
<span class="f2">+        ========================================================================</span>
<span class="f2">+        keys                       |Value Format   |Information</span>
<span class="f2">+        ---------------------------|---------------|----------------------------</span>
<span class="f2">+        rx_los                     |BOOLEAN        |RX loss-of-signal status, True if has RX los, False if not.</span>
<span class="f2">+        tx_fault                   |BOOLEAN        |TX fault status, True if has TX fault, False if not.</span>
<span class="f2">+        reset_status               |BOOLEAN        |reset status, True if SFP in reset, False if not.</span>
<span class="f2">+        lp_mode                    |BOOLEAN        |low power mode status, True in lp mode, False if not.</span>
<span class="f2">+        tx_disable                 |BOOLEAN        |TX disable status, True TX disabled, False if not.</span>
<span class="f2">+        tx_disabled_channel        |HEX            |disabled TX channels in hex, bits 0 to 3 represent channel 0</span>
<span class="f2">+                                   |               |to channel 3.</span>
<span class="f2">+        temperature                |INT            |module temperature in Celsius</span>
<span class="f2">+        voltage                    |INT            |supply voltage in mV</span>
<span class="f2">+        tx&lt;n&gt;bias                  |INT            |TX Bias Current in mA, n is the channel number,</span>
<span class="f2">+                                   |               |for example, tx2bias stands for tx bias of channel 2.</span>
<span class="f2">+        rx&lt;n&gt;power                 |INT            |received optical power in mW, n is the channel number,</span>
<span class="f2">+                                   |               |for example, rx2power stands for rx power of channel 2.</span>
<span class="f2">+        tx&lt;n&gt;power                 |INT            |TX output power in mW, n is the channel number,</span>
<span class="f2">+                                   |               |for example, tx2power stands for tx power of channel 2.</span>
<span class="f2">+        ========================================================================</span>
<span class="f2">+        &quot;&quot;&quot;</span>
<span class="f2">+        return None</span>
<span class="f2">+</span>
<span class="f2">+    def get_transceiver_threshold_info(self):</span>
<span class="f2">+        &quot;&quot;&quot;</span>
<span class="f2">+        Retrieves transceiver threshold info of this SFP</span>
<span class="f2">+</span>
<span class="f2">+        Returns:</span>
<span class="f2">+            A dict which contains following keys/values :</span>
<span class="f2">+        ========================================================================</span>
<span class="f2">+        keys                       |Value Format   |Information</span>
<span class="f2">+        ---------------------------|---------------|----------------------------</span>
<span class="f2">+        temphighalarm              |FLOAT          |High Alarm Threshold value of temperature in Celsius.</span>
<span class="f2">+        templowalarm               |FLOAT          |Low Alarm Threshold value of temperature in Celsius.</span>
<span class="f2">+        temphighwarning            |FLOAT          |High Warning Threshold value of temperature in Celsius.</span>
<span class="f2">+        templowwarning             |FLOAT          |Low Warning Threshold value of temperature in Celsius.</span>
<span class="f2">+        vcchighalarm               |FLOAT          |High Alarm Threshold value of supply voltage in mV.</span>
<span class="f2">+        vcclowalarm                |FLOAT          |Low Alarm Threshold value of supply voltage in mV.</span>
<span class="f2">+        vcchighwarning             |FLOAT          |High Warning Threshold value of supply voltage in mV.</span>
<span class="f2">+        vcclowwarning              |FLOAT          |Low Warning Threshold value of supply voltage in mV.</span>
<span class="f2">+        rxpowerhighalarm           |FLOAT          |High Alarm Threshold value of received power in dBm.</span>
<span class="f2">+        rxpowerlowalarm            |FLOAT          |Low Alarm Threshold value of received power in dBm.</span>
<span class="f2">+        rxpowerhighwarning         |FLOAT          |High Warning Threshold value of received power in dBm.</span>
<span class="f2">+        rxpowerlowwarning          |FLOAT          |Low Warning Threshold value of received power in dBm.</span>
<span class="f2">+        txpowerhighalarm           |FLOAT          |High Alarm Threshold value of transmit power in dBm.</span>
<span class="f2">+        txpowerlowalarm            |FLOAT          |Low Alarm Threshold value of transmit power in dBm.</span>
<span class="f2">+        txpowerhighwarning         |FLOAT          |High Warning Threshold value of transmit power in dBm.</span>
<span class="f2">+        txpowerlowwarning          |FLOAT          |Low Warning Threshold value of transmit power in dBm.</span>
<span class="f2">+        txbiashighalarm            |FLOAT          |High Alarm Threshold value of tx Bias Current in mA.</span>
<span class="f2">+        txbiaslowalarm             |FLOAT          |Low Alarm Threshold value of tx Bias Current in mA.</span>
<span class="f2">+        txbiashighwarning          |FLOAT          |High Warning Threshold value of tx Bias Current in mA.</span>
<span class="f2">+        txbiaslowwarning           |FLOAT          |Low Warning Threshold value of tx Bias Current in mA.</span>
<span class="f2">+        ========================================================================</span>
<span class="f2">+        &quot;&quot;&quot;</span>
<span class="f2">+        return None</span>
<span class="f2">+</span>
<span class="f2">+    def get_reset_status(self):</span>
<span class="f2">+        &quot;&quot;&quot;</span>
<span class="f2">+        Retrieves the reset status of SFP</span>
<span class="f2">+</span>
<span class="f2">+        Returns:</span>
<span class="f2">+            A Boolean, True if reset enabled, False if disabled</span>
<span class="f2">+        &quot;&quot;&quot;</span>
<span class="f2">+        return True</span>
<span class="f2">+</span>
<span class="f2">+    def get_rx_los(self):</span>
<span class="f2">+        &quot;&quot;&quot;</span>
<span class="f2">+        Retrieves the RX LOS (loss-of-signal) status of SFP</span>
<span class="f2">+</span>
<span class="f2">+        Returns:</span>
<span class="f2">+            A list of boolean values, representing the RX LOS status</span>
<span class="f2">+            of each available channel, value is True if SFP channel</span>
<span class="f2">+            has RX LOS, False if not.</span>
<span class="f2">+            E.g., for a tranceiver with four channels: [False, False, True, False]</span>
<span class="f2">+            Note : RX LOS status is latched until a call to get_rx_los or a reset.</span>
<span class="f2">+        &quot;&quot;&quot;</span>
<span class="f2">+        return [True, True, True, True]</span>
<span class="f2">+</span>
<span class="f2">+    def get_tx_fault(self):</span>
<span class="f2">+        &quot;&quot;&quot;</span>
<span class="f2">+        Retrieves the TX fault status of SFP</span>
<span class="f2">+</span>
<span class="f2">+        Returns:</span>
<span class="f2">+            A list of boolean values, representing the TX fault status</span>
<span class="f2">+            of each available channel, value is True if SFP channel</span>
<span class="f2">+            has TX fault, False if not.</span>
<span class="f2">+            E.g., for a tranceiver with four channels: [False, False, True, False]</span>
<span class="f2">+            Note : TX fault status is lached until a call to get_tx_fault or a reset.</span>
<span class="f2">+        &quot;&quot;&quot;</span>
<span class="f2">+        return [True, True, True, True]</span>
<span class="f2">+</span>
<span class="f2">+    def get_tx_disable(self):</span>
<span class="f2">+        &quot;&quot;&quot;</span>
<span class="f2">+        Retrieves the tx_disable status of this SFP</span>
<span class="f2">+</span>
<span class="f2">+        Returns:</span>
<span class="f2">+            A list of boolean values, representing the TX disable status</span>
<span class="f2">+            of each available channel, value is True if SFP channel</span>
<span class="f2">+            is TX disabled, False if not.</span>
<span class="f2">+            E.g., for a tranceiver with four channels: [False, False, True, False]</span>
<span class="f2">+        &quot;&quot;&quot;</span>
<span class="f2">+        return [True, True, True, True]</span>
<span class="f2">+</span>
<span class="f2">+    def get_tx_disable_channel(self):</span>
<span class="f2">+        &quot;&quot;&quot;</span>
<span class="f2">+        Retrieves the TX disabled channels in this SFP</span>
<span class="f2">+</span>
<span class="f2">+        Returns:</span>
<span class="f2">+            A hex of 4 bits (bit 0 to bit 3 as channel 0 to channel 3) to represent</span>
<span class="f2">+            TX channels which have been disabled in this SFP.</span>
<span class="f2">+            As an example, a returned value of 0x5 indicates that channel 0</span>
<span class="f2">+            and channel 2 have been disabled.</span>
<span class="f2">+        &quot;&quot;&quot;</span>
<span class="f2">+        return 0x5</span>
<span class="f2">+</span>
<span class="f2">+    def get_lpmode(self):</span>
<span class="f2">+        &quot;&quot;&quot;</span>
<span class="f2">+        Retrieves the lpmode (low power mode) status of this SFP</span>
<span class="f2">+</span>
<span class="f2">+        Returns:</span>
<span class="f2">+            A Boolean, True if lpmode is enabled, False if disabled</span>
<span class="f2">+        &quot;&quot;&quot;</span>
<span class="f2">+        return True</span>
<span class="f2">+</span>
<span class="f2">+    def get_power_override(self):</span>
<span class="f2">+        &quot;&quot;&quot;</span>
<span class="f2">+        Retrieves the power-override status of this SFP</span>
<span class="f2">+</span>
<span class="f2">+        Returns:</span>
<span class="f2">+            A Boolean, True if power-override is enabled, False if disabled</span>
<span class="f2">+        &quot;&quot;&quot;</span>
<span class="f2">+        return True</span>
<span class="f2">+</span>
<span class="f2">+    def get_temperature(self):</span>
<span class="f2">+        &quot;&quot;&quot;</span>
<span class="f2">+        Retrieves the temperature of this SFP</span>
<span class="f2">+</span>
<span class="f2">+        Returns:</span>
<span class="f2">+            A float representing the current temperature in Celsius</span>
<span class="f2">+        &quot;&quot;&quot;</span>
<span class="f2">+        return 40.5</span>
<span class="f2">+</span>
<span class="f2">+</span>
<span class="f2">+    def get_voltage(self):</span>
<span class="f2">+        &quot;&quot;&quot;</span>
<span class="f2">+        Retrieves the supply voltage of this SFP</span>
<span class="f2">+</span>
<span class="f2">+        Returns:</span>
<span class="f2">+            A float representing the supply voltage in mV</span>
<span class="f2">+        &quot;&quot;&quot;</span>
<span class="f2">+        return 5001.1</span>
<span class="f2">+</span>
<span class="f2">+    def get_tx_bias(self):</span>
<span class="f2">+        &quot;&quot;&quot;</span>
<span class="f2">+        Retrieves the TX bias current of all SFP channels</span>
<span class="f2">+</span>
<span class="f2">+        Returns:</span>
<span class="f2">+            A list of floats, representing TX bias in mA</span>
<span class="f2">+            for each available channel</span>
<span class="f2">+            E.g., for a tranceiver with four channels: ['110.09', '111.12', '108.21', '112.09']</span>
<span class="f2">+        &quot;&quot;&quot;</span>
<span class="f2">+        return ['110.09', '111.12', '108.21', '112.09']</span>
<span class="f2">+</span>
<span class="f2">+    def get_rx_power(self):</span>
<span class="f2">+        &quot;&quot;&quot;</span>
<span class="f2">+        Retrieves the received optical power of all SFP channels</span>
<span class="f2">+</span>
<span class="f2">+        Returns:</span>
<span class="f2">+            A list of floats, representing received optical</span>
<span class="f2">+            power in mW for each available channel</span>
<span class="f2">+            E.g., for a tranceiver with four channels: ['1.77', '1.71', '1.68', '1.70']</span>
<span class="f2">+        &quot;&quot;&quot;</span>
<span class="f2">+        return ['1.77', '1.71', '1.68', '1.70']</span>
<span class="f2">+</span>
<span class="f2">+    def get_tx_power(self):</span>
<span class="f2">+        &quot;&quot;&quot;</span>
<span class="f2">+        Retrieves the TX power of all SFP channels</span>
<span class="f2">+</span>
<span class="f2">+        Returns:</span>
<span class="f2">+            A list of floats, representing TX power in mW</span>
<span class="f2">+            for each available channel</span>
<span class="f2">+            E.g., for a tranceiver with four channels: ['1.86', '1.86', '1.86', '1.86']</span>
<span class="f2">+        &quot;&quot;&quot;</span>
<span class="f2">+        return ['1.86', '1.86', '1.86', '1.86']</span>
<span class="f2">+</span>
<span class="f2">+    def reset(self):</span>
<span class="f2">+        &quot;&quot;&quot;</span>
<span class="f2">+        Reset SFP and return all user module settings to their default srate.</span>
<span class="f2">+</span>
<span class="f2">+        Returns:</span>
<span class="f2">+            A boolean, True if successful, False if not</span>
<span class="f2">+        &quot;&quot;&quot;</span>
<span class="f2">+        return True</span>
<span class="f2">+</span>
<span class="f2">+    def tx_disable(self, tx_disable):</span>
<span class="f2">+        &quot;&quot;&quot;</span>
<span class="f2">+        Disable SFP TX for all channels</span>
<span class="f2">+</span>
<span class="f2">+        Args:</span>
<span class="f2">+            tx_disable : A Boolean, True to enable tx_disable mode, False to disable</span>
<span class="f2">+                         tx_disable mode.</span>
<span class="f2">+</span>
<span class="f2">+        Returns:</span>
<span class="f2">+            A boolean, True if tx_disable is set successfully, False if not</span>
<span class="f2">+        &quot;&quot;&quot;</span>
<span class="f2">+        return True</span>
<span class="f2">+</span>
<span class="f2">+    def tx_disable_channel(self, channel, disable):</span>
<span class="f2">+        &quot;&quot;&quot;</span>
<span class="f2">+        Sets the tx_disable for specified SFP channels</span>
<span class="f2">+</span>
<span class="f2">+        Args:</span>
<span class="f2">+            channel : A hex of 4 bits (bit 0 to bit 3) which represent channel 0 to 3,</span>
<span class="f2">+                      e.g. 0x5 for channel 0 and channel 2.</span>
<span class="f2">+            disable : A boolean, True to disable TX channels specified in channel,</span>
<span class="f2">+                      False to enable</span>
<span class="f2">+</span>
<span class="f2">+        Returns:</span>
<span class="f2">+            A boolean, True if successful, False if not</span>
<span class="f2">+        &quot;&quot;&quot;</span>
<span class="f2">+        return True</span>
<span class="f2">+</span>
<span class="f2">+    def set_lpmode(self, lpmode):</span>
<span class="f2">+        &quot;&quot;&quot;</span>
<span class="f2">+        Sets the lpmode (low power mode) of SFP</span>
<span class="f2">+</span>
<span class="f2">+        Args:</span>
<span class="f2">+            lpmode: A Boolean, True to enable lpmode, False to disable it</span>
<span class="f2">+            Note  : lpmode can be overridden by set_power_override</span>
<span class="f2">+</span>
<span class="f2">+        Returns:</span>
<span class="f2">+            A boolean, True if lpmode is set successfully, False if not</span>
<span class="f2">+        &quot;&quot;&quot;</span>
<span class="f2">+        return True</span>
<span class="f2">+</span>
<span class="f2">+    def set_power_override(self, power_override, power_set):</span>
<span class="f2">+        &quot;&quot;&quot;</span>
<span class="f2">+        Sets SFP power level using power_override and power_set</span>
<span class="f2">+</span>
<span class="f2">+        Args:</span>
<span class="f2">+            power_override :</span>
<span class="f2">+                    A Boolean, True to override set_lpmode and use power_set</span>
<span class="f2">+                    to control SFP power, False to disable SFP power control</span>
<span class="f2">+                    through power_override/power_set and use set_lpmode</span>
<span class="f2">+                    to control SFP power.</span>
<span class="f2">+            power_set :</span>
<span class="f2">+                    Only valid when power_override is True.</span>
<span class="f2">+                    A Boolean, True to set SFP to low power mode, False to set</span>
<span class="f2">+                    SFP to high power mode.</span>
<span class="f2">+</span>
<span class="f2">+        Returns:</span>
<span class="f2">+            A boolean, True if power-override and power_set are set successfully,</span>
<span class="f2">+            False if not</span>
<span class="f2">+        &quot;&quot;&quot;</span>
<span class="f2">+        return True</span>
<span class="f2">+</span>
<span class="f2">+    def read_eeprom(self, offset, num_bytes):</span>
<span class="f2">+        &quot;&quot;&quot;</span>
<span class="f2">+        read eeprom specfic bytes beginning from a random offset with size as num_bytes</span>
<span class="f2">+</span>
<span class="f2">+        Args:</span>
<span class="f2">+             offset :</span>
<span class="f2">+                     Integer, the offset from which the read transaction will start</span>
<span class="f2">+             num_bytes:</span>
<span class="f2">+                     Integer, the number of bytes to be read</span>
<span class="f2">+</span>
<span class="f2">+        Returns:</span>
<span class="f2">+            bytearray, if raw sequence of bytes are read correctly from the offset of size num_bytes</span>
<span class="f2">+            None, if the read_eeprom fails</span>
<span class="f2">+        &quot;&quot;&quot;</span>
<span class="f2">+        return None</span>
<span class="f2">+</span>
<span class="f2">+    def write_eeprom(self, offset, num_bytes, write_buffer):</span>
<span class="f2">+        &quot;&quot;&quot;</span>
<span class="f2">+        write eeprom specfic bytes beginning from a random offset with size as num_bytes</span>
<span class="f2">+        and write_buffer as the required bytes</span>
<span class="f2">+</span>
<span class="f2">+        Args:</span>
<span class="f2">+             offset :</span>
<span class="f2">+                     Integer, the offset from which the read transaction will start</span>
<span class="f2">+             num_bytes:</span>
<span class="f2">+                     Integer, the number of bytes to be written</span>
<span class="f2">+             write_buffer:</span>
<span class="f2">+                     bytearray, raw bytes buffer which is to be written beginning at the offset</span>
<span class="f2">+</span>
<span class="f2">+        Returns:</span>
<span class="f2">+            a Boolean, true if the write succeeded and false if it did not succeed.</span>
<span class="f2">+        &quot;&quot;&quot;</span>
<span class="f2">+        return True</span>
<span class="f2">+</span>
<span class="f2">+    def get_error_description(self):</span>
<span class="f2">+        &quot;&quot;&quot;</span>
<span class="f2">+        Retrives the error descriptions of the SFP module</span>
<span class="f2">+</span>
<span class="f2">+        Returns:</span>
<span class="f2">+            String that represents the current error descriptions of vendor specific errors</span>
<span class="f2">+            In case there are multiple errors, they should be joined by '|',</span>
<span class="f2">+            like: &quot;Bad EEPROM|Unsupported cable&quot;</span>
<span class="f2">+        &quot;&quot;&quot;</span>
<span class="f2">+        return &quot;Bad EEPROM|Unsupported cable&quot;</span>
<span class="bold">diff --git a/platform/molex/sonic-platform-modules-ot-kvm/ols-v/sonic_platform/thermal.py b/platform/molex/sonic-platform-modules-ot-kvm/ols-v/sonic_platform/thermal.py</span>
<span class="bold">new file mode 100644</span>
<span class="bold">index 000000000..24ddd9350</span>
<span class="bold">--- /dev/null</span>
<span class="bold">+++ b/platform/molex/sonic-platform-modules-ot-kvm/ols-v/sonic_platform/thermal.py</span>
<span class="f6">@@ -0,0 +1,161 @@</span>
<span class="f2">+#!/usr/bin/env python</span>
<span class="f2">+</span>
<span class="f2">+########################################################################</span>
<span class="f2">+# OT-KVM</span>
<span class="f2">+#</span>
<span class="f2">+# Module contains an implementation of SONiC Platform Base API and</span>
<span class="f2">+# provides the Thermals' information which are available in the platform</span>
<span class="f2">+#</span>
<span class="f2">+########################################################################</span>
<span class="f2">+</span>
<span class="f2">+</span>
<span class="f2">+try:</span>
<span class="f2">+    import os</span>
<span class="f2">+    from sonic_platform_base.thermal_base import ThermalBase</span>
<span class="f2">+except ImportError as e:</span>
<span class="f2">+    raise ImportError(str(e) + &quot;- required module not found&quot;)</span>
<span class="f2">+</span>
<span class="f2">+</span>
<span class="f2">+class Thermal(ThermalBase):</span>
<span class="f2">+    &quot;&quot;&quot;OT-KVM Platform-specific Thermal class&quot;&quot;&quot;</span>
<span class="f2">+</span>
<span class="f2">+    THERMAL_NAME = (</span>
<span class="f2">+        'CPU On-board', 'ASIC On-board Front', 'System Front',</span>
<span class="f2">+        'ASIC On-board Rear', 'Front GE board', 'Front SFP+ board',</span>
<span class="f2">+        'CPU Core 0', 'CPU Core 1', 'CPU Core 2', 'CPU Core 3'</span>
<span class="f2">+        )</span>
<span class="f2">+</span>
<span class="f2">+    def __init__(self, thermal_index):</span>
<span class="f2">+        ThermalBase.__init__(self)</span>
<span class="f2">+</span>
<span class="f2">+    def get_temperature(self):</span>
<span class="f2">+        &quot;&quot;&quot;</span>
<span class="f2">+        Retrieves current temperature reading from thermal</span>
<span class="f2">+</span>
<span class="f2">+        Returns:</span>
<span class="f2">+            A float number of current temperature in Celsius up to</span>
<span class="f2">+            nearest thousandth of one degree Celsius, e.g. 30.125</span>
<span class="f2">+        &quot;&quot;&quot;</span>
<span class="f2">+        thermal_temperature = 30125</span>
<span class="f2">+        return thermal_temperature / 1000.0</span>
<span class="f2">+</span>
<span class="f2">+    def get_high_threshold(self):</span>
<span class="f2">+        &quot;&quot;&quot;</span>
<span class="f2">+        Retrieves the high threshold temperature of thermal</span>
<span class="f2">+</span>
<span class="f2">+        Returns:</span>
<span class="f2">+            A float number, the high threshold temperature of thermal in</span>
<span class="f2">+            Celsius up to nearest thousandth of one degree Celsius,</span>
<span class="f2">+            e.g. 30.125</span>
<span class="f2">+        &quot;&quot;&quot;</span>
<span class="f2">+        thermal_high_threshold = 70125</span>
<span class="f2">+        return thermal_high_threshold / 1000.0</span>
<span class="f2">+</span>
<span class="f2">+    def get_low_threshold(self):</span>
<span class="f2">+        &quot;&quot;&quot;</span>
<span class="f2">+        Retrieves the low threshold temperature of thermal</span>
<span class="f2">+</span>
<span class="f2">+        Returns:</span>
<span class="f2">+            A float number, the low threshold temperature of thermal in</span>
<span class="f2">+            Celsius up to nearest thousandth of one degree Celsius,</span>
<span class="f2">+            e.g. 30.125</span>
<span class="f2">+        &quot;&quot;&quot;</span>
<span class="f2">+        thermal_low_threshold = 10125</span>
<span class="f2">+        return thermal_low_threshold / 1000.0</span>
<span class="f2">+</span>
<span class="f2">+    def set_high_threshold(self, temperature):</span>
<span class="f2">+        &quot;&quot;&quot;</span>
<span class="f2">+        Sets the high threshold temperature of thermal</span>
<span class="f2">+</span>
<span class="f2">+        Args :</span>
<span class="f2">+            temperature: A float number up to nearest thousandth of one</span>
<span class="f2">+            degree Celsius, e.g. 30.125</span>
<span class="f2">+        Returns:</span>
<span class="f2">+            A boolean, True if threshold is set successfully, False if</span>
<span class="f2">+            not</span>
<span class="f2">+        &quot;&quot;&quot;</span>
<span class="f2">+        # Thermal threshold values are pre-defined based on HW.</span>
<span class="f2">+        return False</span>
<span class="f2">+</span>
<span class="f2">+    def set_low_threshold(self, temperature):</span>
<span class="f2">+        &quot;&quot;&quot;</span>
<span class="f2">+        Sets the low threshold temperature of thermal</span>
<span class="f2">+</span>
<span class="f2">+        Args :</span>
<span class="f2">+            temperature: A float number up to nearest thousandth of one</span>
<span class="f2">+            degree Celsius, e.g. 30.125</span>
<span class="f2">+        Returns:</span>
<span class="f2">+            A boolean, True if threshold is set successfully, False if</span>
<span class="f2">+            not</span>
<span class="f2">+        &quot;&quot;&quot;</span>
<span class="f2">+        # Thermal threshold values are pre-defined based on HW.</span>
<span class="f2">+        return False</span>
<span class="f2">+</span>
<span class="f2">+    def get_high_critical_threshold(self):</span>
<span class="f2">+        &quot;&quot;&quot;</span>
<span class="f2">+        Retrieves the high critical threshold temperature of thermal</span>
<span class="f2">+</span>
<span class="f2">+        Returns:</span>
<span class="f2">+            A float number, the high critical threshold temperature of</span>
<span class="f2">+            thermal in Celsius up to nearest thousandth of one degree</span>
<span class="f2">+            Celsius, e.g. 30.125</span>
<span class="f2">+        &quot;&quot;&quot;</span>
<span class="f2">+        thermal_high_crit_threshold = 80125</span>
<span class="f2">+</span>
<span class="f2">+        return thermal_high_crit_threshold / 1000.0</span>
<span class="f2">+</span>
<span class="f2">+    def get_low_critical_threshold(self):</span>
<span class="f2">+        &quot;&quot;&quot;</span>
<span class="f2">+        Retrieves the low critical threshold temperature of thermal</span>
<span class="f2">+</span>
<span class="f2">+        Returns:</span>
<span class="f2">+            A float number, the low critical threshold temperature of thermal in Celsius</span>
<span class="f2">+            up to nearest thousandth of one degree Celsius, e.g. 30.125</span>
<span class="f2">+        &quot;&quot;&quot;</span>
<span class="f2">+        return 5.125</span>
<span class="f2">+</span>
<span class="f2">+    def set_high_critical_threshold(self, temperature):</span>
<span class="f2">+        &quot;&quot;&quot;</span>
<span class="f2">+        Sets the critical high threshold temperature of thermal</span>
<span class="f2">+</span>
<span class="f2">+        Args :</span>
<span class="f2">+            temperature: A float number up to nearest thousandth of one degree Celsius,</span>
<span class="f2">+            e.g. 30.125</span>
<span class="f2">+</span>
<span class="f2">+        Returns:</span>
<span class="f2">+            A boolean, True if threshold is set successfully, False if not</span>
<span class="f2">+        &quot;&quot;&quot;</span>
<span class="f2">+        return True</span>
<span class="f2">+</span>
<span class="f2">+    def set_low_critical_threshold(self, temperature):</span>
<span class="f2">+        &quot;&quot;&quot;</span>
<span class="f2">+        Sets the critical low threshold temperature of thermal</span>
<span class="f2">+</span>
<span class="f2">+        Args :</span>
<span class="f2">+            temperature: A float number up to nearest thousandth of one degree Celsius,</span>
<span class="f2">+            e.g. 30.125</span>
<span class="f2">+</span>
<span class="f2">+        Returns:</span>
<span class="f2">+            A boolean, True if threshold is set successfully, False if not</span>
<span class="f2">+        &quot;&quot;&quot;</span>
<span class="f2">+        return True</span>
<span class="f2">+</span>
<span class="f2">+    def get_minimum_recorded(self):</span>
<span class="f2">+        &quot;&quot;&quot;</span>
<span class="f2">+        Retrieves the minimum recorded temperature of thermal</span>
<span class="f2">+</span>
<span class="f2">+        Returns:</span>
<span class="f2">+            A float number, the minimum recorded temperature of thermal in Celsius</span>
<span class="f2">+            up to nearest thousandth of one degree Celsius, e.g. 30.125</span>
<span class="f2">+        &quot;&quot;&quot;</span>
<span class="f2">+        return 10.125</span>
<span class="f2">+</span>
<span class="f2">+    def get_maximum_recorded(self):</span>
<span class="f2">+        &quot;&quot;&quot;</span>
<span class="f2">+        Retrieves the maximum recorded temperature of thermal</span>
<span class="f2">+</span>
<span class="f2">+        Returns:</span>
<span class="f2">+            A float number, the maximum recorded temperature of thermal in Celsius</span>
<span class="f2">+            up to nearest thousandth of one degree Celsius, e.g. 30.125</span>
<span class="f2">+        &quot;&quot;&quot;</span>
<span class="f2">+        return 70.125</span>
\ No newline at end of file
<span class="bold">diff --git a/platform/molex/sonic-platform-modules-ot-kvm/ols-v/sonic_platform/watchdog.py b/platform/molex/sonic-platform-modules-ot-kvm/ols-v/sonic_platform/watchdog.py</span>
<span class="bold">new file mode 100644</span>
<span class="bold">index 000000000..3b9bcacbb</span>
<span class="bold">--- /dev/null</span>
<span class="bold">+++ b/platform/molex/sonic-platform-modules-ot-kvm/ols-v/sonic_platform/watchdog.py</span>
<span class="f6">@@ -0,0 +1,70 @@</span>
<span class="f2">+########################################################################</span>
<span class="f2">+#</span>
<span class="f2">+# OT-KVM</span>
<span class="f2">+#</span>
<span class="f2">+# Abstract base class for implementing a platform-specific class with</span>
<span class="f2">+# which to interact with a hardware watchdog module in SONiC</span>
<span class="f2">+#</span>
<span class="f2">+########################################################################</span>
<span class="f2">+</span>
<span class="f2">+try:</span>
<span class="f2">+    from sonic_platform_base.watchdog_base import WatchdogBase</span>
<span class="f2">+except ImportError as e:</span>
<span class="f2">+    raise ImportError(str(e) + &quot;- required module not found&quot;)</span>
<span class="f2">+</span>
<span class="f2">+</span>
<span class="f2">+class Watchdog(WatchdogBase):</span>
<span class="f2">+    &quot;&quot;&quot;</span>
<span class="f2">+    Abstract base class for interfacing with a hardware watchdog module</span>
<span class="f2">+    &quot;&quot;&quot;</span>
<span class="f2">+</span>
<span class="f2">+    def __init__(self):</span>
<span class="f2">+        print(&quot;INFO: Watchdog __init__&quot;)</span>
<span class="f2">+</span>
<span class="f2">+    def arm(self, seconds):</span>
<span class="f2">+        &quot;&quot;&quot;</span>
<span class="f2">+        Arm the hardware watchdog with a timeout of &lt;seconds&gt; seconds.</span>
<span class="f2">+        If the watchdog is currently armed, calling this function will</span>
<span class="f2">+        simply reset the timer to the provided value. If the underlying</span>
<span class="f2">+        hardware does not support the value provided in &lt;seconds&gt;, this</span>
<span class="f2">+        method should arm the watchdog with the *next greater* available</span>
<span class="f2">+        value.</span>
<span class="f2">+</span>
<span class="f2">+        Returns:</span>
<span class="f2">+            An integer specifying the *actual* number of seconds the watchdog</span>
<span class="f2">+            was armed with. On failure returns -1.</span>
<span class="f2">+        &quot;&quot;&quot;</span>
<span class="f2">+        print(&quot;ERROR: Platform did not implement arm()&quot;)</span>
<span class="f2">+        return -1</span>
<span class="f2">+</span>
<span class="f2">+    def disarm(self):</span>
<span class="f2">+        &quot;&quot;&quot;</span>
<span class="f2">+        Disarm the hardware watchdog</span>
<span class="f2">+</span>
<span class="f2">+        Returns:</span>
<span class="f2">+            A boolean, True if watchdog is disarmed successfully, False if not</span>
<span class="f2">+        &quot;&quot;&quot;</span>
<span class="f2">+        print(&quot;ERROR: Platform did not implement disarm()&quot;)</span>
<span class="f2">+        return False</span>
<span class="f2">+</span>
<span class="f2">+    def is_armed(self):</span>
<span class="f2">+        &quot;&quot;&quot;</span>
<span class="f2">+        Retrieves the armed state of the hardware watchdog.</span>
<span class="f2">+</span>
<span class="f2">+        Returns:</span>
<span class="f2">+            A boolean, True if watchdog is armed, False if not</span>
<span class="f2">+        &quot;&quot;&quot;</span>
<span class="f2">+        print(&quot;ERROR: Platform did not implement is_armed()&quot;)</span>
<span class="f2">+        return False</span>
<span class="f2">+</span>
<span class="f2">+    def get_remaining_time(self):</span>
<span class="f2">+        &quot;&quot;&quot;</span>
<span class="f2">+        If the watchdog is armed, retrieve the number of seconds remaining on</span>
<span class="f2">+        the watchdog timer</span>
<span class="f2">+</span>
<span class="f2">+        Returns:</span>
<span class="f2">+            An integer specifying the number of seconds remaining on thei</span>
<span class="f2">+            watchdog timer. If the watchdog is not armed, returns -1.</span>
<span class="f2">+        &quot;&quot;&quot;</span>
<span class="f2">+        print(&quot;ERROR: Platform did not implement get_remaining_time()&quot;)</span>
<span class="f2">+        return -1</span>
<span class="bold">diff --git a/platform/molex/sonic-version.dep b/platform/molex/sonic-version.dep</span>
<span class="bold">new file mode 100644</span>
<span class="bold">index 000000000..1398415bd</span>
<span class="bold">--- /dev/null</span>
<span class="bold">+++ b/platform/molex/sonic-version.dep</span>
<span class="f6">@@ -0,0 +1,2 @@</span>
<span class="f2">+#DPKG FRK</span>
<span class="f2">+$(SONIC_VERSION)_CACHE_MODE  := none</span>
<span class="bold">diff --git a/platform/molex/sonic-version.mk b/platform/molex/sonic-version.mk</span>
<span class="bold">new file mode 100644</span>
<span class="bold">index 000000000..9e2157322</span>
<span class="bold">--- /dev/null</span>
<span class="bold">+++ b/platform/molex/sonic-version.mk</span>
<span class="f6">@@ -0,0 +1,13 @@</span>
<span class="f2">+# sonic version yml file</span>
<span class="f2">+</span>
<span class="f2">+sonic_version=$(SONIC_GET_VERSION)</span>
<span class="f2">+sonic_asic_platform=$(CONFIGURED_PLATFORM)</span>
<span class="f2">+</span>
<span class="f2">+export sonic_version</span>
<span class="f2">+export sonic_asic_platform</span>
<span class="f2">+</span>
<span class="f2">+SONIC_VERSION = sonic_version.yml</span>
<span class="f2">+$(SONIC_VERSION)_SRC_PATH = $(PLATFORM_PATH)/sonic-version</span>
<span class="f2">+SONIC_MAKE_FILES += $(SONIC_VERSION)</span>
<span class="f2">+</span>
<span class="f2">+SONIC_PHONY_TARGETS += $(addprefix $(FILES_PATH)/, $(SONIC_VERSION))</span>
<span class="bold">diff --git a/platform/molex/sonic-version/Makefile b/platform/molex/sonic-version/Makefile</span>
<span class="bold">new file mode 100644</span>
<span class="bold">index 000000000..2b2386031</span>
<span class="bold">--- /dev/null</span>
<span class="bold">+++ b/platform/molex/sonic-version/Makefile</span>
<span class="f6">@@ -0,0 +1,10 @@</span>
<span class="f2">+.ONESHELL:</span>
<span class="f2">+SHELL = /bin/bash</span>
<span class="f2">+.SHELLFLAGS += -e</span>
<span class="f2">+</span>
<span class="f2">+MAIN_TARGET = sonic_version.yml</span>
<span class="f2">+</span>
<span class="f2">+$(addprefix $(DEST)/, $(MAIN_TARGET)): $(DEST)/% :</span>
<span class="f2">+</span>	<span class="f2">./build_sonic_version.sh $(MAIN_TARGET)</span>
<span class="f2">+</span>
<span class="f2">+</span>	<span class="f2">mv $(MAIN_TARGET) $(DEST)/</span>
<span class="bold">diff --git a/platform/molex/sonic-version/build_sonic_version.sh b/platform/molex/sonic-version/build_sonic_version.sh</span>
<span class="bold">new file mode 100755</span>
<span class="bold">index 000000000..2e3d5c42f</span>
<span class="bold">--- /dev/null</span>
<span class="bold">+++ b/platform/molex/sonic-version/build_sonic_version.sh</span>
<span class="f6">@@ -0,0 +1,8 @@</span>
<span class="f2">+export build_version=&quot;${sonic_version}&quot;</span>
<span class="f2">+export asic_type=&quot;${sonic_asic_platform}&quot;</span>
<span class="f2">+export commit_id=&quot;$(git rev-parse --short HEAD)&quot;</span>
<span class="f2">+export branch=&quot;$(git rev-parse --abbrev-ref HEAD)&quot;</span>
<span class="f2">+export build_date=&quot;$(date -u)&quot;</span>
<span class="f2">+export build_number=&quot;${BUILD_NUMBER:-0}&quot;</span>
<span class="f2">+export built_by=&quot;$USER@$BUILD_HOSTNAME&quot;</span>
<span class="f2">+j2 sonic_version.yml.j2 &gt; $1</span>
<span class="bold">diff --git a/platform/molex/sonic-version/sonic_version.yml.j2 b/platform/molex/sonic-version/sonic_version.yml.j2</span>
<span class="bold">new file mode 120000</span>
<span class="bold">index 000000000..2bbebeb22</span>
<span class="bold">--- /dev/null</span>
<span class="bold">+++ b/platform/molex/sonic-version/sonic_version.yml.j2</span>
<span class="f6">@@ -0,0 +1 @@</span>
<span class="f2">+../../../files/build_templates/sonic_version.yml.j2</span>
\ No newline at end of file
<span class="bold">diff --git a/platform/molex/sonic.xml b/platform/molex/sonic.xml</span>
<span class="bold">new file mode 100644</span>
<span class="bold">index 000000000..88620dc5f</span>
<span class="bold">--- /dev/null</span>
<span class="bold">+++ b/platform/molex/sonic.xml</span>
<span class="f6">@@ -0,0 +1,48 @@</span>
<span class="f2">+&lt;domain type='kvm' xmlns:qemu='http://libvirt.org/schemas/domain/qemu/1.0'&gt;</span>
<span class="f2">+  &lt;name&gt;sonic&lt;/name&gt;</span>
<span class="f2">+  &lt;memory unit='KiB'&gt;2048000&lt;/memory&gt;</span>
<span class="f2">+  &lt;currentMemory unit='KiB'&gt;2048000&lt;/currentMemory&gt;</span>
<span class="f2">+  &lt;vcpu placement='static'&gt;4&lt;/vcpu&gt;</span>
<span class="f2">+  &lt;resource&gt;</span>
<span class="f2">+    &lt;partition&gt;/machine&lt;/partition&gt;</span>
<span class="f2">+  &lt;/resource&gt;</span>
<span class="f2">+  &lt;os&gt;</span>
<span class="f2">+    &lt;type arch='x86_64' machine='pc-i440fx-1.5'&gt;hvm&lt;/type&gt;</span>
<span class="f2">+    &lt;boot dev='hd'/&gt;</span>
<span class="f2">+  &lt;/os&gt;</span>
<span class="f2">+  &lt;features&gt;</span>
<span class="f2">+    &lt;acpi/&gt;</span>
<span class="f2">+    &lt;apic/&gt;</span>
<span class="f2">+  &lt;/features&gt;</span>
<span class="f2">+  &lt;clock offset='utc'/&gt;</span>
<span class="f2">+  &lt;on_poweroff&gt;destroy&lt;/on_poweroff&gt;</span>
<span class="f2">+  &lt;on_reboot&gt;restart&lt;/on_reboot&gt;</span>
<span class="f2">+  &lt;on_crash&gt;restart&lt;/on_crash&gt;</span>
<span class="f2">+  &lt;devices&gt;</span>
<span class="f2">+    &lt;emulator&gt;/usr/bin/qemu-system-x86_64&lt;/emulator&gt;</span>
<span class="f2">+    &lt;disk type='file' device='disk'&gt;</span>
<span class="f2">+      &lt;driver name='qemu' type='qcow2' cache='writeback'/&gt;</span>
<span class="f2">+      &lt;source file='/home/jikeyu/sonic-buildimage/target/sonic-vs.img'/&gt;</span>
<span class="f2">+      &lt;target bus='virtio' dev='vda'/&gt;</span>
<span class="f2">+    &lt;/disk&gt;</span>
<span class="f2">+    &lt;serial type='tcp'&gt;</span>
<span class="f2">+      &lt;source host='127.0.0.1' mode='bind' service='7000'/&gt;</span>
<span class="f2">+      &lt;target port='0'/&gt;</span>
<span class="f2">+      &lt;protocol type='telnet'/&gt;</span>
<span class="f2">+    &lt;/serial&gt;</span>
<span class="f2">+    &lt;interface type='user'&gt;</span>
<span class="f2">+        &lt;model type='e1000' /&gt;</span>
<span class="f2">+    &lt;/interface&gt;</span>
<span class="f2">+    &lt;interface type='ethernet' /&gt;</span>
<span class="f2">+    &lt;controller type='usb' index='0'/&gt;</span>
<span class="f2">+    &lt;memballoon model='virtio'&gt;</span>
<span class="f2">+      &lt;alias name='balloon0'/&gt;</span>
<span class="f2">+      &lt;address type='pci' domain='0x0000' bus='0x00' slot='0x04' function='0x0'/&gt;</span>
<span class="f2">+    &lt;/memballoon&gt;</span>
<span class="f2">+  &lt;/devices&gt;</span>
<span class="f2">+  &lt;seclabel type='dynamic' model='apparmor' relabel='yes'/&gt;</span>
<span class="f2">+  &lt;qemu:commandline&gt;</span>
<span class="f2">+   &lt;qemu:arg value='-net'/&gt;</span>
<span class="f2">+   &lt;qemu:arg value='user,hostfwd=tcp:127.0.0.1:3040-:22'/&gt;</span>
<span class="f2">+  &lt;/qemu:commandline&gt;</span><span class="b1"> </span>
<span class="f2">+&lt;/domain&gt;</span>
<span class="bold">diff --git a/platform/ot-kvm/README.md b/platform/ot-kvm/README.md</span>
<span class="bold">new file mode 100644</span>
<span class="bold">index 000000000..9e6d6faa6</span>
<span class="bold">--- /dev/null</span>
<span class="bold">+++ b/platform/ot-kvm/README.md</span>
<span class="f6">@@ -0,0 +1,258 @@</span>
<span class="f2">+SONIC OT-KVM Demo Instructions</span>
<span class="f2">+--------</span>
<span class="f2">+</span>
<span class="f2">+A team at Molex is developing to expand SONiC's support to optical line system.</span><span class="b1"> </span>
<span class="f2">+</span>
<span class="f2">+This doc contains the procedure to run and test the SONiC-OT KVM image, the prototype the team currently has.</span>
<span class="f2">+</span>
<span class="f2">+## Environment</span>
<span class="f2">+1. Install Ubuntu KVM tools</span>
<span class="f2">+</span>
<span class="f2">+```bash</span>
<span class="f2">+sudo apt install qemu-kvm libvirt-daemon-system libvirt-clients bridge-utils virtinst virt-manager</span><span class="b1"> </span>
<span class="f2">+```</span>
<span class="f2">+</span>
<span class="f2">+2. Check CPU virtualization support</span>
<span class="f2">+</span>
<span class="f2">+```bash</span>
<span class="f2">+kvm-ok</span>
<span class="f2">+```</span>
<span class="f2">+checks KVM support.</span>
<span class="f2">+</span>
<span class="f2">+If the host itself is a VM as well,</span><span class="b1"> </span>
<span class="f2">+```bash</span>
<span class="f2">+cat /sys/module/kvm_&lt;cpu_brand&gt;/parameters/nested</span>
<span class="f2">+```</span>
<span class="f2">+checks nested virtualization support</span>
<span class="f2">+</span>
<span class="f2">+3. Copy the SONiC image to host. The package contains two files:</span>
<span class="f2">+    - sonic-ot-kvm.img.gz      --- compressed SONiC image</span><span class="b1"> </span>
<span class="f2">+    - sonic-ot-kvm.xml         --- virsh SONiC kvm config file</span>
<span class="f2">+</span>
<span class="f2">+4. Decompress the image</span>
<span class="f2">+```bash</span>
<span class="f2">+gunzip sonic-ot-kvm.img.gz</span>
<span class="f2">+```</span>
<span class="f2">+</span>
<span class="f2">+5. Customize fields of the config file per need</span>
<span class="f2">+</span>
<span class="f2">+In the xml config file, multiple fields, can be customized per need. This includs RAM, emulator path, SONiC image path, telnet port.</span><span class="b1"> </span>
<span class="f2">+```xml</span>
<span class="f2">+&lt;domain type='kvm' xmlns:qemu='http://libvirt.org/schemas/domain/qemu/1.0'&gt;</span>
<span class="f2">+  &lt;name&gt;sonic-ot-kvm&lt;/name&gt;</span>
<span class="f2">+  &lt;memory unit='KiB'&gt;2048000&lt;/memory&gt;</span>
<span class="f2">+  &lt;currentMemory unit='KiB'&gt;2048000&lt;/currentMemory&gt;</span>
<span class="f2">+  &lt;vcpu placement='static'&gt;4&lt;/vcpu&gt;</span>
<span class="f2">+  &lt;resource&gt;</span>
<span class="f2">+    &lt;partition&gt;/machine&lt;/partition&gt;</span>
<span class="f2">+  &lt;/resource&gt;</span>
<span class="f2">+  &lt;os&gt;</span>
<span class="f2">+    &lt;type arch='x86_64' machine='pc-i440fx-1.5'&gt;hvm&lt;/type&gt;</span>
<span class="f2">+    &lt;boot dev='hd'/&gt;</span>
<span class="f2">+  &lt;/os&gt;</span>
<span class="f2">+  &lt;features&gt;</span>
<span class="f2">+    &lt;acpi/&gt;</span>
<span class="f2">+    &lt;apic/&gt;</span>
<span class="f2">+  &lt;/features&gt;</span>
<span class="f2">+  &lt;clock offset='utc'/&gt;</span>
<span class="f2">+  &lt;on_poweroff&gt;destroy&lt;/on_poweroff&gt;</span>
<span class="f2">+  &lt;on_reboot&gt;restart&lt;/on_reboot&gt;</span>
<span class="f2">+  &lt;on_crash&gt;restart&lt;/on_crash&gt;</span>
<span class="f2">+  &lt;devices&gt;</span>
<span class="f2">+    &lt;emulator&gt;/usr/bin/qemu-system-x86_64&lt;/emulator&gt;</span>
<span class="f2">+    &lt;disk type='file' device='disk'&gt;</span>
<span class="f2">+      &lt;driver name='qemu' type='qcow2' cache='writeback'/&gt;</span>
<span class="f2">+      &lt;source file='/home/jikeyu/sonic-buildimage/target/sonic-vs.img'/&gt;</span>
<span class="f2">+      &lt;target bus='virtio' dev='vda'/&gt;</span>
<span class="f2">+    &lt;/disk&gt;</span>
<span class="f2">+    &lt;serial type='tcp'&gt;</span>
<span class="f2">+      &lt;source host='127.0.0.1' mode='bind' service='7000'/&gt;</span>
<span class="f2">+      &lt;target port='0'/&gt;</span>
<span class="f2">+      &lt;protocol type='telnet'/&gt;</span>
<span class="f2">+    &lt;/serial&gt;</span>
<span class="f2">+    &lt;interface type='user'&gt;</span>
<span class="f2">+        &lt;model type='e1000' /&gt;</span>
<span class="f2">+    &lt;/interface&gt;</span>
<span class="f2">+    &lt;interface type='ethernet' /&gt;</span>
<span class="f2">+    &lt;controller type='usb' index='0'/&gt;</span>
<span class="f2">+    &lt;memballoon model='virtio'&gt;</span>
<span class="f2">+      &lt;alias name='balloon0'/&gt;</span>
<span class="f2">+      &lt;address type='pci' domain='0x0000' bus='0x00' slot='0x04' function='0x0'/&gt;</span>
<span class="f2">+    &lt;/memballoon&gt;</span>
<span class="f2">+  &lt;/devices&gt;</span>
<span class="f2">+  &lt;seclabel type='dynamic' model='apparmor' relabel='yes'/&gt;</span>
<span class="f2">+  &lt;qemu:commandline&gt;</span>
<span class="f2">+   &lt;qemu:arg value='-net'/&gt;</span>
<span class="f2">+   &lt;qemu:arg value='user,hostfwd=tcp:127.0.0.1:3040-:22'/&gt;</span>
<span class="f2">+  &lt;/qemu:commandline&gt;</span><span class="b1"> </span>
<span class="f2">+&lt;/domain&gt;</span>
<span class="f2">+```</span>
<span class="f2">+</span>
<span class="f2">+## Running SONiC-OT KVM</span>
<span class="f2">+1. Create SONiC KVM</span>
<span class="f2">+</span>
<span class="f2">+Make sure the SONiC image file path in the config xml is correct.</span>
<span class="f2">+```bash</span>
<span class="f2">+sudo virsh create &lt;path-to-sonic-ot-kvm.xml&gt;</span>
<span class="f2">+```</span>
<span class="f2">+</span>
<span class="f2">+If you'd like to check if KVM has started, run</span>
<span class="f2">+```bash</span>
<span class="f2">+virsh list</span>
<span class="f2">+```</span>
<span class="f2">+</span>
<span class="f2">+2. Connect and login</span>
<span class="f2">+</span>
<span class="f2">+To connect to the SONiC KVM, run</span>
<span class="f2">+```bash</span>
<span class="f2">+telnet 127.0.0.1 7000</span>
<span class="f2">+```</span>
<span class="f2">+If you have changed the port in the config xml, use the correct port here.</span>
<span class="f2">+</span>
<span class="f2">+The username and password for the prototype image is admin and YourPaSsWoRd, which are the default of SONiC.</span>
<span class="f2">+</span>
<span class="f2">+3. Shutdown KVM SONiC</span>
<span class="f2">+</span>
<span class="f2">+If you would like to remote the KVM, run</span>
<span class="f2">+```bash</span>
<span class="f2">+sudo virsh destroy sonic-ot-kvm</span>
<span class="f2">+```</span>
<span class="f2">+If you have changed the name of the KVM in the config xml, use the correct name here.</span>
<span class="f2">+</span>
<span class="f2">+</span>
<span class="f2">+## CLI Support for Optical Line System</span>
<span class="f2">+In ```sonic-mgmt-framework```, we have added CLIs for openconfigoptical transport yang model. For now, it includes ```openconfig-optical-attenuator.yang``` and ```openconfig-optical-amplifier.yang```.</span><span class="b1"> </span>
<span class="f2">+</span>
<span class="f2">+Config data is stored in the relevant tables in CONFIG_DB (table 4) of Redis.</span>
<span class="f2">+</span>
<span class="f2">+### Features</span>
<span class="f2">+- Login CLI interface</span>
<span class="f2">+- Set/get attenuators</span>
<span class="f2">+- Set/get amplifier</span>
<span class="f2">+</span>
<span class="f2">+### Log in CLI</span>
<span class="f2">+The following operations are in SONiC.</span>
<span class="f2">+1. make sure mgmt-framework and olssyncd containers are up</span>
<span class="f2">+</span>
<span class="f2">+```bash</span>
<span class="f2">+docker ps -a</span>
<span class="f2">+```</span>
<span class="f2">+</span>
<span class="f2">+2. Enter the CLI via the shell of mgmt-framework container.</span>
<span class="f2">+</span>
<span class="f2">+```bash</span>
<span class="f2">+docker exec -it mgmt-framework bash</span>
<span class="f2">+/usr/sbin/cli/clish_start</span>
<span class="f2">+```</span>
<span class="f2">+</span>
<span class="f2">+3. In ```sonic#``` (read-only) mode, check config and status</span>
<span class="f2">+</span>
<span class="f2">+```</span>
<span class="f2">+show attenuator</span>
<span class="f2">+```</span>
<span class="f2">+</span>
<span class="f2">+4. Enter ```sonic(config)#``` mode</span>
<span class="f2">+</span>
<span class="f2">+```</span>
<span class="f2">+configure terminal</span>
<span class="f2">+amplifier ba apr-enable disable</span>
<span class="f2">+exit</span>
<span class="f2">+```</span>
<span class="f2">+```exit``` exits config mode and returns to ```sonic#``` mode.</span>
<span class="f2">+</span>
<span class="f2">+5. Return to bash</span>
<span class="f2">+```</span>
<span class="f2">+exit</span>
<span class="f2">+```</span>
<span class="f2">+</span>
<span class="f2">+### Commands</span>
<span class="f2">+```bash</span>
<span class="f2">+# in sonic# mode</span>
<span class="f2">+show attenuator</span>
<span class="f2">+show amplifier &lt;pa/ba&gt;</span>
<span class="f2">+```</span>
<span class="f2">+```bash</span>
<span class="f2">+# in sonic(config)# mode</span>
<span class="f2">+attenuator &lt;voa1/voa2&gt; attn &lt;value&gt;</span>
<span class="f2">+amplifier &lt;pa/ba&gt; enabled &lt;enable/disable&gt;</span>
<span class="f2">+amplifier &lt;pa/ba&gt; target-gain &lt;value&gt;</span>
<span class="f2">+amplifier &lt;pa/ba&gt; target-gain-tilt &lt;value&gt;</span>
<span class="f2">+amplifier &lt;pa/ba&gt; gain-range  &lt;low/mid/high/fixed&gt;</span>
<span class="f2">+amplifier &lt;pa/ba&gt; amp-mode &lt;constant-power/constant-gain&gt;</span>
<span class="f2">+```</span>
<span class="f2">+</span>
<span class="f2">+### Log</span>
<span class="f2">+```</span>
<span class="f2">+show logging</span>
<span class="f2">+```</span>
<span class="f2">+</span>
<span class="f2">+## REST API for Optical Support</span>
<span class="f2">+REST API follows RESTCONF protocol</span>
<span class="f2">+</span>
<span class="f2">+In ```sonic-mgmt-common```, REST APIs generated from openconfig optical transport yang model are added, including ```openconfig-optical-attenuator.yang``` and ```openconfig-optical-amplifier.yang```.</span>
<span class="f2">+</span>
<span class="f2">+### Feature</span>
<span class="f2">+- Support ```openconfig-optical-attenuator.yaml``` REST APIs</span>
<span class="f2">+- Support ```openconfig-optical-amplifier.yaml``` REST APIs</span>
<span class="f2">+</span>
<span class="f2">+## Redis</span>
<span class="f2">+We have added the following tables to support data of optical line system, based on openconfig optical transport yang models.</span><span class="b1"> </span>
<span class="f2">+- For CONFIG_DB (DB 4)</span>
<span class="f2">+  - ATTENUATOR_TABLE|VOA1</span>
<span class="f2">+  - ATTENUATOR_TABLE|VOA2</span>
<span class="f2">+  - AMPLIFIER_TABLE|PA</span>
<span class="f2">+  - AMPLIFIER_TABLE|BA</span>
<span class="f2">+- For STATE_DB (DB 6)</span>
<span class="f2">+  - ATTENUATOR_STATE_TABLE|VOA1</span>
<span class="f2">+  - ATTENUATOR_STATE_TABLE|VOA2</span>
<span class="f2">+  - AMPLIFIER_STATE_TABLE|PA</span>
<span class="f2">+  - AMPLIFIER_STATE_TABLE|BA</span>
<span class="f2">+</span>
<span class="f2">+### Redis debug</span>
<span class="f2">+One can directly use redis-cli to test olssyncd, without invoking the SONiC CLI</span>
<span class="f2">+```bash</span>
<span class="f2">+# Select the fourth redis db, which is the config_db</span><span class="b1"> </span>
<span class="f2">+select 4</span><span class="b1"> </span>
<span class="f2">+</span>
<span class="f2">+# Check current VOA1 config</span><span class="b1"> </span>
<span class="f2">+hgetall ATTENUATOR_TABLE|VOA1</span><span class="b1"> </span>
<span class="f2">+</span>
<span class="f2">+# Check current VOA2 config</span><span class="b1"> </span>
<span class="f2">+hgetall ATTENUATOR_TABLE|VOA2</span><span class="b1"> </span>
<span class="f2">+</span>
<span class="f2">+# Select the sixth redis db, which is the state_db</span><span class="b1"> </span>
<span class="f2">+select 6</span><span class="b1"> </span>
<span class="f2">+</span>
<span class="f2">+# Check current VOA1 state, the attn (almost) matches config</span><span class="b1"> </span>
<span class="f2">+hgetall ATTENUATOR_TABLE|VOA1</span><span class="b1"> </span>
<span class="f2">+</span>
<span class="f2">+# Check current VOA2 state, the attn (almost) matches config</span><span class="b1"> </span>
<span class="f2">+hgetall ATTENUATOR_TABLE|VOA2</span><span class="b1"> </span>
<span class="f2">+</span>
<span class="f2">+# Go back to config_db</span><span class="b1"> </span>
<span class="f2">+Select 4</span><span class="b1">  </span>
<span class="f2">+</span>
<span class="f2">+# Change VOA1 attn</span><span class="b1"> </span>
<span class="f2">+hset ATTENUATOR_TABLE|VOA1 attenuation &lt;new_value&gt;</span><span class="b1"> </span>
<span class="f2">+</span>
<span class="f2">+# Change VOA2 attn</span><span class="b1"> </span>
<span class="f2">+hset ATTENUATOR_TABLE|VOA2 attenuation &lt;new_value&gt;</span><span class="b1"> </span>
<span class="f2">+</span>
<span class="f2">+# Go to state_db</span><span class="b1"> </span>
<span class="f2">+Select 6</span><span class="b1"> </span>
<span class="f2">+</span>
<span class="f2">+# VOA1 attn config change is reflected in state</span><span class="b1"> </span>
<span class="f2">+hgetall ATTENUATOR_TABLE|VOA1</span><span class="b1"> </span>
<span class="f2">+</span>
<span class="f2">+# VOA2 attn config change is reflected in state</span><span class="b1"> </span>
<span class="f2">+hgetall ATTENUATOR_TABLE|VOA2</span>
<span class="f2">+```</span>
<span class="f2">+</span>
<span class="f2">+To further check the config has been received by the virtual hardware:</span>
<span class="f2">+```bash</span>
<span class="f2">+# enter olssyncd, invoke bash</span>
<span class="f2">+docker exec -it olssyncd bash</span>
<span class="f2">+</span>
<span class="f2">+# print out the virtual hardware's status</span>
<span class="f2">+cat /var/SPIOaConfig.json</span>
<span class="f2">+```</span>
<span class="bold">diff --git a/platform/ot-kvm/README.ot-kvm.md b/platform/ot-kvm/README.ot-kvm.md</span>
<span class="bold">new file mode 100644</span>
<span class="bold">index 000000000..878989890</span>
<span class="bold">--- /dev/null</span>
<span class="bold">+++ b/platform/ot-kvm/README.ot-kvm.md</span>
<span class="f6">@@ -0,0 +1,124 @@</span>
<span class="f2">+HOWTO Build OT-KVM image</span>
<span class="f2">+</span>
<span class="f2">+```</span>
<span class="f2">+make init</span>
<span class="f2">+make configure PLATFORM=ot-kvm</span>
<span class="f2">+make target/sonic-ot-kvm.img.gz</span>
<span class="f2">+```</span>
<span class="f2">+</span>
<span class="f2">+HOWTO Use Virtual Switch (VM)</span>
<span class="f2">+</span>
<span class="f2">+1. Install libvirt, kvm, qemu</span>
<span class="f2">+</span>
<span class="f2">+```</span>
<span class="f2">+sudo apt-get install libvirt-clients qemu-kvm libvirt-bin</span>
<span class="f2">+```</span>
<span class="f2">+</span>
<span class="f2">+2. Create SONiC VM for single ASIC HWSKU</span>
<span class="f2">+</span>
<span class="f2">+```</span>
<span class="f2">+$ sudo virsh</span>
<span class="f2">+Welcome to virsh, the virtualization interactive terminal.</span>
<span class="f2">+</span>
<span class="f2">+Type:  'help' for help with commands</span>
<span class="f2">+       'quit' to quit</span>
<span class="f2">+</span>
<span class="f2">+virsh #</span><span class="b1"> </span>
<span class="f2">+virsh # create sonic.xml</span>
<span class="f2">+Domain sonic created from sonic.xml</span>
<span class="f2">+</span>
<span class="f2">+virsh #</span><span class="b1"> </span>
<span class="f2">+```</span>
<span class="f2">+</span>
<span class="f2">+2. Create SONiC VM for multi-ASIC HWSKU</span>
<span class="f2">+</span>
<span class="f2">+- Based on the number of asics of hwsku, update device/x86_64-kvm_x86_64-r0/asic.conf</span><span class="b1"> </span>
<span class="f2">+```</span>
<span class="f2">+NUM_ASIC=&lt;n&gt;</span>
<span class="f2">+DEV_ID_ASIC_0=0</span>
<span class="f2">+DEV_ID_ASIC_1=1</span>
<span class="f2">+DEV_ID_ASIC_2=2</span>
<span class="f2">+DEV_ID_ASIC_3=3</span>
<span class="f2">+..</span>
<span class="f2">+DEV_ID_ASIC_&lt;n-1&gt;=&lt;n-1&gt;</span>
<span class="f2">+```</span>
<span class="f2">+For example, a four asic VS asic.conf will be:</span>
<span class="f2">+```</span>
<span class="f2">+NUM_ASIC=4</span>
<span class="f2">+DEV_ID_ASIC_0=0</span>
<span class="f2">+DEV_ID_ASIC_1=1</span>
<span class="f2">+DEV_ID_ASIC_2=2</span>
<span class="f2">+DEV_ID_ASIC_3=3</span>
<span class="f2">+```</span>
<span class="f2">+- Create a topology.sh script which will create the internal asic topology for</span>
<span class="f2">+the specific hwsku.</span>
<span class="f2">+For example, for msft_multi_asic_vs:</span>
<span class="f2">+https://github.com/Azure/sonic-buildimage/blob/master/device/virtual/x86_64-kvm_x86_64-r0/msft_multi_asic_vs/topology.sh</span>
<span class="f2">+</span>
<span class="f2">+- With the updated asic.conf and topology.sh, build sonic-vs.img which can be used to</span><span class="b1"> </span>
<span class="f2">+bring up multi-asic virtual switch.</span>
<span class="f2">+</span>
<span class="f2">+- Update platform/vs/sonic_multiasic.xml with higher memory and vcpu as required.</span>
<span class="f2">+  - For 4-asic vs platform msft_four_asic_vs hwsku, 8GB memory and 10vCPUs.</span>
<span class="f2">+  - For 7-ASIC vs platform msft_multi_asic_vs hwsku, 8GB and 16vCPUs.</span>
<span class="f2">+- Update the number of front-panel interfaces in sonic_multliasic.xml</span>
<span class="f2">+    - For 4-ASIC vs platform, 8 front panel interfaces.</span>
<span class="f2">+    - For 6-ASIC vs platform, 64 front panel interfaces.</span>
<span class="f2">+</span>
<span class="f2">+- With multi-asic sonic_vs.img and sonic_multiasic.xml file, bring up multi-asic</span>
<span class="f2">+vs as:</span>
<span class="f2">+</span>
<span class="f2">+```</span>
<span class="f2">+$ sudo virsh</span>
<span class="f2">+Welcome to virsh, the virtualization interactive terminal.</span>
<span class="f2">+</span>
<span class="f2">+Type:  'help' for help with commands</span>
<span class="f2">+       'quit' to quit</span>
<span class="f2">+</span>
<span class="f2">+virsh #</span>
<span class="f2">+virsh # create sonic_multiasic.xml</span><span class="b1"> </span>
<span class="f2">+Domain sonic created from sonic.xml</span>
<span class="f2">+</span>
<span class="f2">+virsh #</span>
<span class="f2">+```</span>
<span class="f2">+</span>
<span class="f2">+- Steps to convert a prebuilt single asic sonic-vs.img:</span>
<span class="f2">+  - Use the updated sonic_multiasic.xml file and bring up virtual switch.</span>
<span class="f2">+  - Update /usr/share/sonic/device/x86_64-kvm_x86_64-r0/asic.conf as above.</span>
<span class="f2">+  - Add topology.sh in /usr/share/sonic/device/x86_64-kvm_x86_64-r0/&lt;HWSKU&gt;</span>
<span class="f2">+  - stop database service and remove database docker, so that when vs is</span><span class="b1"> </span>
<span class="f2">+rebooted, database_global.json is created with the right namespaces.</span>
<span class="f2">+    - systemctl stop database</span>
<span class="f2">+    - docker rm database</span>
<span class="f2">+  - sudo reboot</span>
<span class="f2">+  - Once rebooted, VS should be multi-asic VS.</span>
<span class="f2">+</span>
<span class="f2">+- Start topology service.</span>
<span class="f2">+```</span>
<span class="f2">+sudo systemctl start topology.</span>
<span class="f2">+```</span>
<span class="f2">+</span>
<span class="f2">+- Load configuration using minigraph or config_dbs.</span>
<span class="f2">+</span>
<span class="f2">+3. Access virtual switch:</span>
<span class="f2">+</span>
<span class="f2">+    1. Connect SONiC VM via console</span>
<span class="f2">+    ```</span>
<span class="f2">+    $ telnet 127.0.0.1 7000</span>
<span class="f2">+    ```</span>
<span class="f2">+</span><span class="b1">    </span>
<span class="f2">+    OR</span>
<span class="f2">+</span>
<span class="f2">+    2. Connect SONiC VM via SSH</span>
<span class="f2">+</span><span class="b1">        </span>
<span class="f2">+        1. Connect via console (see 3.1 above)</span>
<span class="f2">+</span>
<span class="f2">+        2. Request a new DHCP address</span>
<span class="f2">+        ```</span>
<span class="f2">+        sudo dhclient -v</span>
<span class="f2">+        ```</span>
<span class="f2">+</span><span class="b1">        </span>
<span class="f2">+        3. Connect via SSH</span>
<span class="f2">+        ```</span>
<span class="f2">+        $ ssh -p 3040 admin@127.0.0.1</span>
<span class="f2">+        ```</span>
<span class="bold">diff --git a/platform/ot-kvm/docker-syncd-ot-kvm.dep b/platform/ot-kvm/docker-syncd-ot-kvm.dep</span>
<span class="bold">new file mode 100644</span>
<span class="bold">index 000000000..cc3886a40</span>
<span class="bold">--- /dev/null</span>
<span class="bold">+++ b/platform/ot-kvm/docker-syncd-ot-kvm.dep</span>
<span class="f6">@@ -0,0 +1,11 @@</span>
<span class="f2">+#DPKG FRK</span>
<span class="f2">+DPATH       := $($(DOCKER_SYNCD_BASE)_PATH)</span>
<span class="f2">+DEP_FILES   := $(SONIC_COMMON_FILES_LIST) $(PLATFORM_PATH)/docker-syncd-ot-kvm.mk $(PLATFORM_PATH)/docker-syncd-ot-kvm.dep $(PLATFORM_PATH)/otai.mk $(PLATFORM_PATH)/hal-server.mk</span>
<span class="f2">+DEP_FILES   += $(SONIC_COMMON_BASE_FILES_LIST)</span>
<span class="f2">+DEP_FILES   += $(shell git ls-files $(DPATH))</span>
<span class="f2">+</span>
<span class="f2">+$(DOCKER_SYNCD_BASE)_CACHE_MODE  := GIT_CONTENT_SHA</span><span class="b1"> </span>
<span class="f2">+$(DOCKER_SYNCD_BASE)_DEP_FLAGS   := $(SONIC_COMMON_FLAGS_LIST)</span>
<span class="f2">+$(DOCKER_SYNCD_BASE)_DEP_FILES   := $(DEP_FILES)</span>
<span class="f2">+</span>
<span class="f2">+$(eval $(call add_dbg_docker,$(DOCKER_SYNCD_BASE),$(DOCKER_SYNCD_BASE_DBG)))</span>
<span class="bold">diff --git a/platform/ot-kvm/docker-syncd-ot-kvm.mk b/platform/ot-kvm/docker-syncd-ot-kvm.mk</span>
<span class="bold">new file mode 100644</span>
<span class="bold">index 000000000..ef3bf15ab</span>
<span class="bold">--- /dev/null</span>
<span class="bold">+++ b/platform/ot-kvm/docker-syncd-ot-kvm.mk</span>
<span class="f6">@@ -0,0 +1,20 @@</span>
<span class="f2">+# docker image for ot-kvm syncd</span>
<span class="f2">+</span>
<span class="f2">+DOCKER_SYNCD_PLATFORM_CODE = ot-kvm</span>
<span class="f2">+include $(PLATFORM_PATH)/../template/docker-syncd-bullseye.mk</span>
<span class="f2">+</span>
<span class="f2">+$(DOCKER_SYNCD_BASE)_DEPENDS += $(SYNCD) \</span>
<span class="f2">+                                $(OTKVM_LIBOTAI_DEB) \</span>
<span class="f2">+                                $(OTKVM_HALSERVER_DEB)</span>
<span class="f2">+</span>
<span class="f2">+$(DOCKER_SYNCD_BASE)_DBG_DEPENDS += $(SYNCD_DBG) \</span>
<span class="f2">+                                $(LIBSWSSCOMMON_DBG) \</span>
<span class="f2">+                                $(LIBSAIMETADATA_DBG) \</span>
<span class="f2">+                                $(LIBSAIREDIS_DBG)</span>
<span class="f2">+</span>
<span class="f2">+$(DOCKER_SYNCD_BASE)_VERSION = 1.0.0</span>
<span class="f2">+$(DOCKER_SYNCD_BASE)_PACKAGE_NAME = syncd</span>
<span class="f2">+</span>
<span class="f2">+$(DOCKER_SYNCD_BASE)_RUN_OPT += -v /host/warmboot:/var/warmboot</span>
<span class="f2">+</span>
<span class="f2">+SONIC_BULLSEYE_DOCKERS += $(DOCKER_SYNCD_BASE)</span>
\ No newline at end of file
<span class="bold">diff --git a/platform/ot-kvm/docker-syncd-ot-kvm/Dockerfile.cleanup b/platform/ot-kvm/docker-syncd-ot-kvm/Dockerfile.cleanup</span>
<span class="bold">new file mode 100644</span>
<span class="bold">index 000000000..7e26a4e74</span>
<span class="bold">--- /dev/null</span>
<span class="bold">+++ b/platform/ot-kvm/docker-syncd-ot-kvm/Dockerfile.cleanup</span>
<span class="f6">@@ -0,0 +1,11 @@</span>
<span class="f2">+# Base docker build</span>
<span class="f2">+FROM docker-syncd-ot-kvm-sonic:latest</span>
<span class="f2">+</span>
<span class="f2">+# Copy the cache data to host</span>
<span class="f2">+From scratch as output</span>
<span class="f2">+COPY --from=docker-syncd-ot-kvm-sonic:latest /cache.tgz cache.tgz</span>
<span class="f2">+</span>
<span class="f2">+# Clean up the cache data</span>
<span class="f2">+FROM docker-syncd-ot-kvm-sonic:latest as final</span>
<span class="f2">+RUN rm /cache.tgz</span>
<span class="f2">+</span>
<span class="bold">diff --git a/platform/ot-kvm/docker-syncd-ot-kvm/Dockerfile.j2 b/platform/ot-kvm/docker-syncd-ot-kvm/Dockerfile.j2</span>
<span class="bold">new file mode 100644</span>
<span class="bold">index 000000000..0159de017</span>
<span class="bold">--- /dev/null</span>
<span class="bold">+++ b/platform/ot-kvm/docker-syncd-ot-kvm/Dockerfile.j2</span>
<span class="f6">@@ -0,0 +1,38 @@</span>
<span class="f2">+{% from &quot;dockers/dockerfile-macros.j2&quot; import install_debian_packages %}</span>
<span class="f2">+FROM docker-config-engine-bullseye-{{DOCKER_USERNAME}}:{{DOCKER_USERTAG}}</span>
<span class="f2">+</span>
<span class="f2">+ARG docker_container_name</span>
<span class="f2">+</span>
<span class="f2">+RUN [ -f /etc/rsyslog.conf ] &amp;&amp; sed -ri &quot;s/%syslogtag%/$docker_container_name#%syslogtag%/;&quot; /etc/rsyslog.conf</span>
<span class="f2">+</span>
<span class="f2">+## Make apt-get non-interactive</span>
<span class="f2">+ENV DEBIAN_FRONTEND=noninteractive</span>
<span class="f2">+</span>
<span class="f2">+RUN apt-get update</span>
<span class="f2">+</span>
<span class="f2">+COPY \</span>
<span class="f2">+{% for deb in docker_syncd_ot_kvm_debs.split(' ') -%}</span>
<span class="f2">+debs/{{ deb }}{{' '}}</span>
<span class="f2">+{%- endfor -%}</span>
<span class="f2">+debs/</span>
<span class="f2">+</span>
<span class="f2">+# Install locally-built Debian packages and implicitly install their dependencies</span>
<span class="f2">+{{ install_debian_packages(docker_syncd_ot_kvm_debs.split(' ')) }}</span>
<span class="f2">+</span>
<span class="f2">+## TODO: add kmod into Depends</span>
<span class="f2">+RUN apt-get install -yf kmod</span>
<span class="f2">+</span>
<span class="f2">+## BRCM uses ethtool to set host interface speed</span>
<span class="f2">+RUN apt-get install -y ethtool</span>
<span class="f2">+</span>
<span class="f2">+COPY [&quot;start.sh&quot;, &quot;/usr/bin/&quot;]</span>
<span class="f2">+</span>
<span class="f2">+COPY [&quot;supervisord.conf&quot;, &quot;/etc/supervisor/conf.d/&quot;]</span>
<span class="f2">+COPY [&quot;files/supervisor-proc-exit-listener&quot;, &quot;/usr/bin&quot;]</span>
<span class="f2">+COPY [&quot;critical_processes&quot;, &quot;/etc/supervisor/&quot;]</span>
<span class="f2">+</span>
<span class="f2">+## Clean up</span>
<span class="f2">+RUN apt-get clean -y; apt-get autoclean -y; apt-get autoremove -y</span>
<span class="f2">+RUN rm -rf /debs</span>
<span class="f2">+</span>
<span class="f2">+ENTRYPOINT [&quot;/usr/local/bin/supervisord&quot;]</span>
<span class="bold">diff --git a/platform/ot-kvm/docker-syncd-ot-kvm/critical_processes b/platform/ot-kvm/docker-syncd-ot-kvm/critical_processes</span>
<span class="bold">new file mode 100644</span>
<span class="bold">index 000000000..bdd6903c5</span>
<span class="bold">--- /dev/null</span>
<span class="bold">+++ b/platform/ot-kvm/docker-syncd-ot-kvm/critical_processes</span>
<span class="f6">@@ -0,0 +1 @@</span>
<span class="f2">+program:syncd</span>
<span class="bold">diff --git a/platform/ot-kvm/docker-syncd-ot-kvm/start.sh b/platform/ot-kvm/docker-syncd-ot-kvm/start.sh</span>
<span class="bold">new file mode 100755</span>
<span class="bold">index 000000000..40178f13e</span>
<span class="bold">--- /dev/null</span>
<span class="bold">+++ b/platform/ot-kvm/docker-syncd-ot-kvm/start.sh</span>
<span class="f6">@@ -0,0 +1,14 @@</span>
<span class="f2">+#!/usr/bin/env bash</span>
<span class="f2">+</span>
<span class="f2">+HWSKU_DIR=/usr/share/sonic/hwsku</span>
<span class="f2">+</span>
<span class="f2">+mkdir -p /etc/sai.d/</span>
<span class="f2">+</span>
<span class="f2">+# Create/Copy the sai.profile to /etc/sai.d/sai.profile</span>
<span class="f2">+if [ -f $HWSKU_DIR/sai.profile.j2 ]; then</span>
<span class="f2">+    sonic-cfggen -d -t $HWSKU_DIR/sai.profile.j2 &gt; /etc/sai.d/sai.profile</span>
<span class="f2">+else</span>
<span class="f2">+    if [ -f $HWSKU_DIR/sai.profile ]; then</span>
<span class="f2">+        cp $HWSKU_DIR/sai.profile /etc/sai.d/sai.profile</span>
<span class="f2">+    fi</span>
<span class="f2">+fi</span>
<span class="bold">diff --git a/platform/ot-kvm/docker-syncd-ot-kvm/supervisord.conf b/platform/ot-kvm/docker-syncd-ot-kvm/supervisord.conf</span>
<span class="bold">new file mode 100644</span>
<span class="bold">index 000000000..db09cc814</span>
<span class="bold">--- /dev/null</span>
<span class="bold">+++ b/platform/ot-kvm/docker-syncd-ot-kvm/supervisord.conf</span>
<span class="f6">@@ -0,0 +1,80 @@</span>
<span class="f2">+[supervisord]</span>
<span class="f2">+logfile_maxbytes=1MB</span>
<span class="f2">+logfile_backups=2</span>
<span class="f2">+nodaemon=true</span>
<span class="f2">+</span>
<span class="f2">+[eventlistener:dependent-startup]</span>
<span class="f2">+command=python3 -m supervisord_dependent_startup</span>
<span class="f2">+autostart=true</span>
<span class="f2">+autorestart=unexpected</span>
<span class="f2">+startretries=0</span>
<span class="f2">+exitcodes=0,3</span>
<span class="f2">+events=PROCESS_STATE</span>
<span class="f2">+buffer_size=1024</span>
<span class="f2">+</span>
<span class="f2">+[eventlistener:supervisor-proc-exit-listener]</span>
<span class="f2">+command=/usr/bin/supervisor-proc-exit-listener --container-name syncd</span>
<span class="f2">+events=PROCESS_STATE_EXITED,PROCESS_STATE_RUNNING</span>
<span class="f2">+autostart=true</span>
<span class="f2">+autorestart=unexpected</span>
<span class="f2">+buffer_size=1024</span>
<span class="f2">+</span>
<span class="f2">+[program:rsyslogd]</span>
<span class="f2">+command=/usr/sbin/rsyslogd -n -iNONE</span>
<span class="f2">+priority=1</span>
<span class="f2">+autostart=false</span>
<span class="f2">+autorestart=unexpected</span>
<span class="f2">+stdout_logfile=syslog</span>
<span class="f2">+stderr_logfile=syslog</span>
<span class="f2">+dependent_startup=true</span>
<span class="f2">+</span>
<span class="f2">+[program:start]</span>
<span class="f2">+command=/usr/bin/start.sh</span>
<span class="f2">+priority=2</span>
<span class="f2">+autostart=false</span>
<span class="f2">+autorestart=false</span>
<span class="f2">+startsecs=0</span>
<span class="f2">+stdout_logfile=syslog</span>
<span class="f2">+stderr_logfile=syslog</span>
<span class="f2">+dependent_startup=true</span>
<span class="f2">+dependent_startup_wait_for=rsyslogd:running</span>
<span class="f2">+</span>
<span class="f2">+[program:hal]</span>
<span class="f2">+command=/usr/local/bin/hal</span>
<span class="f2">+priority=3</span>
<span class="f2">+autostart=false</span>
<span class="f2">+autorestart=true</span>
<span class="f2">+stdout_logfile=syslog</span>
<span class="f2">+stderr_logfile=syslog</span>
<span class="f2">+dependent_startup=true</span>
<span class="f2">+dependent_startup_wait_for=rsyslogd:running</span>
<span class="f2">+</span>
<span class="f2">+[program:syncd]</span>
<span class="f2">+command=/usr/bin/syncd_start.sh</span>
<span class="f2">+priority=4</span>
<span class="f2">+autostart=false</span>
<span class="f2">+autorestart=false</span>
<span class="f2">+stdout_logfile=syslog</span>
<span class="f2">+stderr_logfile=syslog</span>
<span class="f2">+dependent_startup=true</span>
<span class="f2">+dependent_startup_wait_for=start:exited</span>
<span class="f2">+</span>
<span class="f2">+[program:HalPlatformApiServer]</span>
<span class="f2">+command=/usr/local/bin/HalPlatformApiServer</span>
<span class="f2">+priority=5</span>
<span class="f2">+autostart=false</span>
<span class="f2">+autorestart=true</span>
<span class="f2">+stdout_logfile=syslog</span>
<span class="f2">+stderr_logfile=syslog</span>
<span class="f2">+dependent_startup=true</span>
<span class="f2">+dependent_startup_wait_for=hal:running</span>
<span class="f2">+</span>
<span class="f2">+[program:HalApiServer]</span>
<span class="f2">+command=/usr/local/bin/HalApiServer</span>
<span class="f2">+priority=6</span>
<span class="f2">+autostart=false</span>
<span class="f2">+autorestart=true</span>
<span class="f2">+stdout_logfile=syslog</span>
<span class="f2">+stderr_logfile=syslog</span>
<span class="f2">+dependent_startup=true</span>
<span class="f2">+dependent_startup_wait_for=hal:running</span>
\ No newline at end of file
<span class="bold">diff --git a/platform/ot-kvm/hal-client.dep b/platform/ot-kvm/hal-client.dep</span>
<span class="bold">new file mode 100644</span>
<span class="bold">index 000000000..a95fe1118</span>
<span class="bold">--- /dev/null</span>
<span class="bold">+++ b/platform/ot-kvm/hal-client.dep</span>
<span class="f6">@@ -0,0 +1,2 @@</span>
<span class="f2">+#DPKG FRK</span>
<span class="f2">+$(OTKVM_LIBHAL_DEB)_CACHE_MODE  := none</span>
<span class="bold">diff --git a/platform/ot-kvm/hal-client.mk b/platform/ot-kvm/hal-client.mk</span>
<span class="bold">new file mode 100644</span>
<span class="bold">index 000000000..bdc8f847c</span>
<span class="bold">--- /dev/null</span>
<span class="bold">+++ b/platform/ot-kvm/hal-client.mk</span>
<span class="f6">@@ -0,0 +1,8 @@</span>
<span class="f2">+HALCLIENT_VERSION = 1.0.0</span>
<span class="f2">+OTKVM_HALCLIENT_DEB = libhalplatformclient-mlx-$(HALCLIENT_VERSION)-amd64.deb</span>
<span class="f2">+$(OTKVM_HALCLIENT_DEB)_URL = &quot;https://raw.githubusercontent.com/oplinkoms/sonic-libmlx/main/$(OTKVM_HALCLIENT_DEB)&quot;</span>
<span class="f2">+</span>
<span class="f2">+$(OTKVM_HALCLIENT_DEB)_DEPENDS += $(PYTHON3_THRIFT_0_14_1)</span>
<span class="f2">+$(OTKVM_HALCLIENT_DEB)_RDEPENDS += $(PYTHON3_THRIFT_0_14_1)</span>
<span class="f2">+</span>
<span class="f2">+SONIC_ONLINE_DEBS += $(OTKVM_HALCLIENT_DEB)</span>
\ No newline at end of file
<span class="bold">diff --git a/platform/ot-kvm/hal-server.dep b/platform/ot-kvm/hal-server.dep</span>
<span class="bold">new file mode 100644</span>
<span class="bold">index 000000000..a95fe1118</span>
<span class="bold">--- /dev/null</span>
<span class="bold">+++ b/platform/ot-kvm/hal-server.dep</span>
<span class="f6">@@ -0,0 +1,2 @@</span>
<span class="f2">+#DPKG FRK</span>
<span class="f2">+$(OTKVM_LIBHAL_DEB)_CACHE_MODE  := none</span>
<span class="bold">diff --git a/platform/ot-kvm/hal-server.mk b/platform/ot-kvm/hal-server.mk</span>
<span class="bold">new file mode 100644</span>
<span class="bold">index 000000000..9616bd310</span>
<span class="bold">--- /dev/null</span>
<span class="bold">+++ b/platform/ot-kvm/hal-server.mk</span>
<span class="f6">@@ -0,0 +1,8 @@</span>
<span class="f2">+HALSERVER_VERSION = 1.0.0</span>
<span class="f2">+OTKVM_HALSERVER_DEB = libhal-mlx-ot-kvm-$(HALSERVER_VERSION)-amd64.deb</span>
<span class="f2">+$(OTKVM_HALSERVER_DEB)_URL = &quot;https://raw.githubusercontent.com/oplinkoms/sonic-libmlx/main/$(OTKVM_HALSERVER_DEB)&quot;</span>
<span class="f2">+</span>
<span class="f2">+$(OTKVM_HALSERVER_DEB)_DEPENDS += $(LIBTHRIFT_0_14_1) $(LIBTHRIFT_0_14_1_DEV)</span>
<span class="f2">+$(OTKVM_HALSERVER_DEB)_RDEPENDS += $(LIBTHRIFT_0_14_1)</span>
<span class="f2">+</span>
<span class="f2">+SONIC_ONLINE_DEBS += $(OTKVM_HALSERVER_DEB)</span>
\ No newline at end of file
<span class="bold">diff --git a/platform/ot-kvm/kvm-image.dep b/platform/ot-kvm/kvm-image.dep</span>
<span class="bold">new file mode 100644</span>
<span class="bold">index 000000000..05c083a51</span>
<span class="bold">--- /dev/null</span>
<span class="bold">+++ b/platform/ot-kvm/kvm-image.dep</span>
<span class="f6">@@ -0,0 +1,2 @@</span>
<span class="f2">+#DPKG FRK</span>
<span class="f2">+$(SONIC_KVM_IMAGE)_CACHE_MODE  := none</span>
<span class="bold">diff --git a/platform/ot-kvm/kvm-image.mk b/platform/ot-kvm/kvm-image.mk</span>
<span class="bold">new file mode 100644</span>
<span class="bold">index 000000000..2f34019a7</span>
<span class="bold">--- /dev/null</span>
<span class="bold">+++ b/platform/ot-kvm/kvm-image.mk</span>
<span class="f6">@@ -0,0 +1,15 @@</span>
<span class="f2">+# sonic ot-kvm image</span>
<span class="f2">+</span>
<span class="f2">+SONIC_KVM_IMAGE = sonic-ot-kvm.img.gz</span>
<span class="f2">+$(SONIC_KVM_IMAGE)_INSTALLS += $($(SONIC_ONE_IMAGE)_INSTALLS)</span>
<span class="f2">+$(SONIC_KVM_IMAGE)_LAZY_INSTALLS += $($(SONIC_ONE_IMAGE)_LAZY_INSTALLS)</span>
<span class="f2">+$(SONIC_KVM_IMAGE)_MACHINE = ot-kvm</span>
<span class="f2">+$(SONIC_KVM_IMAGE)_IMAGE_TYPE = kvm</span>
<span class="f2">+ifeq ($(INSTALL_DEBUG_TOOLS),y)</span>
<span class="f2">+$(SONIC_KVM_IMAGE)_DOCKERS += $(SONIC_INSTALL_DOCKER_DBG_IMAGES)</span>
<span class="f2">+$(SONIC_KVM_IMAGE)_DOCKERS += $(filter-out $(patsubst %-$(DBG_IMAGE_MARK).gz,%.gz, $(SONIC_INSTALL_DOCKER_DBG_IMAGES)), $(SONIC_INSTALL_DOCKER_IMAGES))</span>
<span class="f2">+else</span>
<span class="f2">+$(SONIC_KVM_IMAGE)_DOCKERS = $(SONIC_INSTALL_DOCKER_IMAGES)</span>
<span class="f2">+endif</span>
<span class="f2">+$(SONIC_KVM_IMAGE)_FILES = $(ONIE_RECOVERY_IMAGE) $(ONIE_RECOVERY_KVM_4ASIC_IMAGE) $(ONIE_RECOVERY_KVM_6ASIC_IMAGE)</span>
<span class="f2">+SONIC_INSTALLERS += $(SONIC_KVM_IMAGE)</span>
<span class="bold">diff --git a/platform/ot-kvm/one-image.dep b/platform/ot-kvm/one-image.dep</span>
<span class="bold">new file mode 100644</span>
<span class="bold">index 000000000..c5399d808</span>
<span class="bold">--- /dev/null</span>
<span class="bold">+++ b/platform/ot-kvm/one-image.dep</span>
<span class="f6">@@ -0,0 +1,2 @@</span>
<span class="f2">+#DPKG FRK</span>
<span class="f2">+$(SONIC_ONE_IMAGE)_CACHE_MODE  := none</span>
<span class="bold">diff --git a/platform/ot-kvm/one-image.mk b/platform/ot-kvm/one-image.mk</span>
<span class="bold">new file mode 100644</span>
<span class="bold">index 000000000..931e62a9e</span>
<span class="bold">--- /dev/null</span>
<span class="bold">+++ b/platform/ot-kvm/one-image.mk</span>
<span class="f6">@@ -0,0 +1,16 @@</span>
<span class="f2">+# sonic ot-kvm one image installer</span>
<span class="f2">+</span>
<span class="f2">+SONIC_ONE_IMAGE = sonic-ot-kvm.bin</span>
<span class="f2">+$(SONIC_ONE_IMAGE)_MACHINE = ot-kvm</span>
<span class="f2">+$(SONIC_ONE_IMAGE)_IMAGE_TYPE = onie</span>
<span class="f2">+$(SONIC_ONE_IMAGE)_INSTALLS += $(SYSTEMD_SONIC_GENERATOR) \</span>
<span class="f2">+                               $(PYTHON3_THRIFT_0_14_1) \</span>
<span class="f2">+                               $(OTKVM_HALCLIENT_DEB)</span>
<span class="f2">+$(SONIC_ONE_IMAGE)_LAZY_INSTALLS += $(OTKVM_OLSV_PLATFORM_MODULE)</span>
<span class="f2">+ifeq ($(INSTALL_DEBUG_TOOLS),y)</span>
<span class="f2">+$(SONIC_ONE_IMAGE)_DOCKERS += $(SONIC_INSTALL_DOCKER_DBG_IMAGES)</span>
<span class="f2">+$(SONIC_ONE_IMAGE)_DOCKERS += $(filter-out $(patsubst %-$(DBG_IMAGE_MARK).gz,%.gz, $(SONIC_INSTALL_DOCKER_DBG_IMAGES)), $(SONIC_INSTALL_DOCKER_IMAGES))</span>
<span class="f2">+else</span>
<span class="f2">+$(SONIC_ONE_IMAGE)_DOCKERS = $(SONIC_INSTALL_DOCKER_IMAGES)</span>
<span class="f2">+endif</span>
<span class="f2">+SONIC_INSTALLERS += $(SONIC_ONE_IMAGE)</span>
<span class="bold">diff --git a/platform/ot-kvm/onie.dep b/platform/ot-kvm/onie.dep</span>
<span class="bold">new file mode 100644</span>
<span class="bold">index 000000000..36de83ce8</span>
<span class="bold">--- /dev/null</span>
<span class="bold">+++ b/platform/ot-kvm/onie.dep</span>
<span class="f6">@@ -0,0 +1,2 @@</span>
<span class="f2">+#DPKG FRK</span>
<span class="f2">+$(ONIE_RECOVERY_IMAGE)_CACHE_MODE  := none</span>
<span class="bold">diff --git a/platform/ot-kvm/onie.mk b/platform/ot-kvm/onie.mk</span>
<span class="bold">new file mode 100644</span>
<span class="bold">index 000000000..669e09417</span>
<span class="bold">--- /dev/null</span>
<span class="bold">+++ b/platform/ot-kvm/onie.mk</span>
<span class="f6">@@ -0,0 +1,10 @@</span>
<span class="f2">+ONIE_RECOVERY_IMAGE = onie-recovery-x86_64-ot-kvm_x86_64-r0.iso</span>
<span class="f2">+$(ONIE_RECOVERY_IMAGE)_URL = &quot;https://github.com/oplinkoms/onie/raw/2018.11br/build/images/$(ONIE_RECOVERY_IMAGE)&quot;</span>
<span class="f2">+</span>
<span class="f2">+ONIE_RECOVERY_KVM_4ASIC_IMAGE = onie-recovery-x86_64-kvm_x86_64_4_asic-r0.iso</span>
<span class="f2">+$(ONIE_RECOVERY_KVM_4ASIC_IMAGE)_URL = &quot;https://sonicstorage.blob.core.windows.net/packages/onie/onie-recovery-x86_64-kvm_x86_64_4_asic-r0.iso?sv=2020-04-08&amp;st=2021-08-27T22%3A41%3A07Z&amp;se=2030-08-28T22%3A41%3A00Z&amp;sr=b&amp;sp=r&amp;sig=zyaX7rHnE5jXldpgrnWq1nvsfmMTrVCSuESZqrIxDLc%3D&quot;
+</span>
<span class="f2">+ONIE_RECOVERY_KVM_6ASIC_IMAGE = onie-recovery-x86_64-kvm_x86_64_6_asic-r0.iso</span>
<span class="f2">+$(ONIE_RECOVERY_KVM_6ASIC_IMAGE)_URL = &quot;https://sonicstorage.blob.core.windows.net/packages/onie/onie-recovery-x86_64-kvm_x86_64_6_asic-r0.iso?sv=2020-04-08&amp;st=2021-08-27T22%3A42%3A24Z&amp;se=2030-08-28T22%3A42%3A00Z&amp;sr=b&amp;sp=r&amp;sig=RqbtHJt8Hvy7j78jt3TgXo27T7zjdUDfSxqmOID1YUU%3D&quot;
+</span>
<span class="f2">+SONIC_ONLINE_FILES += $(ONIE_RECOVERY_IMAGE) $(ONIE_RECOVERY_KVM_4ASIC_IMAGE) $(ONIE_RECOVERY_KVM_6ASIC_IMAGE)</span>
<span class="bold">diff --git a/platform/ot-kvm/otai.dep b/platform/ot-kvm/otai.dep</span>
<span class="bold">new file mode 100644</span>
<span class="bold">index 000000000..007ad6bb2</span>
<span class="bold">--- /dev/null</span>
<span class="bold">+++ b/platform/ot-kvm/otai.dep</span>
<span class="f6">@@ -0,0 +1,2 @@</span>
<span class="f2">+#DPKG FRK</span>
<span class="f2">+$(OTKVM_LIBOTAI_DEB)_CACHE_MODE  := none</span>
<span class="bold">diff --git a/platform/ot-kvm/otai.mk b/platform/ot-kvm/otai.mk</span>
<span class="bold">new file mode 100644</span>
<span class="bold">index 000000000..680e58b3d</span>
<span class="bold">--- /dev/null</span>
<span class="bold">+++ b/platform/ot-kvm/otai.mk</span>
<span class="f6">@@ -0,0 +1,5 @@</span>
<span class="f2">+LIBOTAI_VERSION = 1.0.0</span>
<span class="f2">+OTKVM_LIBOTAI_DEB = libotai-mlx-$(LIBOTAI_VERSION)-amd64.deb</span>
<span class="f2">+$(OTKVM_LIBOTAI_DEB)_URL = &quot;https://raw.githubusercontent.com/oplinkoms/sonic-libmlx/main/$(OTKVM_LIBOTAI_DEB)&quot;</span>
<span class="f2">+</span>
<span class="f2">+SONIC_ONLINE_DEBS += $(OTKVM_LIBOTAI_DEB)</span>
\ No newline at end of file
<span class="bold">diff --git a/platform/ot-kvm/platform-modules-ot-kvm.dep b/platform/ot-kvm/platform-modules-ot-kvm.dep</span>
<span class="bold">new file mode 100644</span>
<span class="bold">index 000000000..f68aaebed</span>
<span class="bold">--- /dev/null</span>
<span class="bold">+++ b/platform/ot-kvm/platform-modules-ot-kvm.dep</span>
<span class="f6">@@ -0,0 +1,10 @@</span>
<span class="f2">+MPATH       := $($(OTKVM_OLSV_PLATFORM_MODULE)_SRC_PATH)</span>
<span class="f2">+DEP_FILES   := $(SONIC_COMMON_FILES_LIST) $(PLATFORM_PATH)/platform-modules-ot-kvm.mk $(PLATFORM_PATH)/platform-modules-ot-kvm.dep</span>
<span class="f2">+DEP_FILES   += $(SONIC_COMMON_BASE_FILES_LIST)</span>
<span class="f2">+DEP_FILES   += $(shell git ls-files $(MPATH))</span>
<span class="f2">+</span>
<span class="f2">+$(DOCKER_SYNCD_BASE)_CACHE_MODE  := GIT_CONTENT_SHA</span><span class="b1"> </span>
<span class="f2">+$(DOCKER_SYNCD_BASE)_DEP_FLAGS   := $(SONIC_COMMON_FLAGS_LIST)</span>
<span class="f2">+$(DOCKER_SYNCD_BASE)_DEP_FILES   := $(DEP_FILES)</span>
<span class="f2">+</span>
<span class="f2">+$(eval $(call add_dbg_docker,$(DOCKER_SYNCD_BASE),$(DOCKER_SYNCD_BASE_DBG)))</span>
<span class="bold">diff --git a/platform/ot-kvm/platform-modules-ot-kvm.mk b/platform/ot-kvm/platform-modules-ot-kvm.mk</span>
<span class="bold">new file mode 100644</span>
<span class="bold">index 000000000..05e1195c1</span>
<span class="bold">--- /dev/null</span>
<span class="bold">+++ b/platform/ot-kvm/platform-modules-ot-kvm.mk</span>
<span class="f6">@@ -0,0 +1,11 @@</span>
<span class="f2">+# OT-KVM Platform modules</span>
<span class="f2">+</span>
<span class="f2">+OTKVM_OLSV_PLATFORM_MODULE_VERSION = 1.1</span>
<span class="f2">+export OTKVM_OLSV_PLATFORM_MODULE_VERSION</span>
<span class="f2">+</span>
<span class="f2">+OTKVM_OLSV_PLATFORM_MODULE = sonic-platform-ot-kvm-ols-v_$(OTKVM_OLSV_PLATFORM_MODULE_VERSION)_amd64.deb</span>
<span class="f2">+$(OTKVM_OLSV_PLATFORM_MODULE)_SRC_PATH = $(PLATFORM_PATH)/sonic-platform-modules-ot-kvm</span>
<span class="f2">+$(OTKVM_OLSV_PLATFORM_MODULE)_DEPENDS += $(LINUX_HEADERS) $(LINUX_HEADERS_COMMON) $(OTKVM_HALCLIENT_DEB)</span>
<span class="f2">+$(OTKVM_OLSV_PLATFORM_MODULE)_PLATFORM = x86_64-ot-kvm_x86_64-r0</span>
<span class="f2">+</span>
<span class="f2">+SONIC_DPKG_DEBS += $(OTKVM_OLSV_PLATFORM_MODULE)</span>
<span class="bold">diff --git a/platform/ot-kvm/platform.conf b/platform/ot-kvm/platform.conf</span>
<span class="bold">new file mode 100644</span>
<span class="bold">index 000000000..e69de29bb</span>
<span class="bold">diff --git a/platform/ot-kvm/raw-image.dep b/platform/ot-kvm/raw-image.dep</span>
<span class="bold">new file mode 100644</span>
<span class="bold">index 000000000..500ba2a70</span>
<span class="bold">--- /dev/null</span>
<span class="bold">+++ b/platform/ot-kvm/raw-image.dep</span>
<span class="f6">@@ -0,0 +1,2 @@</span>
<span class="f2">+#DPKG FRK</span>
<span class="f2">+$(SONIC_RAW_IMAGE)_CACHE_MODE  := none</span>
<span class="bold">diff --git a/platform/ot-kvm/raw-image.mk b/platform/ot-kvm/raw-image.mk</span>
<span class="bold">new file mode 100644</span>
<span class="bold">index 000000000..34a7d9c08</span>
<span class="bold">--- /dev/null</span>
<span class="bold">+++ b/platform/ot-kvm/raw-image.mk</span>
<span class="f6">@@ -0,0 +1,9 @@</span>
<span class="f2">+# sonic ot-kvm raw image installer</span>
<span class="f2">+</span>
<span class="f2">+SONIC_RAW_IMAGE = sonic-ot-kvm.raw</span>
<span class="f2">+$(SONIC_RAW_IMAGE)_MACHINE = ot-kvm</span>
<span class="f2">+$(SONIC_RAW_IMAGE)_IMAGE_TYPE = raw</span>
<span class="f2">+$(SONIC_RAW_IMAGE)_INSTALLS += $($(SONIC_ONE_IMAGE)_INSTALLS)</span>
<span class="f2">+$(SONIC_RAW_IMAGE)_LAZY_INSTALLS += $($(SONIC_ONE_IMAGE)_LAZY_INSTALLS)</span>
<span class="f2">+$(SONIC_RAW_IMAGE)_DOCKERS += $(SONIC_INSTALL_DOCKER_IMAGES)</span>
<span class="f2">+SONIC_INSTALLERS += $(SONIC_RAW_IMAGE)</span>
<span class="bold">diff --git a/platform/ot-kvm/rules.dep b/platform/ot-kvm/rules.dep</span>
<span class="bold">new file mode 100644</span>
<span class="bold">index 000000000..26df135d0</span>
<span class="bold">--- /dev/null</span>
<span class="bold">+++ b/platform/ot-kvm/rules.dep</span>
<span class="f6">@@ -0,0 +1,12 @@</span>
<span class="f2">+#DPKG FRK</span>
<span class="f2">+include $(PLATFORM_PATH)/hal-server.dep</span>
<span class="f2">+include $(PLATFORM_PATH)/hal-client.dep</span>
<span class="f2">+include $(PLATFORM_PATH)/otai.dep</span>
<span class="f2">+include $(PLATFORM_PATH)/docker-syncd-ot-kvm.dep</span>
<span class="f2">+include $(PLATFORM_PATH)/platform-modules-ot-kvm.dep</span>
<span class="f2">+include $(PLATFORM_PATH)/sonic-version.dep</span>
<span class="f2">+include $(PLATFORM_PATH)/one-image.dep</span>
<span class="f2">+include $(PLATFORM_PATH)/onie.dep</span>
<span class="f2">+include $(PLATFORM_PATH)/kvm-image.dep</span>
<span class="f2">+include $(PLATFORM_PATH)/raw-image.dep</span>
<span class="f2">+</span>
<span class="bold">diff --git a/platform/ot-kvm/rules.mk b/platform/ot-kvm/rules.mk</span>
<span class="bold">new file mode 100644</span>
<span class="bold">index 000000000..65fabcfae</span>
<span class="bold">--- /dev/null</span>
<span class="bold">+++ b/platform/ot-kvm/rules.mk</span>
<span class="f6">@@ -0,0 +1,18 @@</span>
<span class="f2">+include $(PLATFORM_PATH)/hal-server.mk</span>
<span class="f2">+include $(PLATFORM_PATH)/hal-client.mk</span>
<span class="f2">+include $(PLATFORM_PATH)/otai.mk</span>
<span class="f2">+include $(PLATFORM_PATH)/docker-syncd-ot-kvm.mk</span>
<span class="f2">+include $(PLATFORM_PATH)/platform-modules-ot-kvm.mk</span>
<span class="f2">+include $(PLATFORM_PATH)/sonic-version.mk</span>
<span class="f2">+include $(PLATFORM_PATH)/one-image.mk</span>
<span class="f2">+include $(PLATFORM_PATH)/onie.mk</span>
<span class="f2">+include $(PLATFORM_PATH)/kvm-image.mk</span>
<span class="f2">+include $(PLATFORM_PATH)/raw-image.mk</span>
<span class="f2">+</span>
<span class="f2">+SONIC_ALL += $(SONIC_ONE_IMAGE) $(SONIC_KVM_IMAGE) $(SONIC_RAW_IMAGE)</span>
<span class="f2">+</span>
<span class="f2">+# Inject ot-kvm otai into syncd</span>
<span class="f2">+$(SYNCD)_DEPENDS += $(OTKVM_LIBOTAI_DEB)</span>
<span class="f2">+</span>
<span class="f2">+# Inject ot-kvm hal dependency library into pmon</span>
<span class="f2">+$(DOCKER_PLATFORM_MONITOR)_DEPENDS += $(OTKVM_HALCLIENT_DEB)</span>
<span class="bold">diff --git a/platform/ot-kvm/sonic-platform-modules-ot-kvm/LICENSE b/platform/ot-kvm/sonic-platform-modules-ot-kvm/LICENSE</span>
<span class="bold">new file mode 100644</span>
<span class="bold">index 000000000..d159169d1</span>
<span class="bold">--- /dev/null</span>
<span class="bold">+++ b/platform/ot-kvm/sonic-platform-modules-ot-kvm/LICENSE</span>
<span class="f6">@@ -0,0 +1,339 @@</span>
<span class="f2">+                    GNU GENERAL PUBLIC LICENSE</span>
<span class="f2">+                       Version 2, June 1991</span>
<span class="f2">+</span>
<span class="f2">+ Copyright (C) 1989, 1991 Free Software Foundation, Inc.,</span>
<span class="f2">+ 51 Franklin Street, Fifth Floor, Boston, MA 02110-1301 USA</span>
<span class="f2">+ Everyone is permitted to copy and distribute verbatim copies</span>
<span class="f2">+ of this license document, but changing it is not allowed.</span>
<span class="f2">+</span>
<span class="f2">+                            Preamble</span>
<span class="f2">+</span>
<span class="f2">+  The licenses for most software are designed to take away your</span>
<span class="f2">+freedom to share and change it.  By contrast, the GNU General Public</span>
<span class="f2">+License is intended to guarantee your freedom to share and change free</span>
<span class="f2">+software--to make sure the software is free for all its users.  This</span>
<span class="f2">+General Public License applies to most of the Free Software</span>
<span class="f2">+Foundation's software and to any other program whose authors commit to</span>
<span class="f2">+using it.  (Some other Free Software Foundation software is covered by</span>
<span class="f2">+the GNU Lesser General Public License instead.)  You can apply it to</span>
<span class="f2">+your programs, too.</span>
<span class="f2">+</span>
<span class="f2">+  When we speak of free software, we are referring to freedom, not</span>
<span class="f2">+price.  Our General Public Licenses are designed to make sure that you</span>
<span class="f2">+have the freedom to distribute copies of free software (and charge for</span>
<span class="f2">+this service if you wish), that you receive source code or can get it</span>
<span class="f2">+if you want it, that you can change the software or use pieces of it</span>
<span class="f2">+in new free programs; and that you know you can do these things.</span>
<span class="f2">+</span>
<span class="f2">+  To protect your rights, we need to make restrictions that forbid</span>
<span class="f2">+anyone to deny you these rights or to ask you to surrender the rights.</span>
<span class="f2">+These restrictions translate to certain responsibilities for you if you</span>
<span class="f2">+distribute copies of the software, or if you modify it.</span>
<span class="f2">+</span>
<span class="f2">+  For example, if you distribute copies of such a program, whether</span>
<span class="f2">+gratis or for a fee, you must give the recipients all the rights that</span>
<span class="f2">+you have.  You must make sure that they, too, receive or can get the</span>
<span class="f2">+source code.  And you must show them these terms so they know their</span>
<span class="f2">+rights.</span>
<span class="f2">+</span>
<span class="f2">+  We protect your rights with two steps: (1) copyright the software, and</span>
<span class="f2">+(2) offer you this license which gives you legal permission to copy,</span>
<span class="f2">+distribute and/or modify the software.</span>
<span class="f2">+</span>
<span class="f2">+  Also, for each author's protection and ours, we want to make certain</span>
<span class="f2">+that everyone understands that there is no warranty for this free</span>
<span class="f2">+software.  If the software is modified by someone else and passed on, we</span>
<span class="f2">+want its recipients to know that what they have is not the original, so</span>
<span class="f2">+that any problems introduced by others will not reflect on the original</span>
<span class="f2">+authors' reputations.</span>
<span class="f2">+</span>
<span class="f2">+  Finally, any free program is threatened constantly by software</span>
<span class="f2">+patents.  We wish to avoid the danger that redistributors of a free</span>
<span class="f2">+program will individually obtain patent licenses, in effect making the</span>
<span class="f2">+program proprietary.  To prevent this, we have made it clear that any</span>
<span class="f2">+patent must be licensed for everyone's free use or not licensed at all.</span>
<span class="f2">+</span>
<span class="f2">+  The precise terms and conditions for copying, distribution and</span>
<span class="f2">+modification follow.</span>
<span class="f2">+</span>
<span class="f2">+                    GNU GENERAL PUBLIC LICENSE</span>
<span class="f2">+   TERMS AND CONDITIONS FOR COPYING, DISTRIBUTION AND MODIFICATION</span>
<span class="f2">+</span>
<span class="f2">+  0. This License applies to any program or other work which contains</span>
<span class="f2">+a notice placed by the copyright holder saying it may be distributed</span>
<span class="f2">+under the terms of this General Public License.  The &quot;Program&quot;, below,</span>
<span class="f2">+refers to any such program or work, and a &quot;work based on the Program&quot;</span>
<span class="f2">+means either the Program or any derivative work under copyright law:</span>
<span class="f2">+that is to say, a work containing the Program or a portion of it,</span>
<span class="f2">+either verbatim or with modifications and/or translated into another</span>
<span class="f2">+language.  (Hereinafter, translation is included without limitation in</span>
<span class="f2">+the term &quot;modification&quot;.)  Each licensee is addressed as &quot;you&quot;.</span>
<span class="f2">+</span>
<span class="f2">+Activities other than copying, distribution and modification are not</span>
<span class="f2">+covered by this License; they are outside its scope.  The act of</span>
<span class="f2">+running the Program is not restricted, and the output from the Program</span>
<span class="f2">+is covered only if its contents constitute a work based on the</span>
<span class="f2">+Program (independent of having been made by running the Program).</span>
<span class="f2">+Whether that is true depends on what the Program does.</span>
<span class="f2">+</span>
<span class="f2">+  1. You may copy and distribute verbatim copies of the Program's</span>
<span class="f2">+source code as you receive it, in any medium, provided that you</span>
<span class="f2">+conspicuously and appropriately publish on each copy an appropriate</span>
<span class="f2">+copyright notice and disclaimer of warranty; keep intact all the</span>
<span class="f2">+notices that refer to this License and to the absence of any warranty;</span>
<span class="f2">+and give any other recipients of the Program a copy of this License</span>
<span class="f2">+along with the Program.</span>
<span class="f2">+</span>
<span class="f2">+You may charge a fee for the physical act of transferring a copy, and</span>
<span class="f2">+you may at your option offer warranty protection in exchange for a fee.</span>
<span class="f2">+</span>
<span class="f2">+  2. You may modify your copy or copies of the Program or any portion</span>
<span class="f2">+of it, thus forming a work based on the Program, and copy and</span>
<span class="f2">+distribute such modifications or work under the terms of Section 1</span>
<span class="f2">+above, provided that you also meet all of these conditions:</span>
<span class="f2">+</span>
<span class="f2">+    a) You must cause the modified files to carry prominent notices</span>
<span class="f2">+    stating that you changed the files and the date of any change.</span>
<span class="f2">+</span>
<span class="f2">+    b) You must cause any work that you distribute or publish, that in</span>
<span class="f2">+    whole or in part contains or is derived from the Program or any</span>
<span class="f2">+    part thereof, to be licensed as a whole at no charge to all third</span>
<span class="f2">+    parties under the terms of this License.</span>
<span class="f2">+</span>
<span class="f2">+    c) If the modified program normally reads commands interactively</span>
<span class="f2">+    when run, you must cause it, when started running for such</span>
<span class="f2">+    interactive use in the most ordinary way, to print or display an</span>
<span class="f2">+    announcement including an appropriate copyright notice and a</span>
<span class="f2">+    notice that there is no warranty (or else, saying that you provide</span>
<span class="f2">+    a warranty) and that users may redistribute the program under</span>
<span class="f2">+    these conditions, and telling the user how to view a copy of this</span>
<span class="f2">+    License.  (Exception: if the Program itself is interactive but</span>
<span class="f2">+    does not normally print such an announcement, your work based on</span>
<span class="f2">+    the Program is not required to print an announcement.)</span>
<span class="f2">+</span>
<span class="f2">+These requirements apply to the modified work as a whole.  If</span>
<span class="f2">+identifiable sections of that work are not derived from the Program,</span>
<span class="f2">+and can be reasonably considered independent and separate works in</span>
<span class="f2">+themselves, then this License, and its terms, do not apply to those</span>
<span class="f2">+sections when you distribute them as separate works.  But when you</span>
<span class="f2">+distribute the same sections as part of a whole which is a work based</span>
<span class="f2">+on the Program, the distribution of the whole must be on the terms of</span>
<span class="f2">+this License, whose permissions for other licensees extend to the</span>
<span class="f2">+entire whole, and thus to each and every part regardless of who wrote it.</span>
<span class="f2">+</span>
<span class="f2">+Thus, it is not the intent of this section to claim rights or contest</span>
<span class="f2">+your rights to work written entirely by you; rather, the intent is to</span>
<span class="f2">+exercise the right to control the distribution of derivative or</span>
<span class="f2">+collective works based on the Program.</span>
<span class="f2">+</span>
<span class="f2">+In addition, mere aggregation of another work not based on the Program</span>
<span class="f2">+with the Program (or with a work based on the Program) on a volume of</span>
<span class="f2">+a storage or distribution medium does not bring the other work under</span>
<span class="f2">+the scope of this License.</span>
<span class="f2">+</span>
<span class="f2">+  3. You may copy and distribute the Program (or a work based on it,</span>
<span class="f2">+under Section 2) in object code or executable form under the terms of</span>
<span class="f2">+Sections 1 and 2 above provided that you also do one of the following:</span>
<span class="f2">+</span>
<span class="f2">+    a) Accompany it with the complete corresponding machine-readable</span>
<span class="f2">+    source code, which must be distributed under the terms of Sections</span>
<span class="f2">+    1 and 2 above on a medium customarily used for software interchange; or,</span>
<span class="f2">+</span>
<span class="f2">+    b) Accompany it with a written offer, valid for at least three</span>
<span class="f2">+    years, to give any third party, for a charge no more than your</span>
<span class="f2">+    cost of physically performing source distribution, a complete</span>
<span class="f2">+    machine-readable copy of the corresponding source code, to be</span>
<span class="f2">+    distributed under the terms of Sections 1 and 2 above on a medium</span>
<span class="f2">+    customarily used for software interchange; or,</span>
<span class="f2">+</span>
<span class="f2">+    c) Accompany it with the information you received as to the offer</span>
<span class="f2">+    to distribute corresponding source code.  (This alternative is</span>
<span class="f2">+    allowed only for noncommercial distribution and only if you</span>
<span class="f2">+    received the program in object code or executable form with such</span>
<span class="f2">+    an offer, in accord with Subsection b above.)</span>
<span class="f2">+</span>
<span class="f2">+The source code for a work means the preferred form of the work for</span>
<span class="f2">+making modifications to it.  For an executable work, complete source</span>
<span class="f2">+code means all the source code for all modules it contains, plus any</span>
<span class="f2">+associated interface definition files, plus the scripts used to</span>
<span class="f2">+control compilation and installation of the executable.  However, as a</span>
<span class="f2">+special exception, the source code distributed need not include</span>
<span class="f2">+anything that is normally distributed (in either source or binary</span>
<span class="f2">+form) with the major components (compiler, kernel, and so on) of the</span>
<span class="f2">+operating system on which the executable runs, unless that component</span>
<span class="f2">+itself accompanies the executable.</span>
<span class="f2">+</span>
<span class="f2">+If distribution of executable or object code is made by offering</span>
<span class="f2">+access to copy from a designated place, then offering equivalent</span>
<span class="f2">+access to copy the source code from the same place counts as</span>
<span class="f2">+distribution of the source code, even though third parties are not</span>
<span class="f2">+compelled to copy the source along with the object code.</span>
<span class="f2">+</span>
<span class="f2">+  4. You may not copy, modify, sublicense, or distribute the Program</span>
<span class="f2">+except as expressly provided under this License.  Any attempt</span>
<span class="f2">+otherwise to copy, modify, sublicense or distribute the Program is</span>
<span class="f2">+void, and will automatically terminate your rights under this License.</span>
<span class="f2">+However, parties who have received copies, or rights, from you under</span>
<span class="f2">+this License will not have their licenses terminated so long as such</span>
<span class="f2">+parties remain in full compliance.</span>
<span class="f2">+</span>
<span class="f2">+  5. You are not required to accept this License, since you have not</span>
<span class="f2">+signed it.  However, nothing else grants you permission to modify or</span>
<span class="f2">+distribute the Program or its derivative works.  These actions are</span>
<span class="f2">+prohibited by law if you do not accept this License.  Therefore, by</span>
<span class="f2">+modifying or distributing the Program (or any work based on the</span>
<span class="f2">+Program), you indicate your acceptance of this License to do so, and</span>
<span class="f2">+all its terms and conditions for copying, distributing or modifying</span>
<span class="f2">+the Program or works based on it.</span>
<span class="f2">+</span>
<span class="f2">+  6. Each time you redistribute the Program (or any work based on the</span>
<span class="f2">+Program), the recipient automatically receives a license from the</span>
<span class="f2">+original licensor to copy, distribute or modify the Program subject to</span>
<span class="f2">+these terms and conditions.  You may not impose any further</span>
<span class="f2">+restrictions on the recipients' exercise of the rights granted herein.</span>
<span class="f2">+You are not responsible for enforcing compliance by third parties to</span>
<span class="f2">+this License.</span>
<span class="f2">+</span>
<span class="f2">+  7. If, as a consequence of a court judgment or allegation of patent</span>
<span class="f2">+infringement or for any other reason (not limited to patent issues),</span>
<span class="f2">+conditions are imposed on you (whether by court order, agreement or</span>
<span class="f2">+otherwise) that contradict the conditions of this License, they do not</span>
<span class="f2">+excuse you from the conditions of this License.  If you cannot</span>
<span class="f2">+distribute so as to satisfy simultaneously your obligations under this</span>
<span class="f2">+License and any other pertinent obligations, then as a consequence you</span>
<span class="f2">+may not distribute the Program at all.  For example, if a patent</span>
<span class="f2">+license would not permit royalty-free redistribution of the Program by</span>
<span class="f2">+all those who receive copies directly or indirectly through you, then</span>
<span class="f2">+the only way you could satisfy both it and this License would be to</span>
<span class="f2">+refrain entirely from distribution of the Program.</span>
<span class="f2">+</span>
<span class="f2">+If any portion of this section is held invalid or unenforceable under</span>
<span class="f2">+any particular circumstance, the balance of the section is intended to</span>
<span class="f2">+apply and the section as a whole is intended to apply in other</span>
<span class="f2">+circumstances.</span>
<span class="f2">+</span>
<span class="f2">+It is not the purpose of this section to induce you to infringe any</span>
<span class="f2">+patents or other property right claims or to contest validity of any</span>
<span class="f2">+such claims; this section has the sole purpose of protecting the</span>
<span class="f2">+integrity of the free software distribution system, which is</span>
<span class="f2">+implemented by public license practices.  Many people have made</span>
<span class="f2">+generous contributions to the wide range of software distributed</span>
<span class="f2">+through that system in reliance on consistent application of that</span>
<span class="f2">+system; it is up to the author/donor to decide if he or she is willing</span>
<span class="f2">+to distribute software through any other system and a licensee cannot</span>
<span class="f2">+impose that choice.</span>
<span class="f2">+</span>
<span class="f2">+This section is intended to make thoroughly clear what is believed to</span>
<span class="f2">+be a consequence of the rest of this License.</span>
<span class="f2">+</span>
<span class="f2">+  8. If the distribution and/or use of the Program is restricted in</span>
<span class="f2">+certain countries either by patents or by copyrighted interfaces, the</span>
<span class="f2">+original copyright holder who places the Program under this License</span>
<span class="f2">+may add an explicit geographical distribution limitation excluding</span>
<span class="f2">+those countries, so that distribution is permitted only in or among</span>
<span class="f2">+countries not thus excluded.  In such case, this License incorporates</span>
<span class="f2">+the limitation as if written in the body of this License.</span>
<span class="f2">+</span>
<span class="f2">+  9. The Free Software Foundation may publish revised and/or new versions</span>
<span class="f2">+of the General Public License from time to time.  Such new versions will</span>
<span class="f2">+be similar in spirit to the present version, but may differ in detail to</span>
<span class="f2">+address new problems or concerns.</span>
<span class="f2">+</span>
<span class="f2">+Each version is given a distinguishing version number.  If the Program</span>
<span class="f2">+specifies a version number of this License which applies to it and &quot;any</span>
<span class="f2">+later version&quot;, you have the option of following the terms and conditions</span>
<span class="f2">+either of that version or of any later version published by the Free</span>
<span class="f2">+Software Foundation.  If the Program does not specify a version number of</span>
<span class="f2">+this License, you may choose any version ever published by the Free Software</span>
<span class="f2">+Foundation.</span>
<span class="f2">+</span>
<span class="f2">+  10. If you wish to incorporate parts of the Program into other free</span>
<span class="f2">+programs whose distribution conditions are different, write to the author</span>
<span class="f2">+to ask for permission.  For software which is copyrighted by the Free</span>
<span class="f2">+Software Foundation, write to the Free Software Foundation; we sometimes</span>
<span class="f2">+make exceptions for this.  Our decision will be guided by the two goals</span>
<span class="f2">+of preserving the free status of all derivatives of our free software and</span>
<span class="f2">+of promoting the sharing and reuse of software generally.</span>
<span class="f2">+</span>
<span class="f2">+                            NO WARRANTY</span>
<span class="f2">+</span>
<span class="f2">+  11. BECAUSE THE PROGRAM IS LICENSED FREE OF CHARGE, THERE IS NO WARRANTY</span>
<span class="f2">+FOR THE PROGRAM, TO THE EXTENT PERMITTED BY APPLICABLE LAW.  EXCEPT WHEN</span>
<span class="f2">+OTHERWISE STATED IN WRITING THE COPYRIGHT HOLDERS AND/OR OTHER PARTIES</span>
<span class="f2">+PROVIDE THE PROGRAM &quot;AS IS&quot; WITHOUT WARRANTY OF ANY KIND, EITHER EXPRESSED</span>
<span class="f2">+OR IMPLIED, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES OF</span>
<span class="f2">+MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE.  THE ENTIRE RISK AS</span>
<span class="f2">+TO THE QUALITY AND PERFORMANCE OF THE PROGRAM IS WITH YOU.  SHOULD THE</span>
<span class="f2">+PROGRAM PROVE DEFECTIVE, YOU ASSUME THE COST OF ALL NECESSARY SERVICING,</span>
<span class="f2">+REPAIR OR CORRECTION.</span>
<span class="f2">+</span>
<span class="f2">+  12. IN NO EVENT UNLESS REQUIRED BY APPLICABLE LAW OR AGREED TO IN WRITING</span>
<span class="f2">+WILL ANY COPYRIGHT HOLDER, OR ANY OTHER PARTY WHO MAY MODIFY AND/OR</span>
<span class="f2">+REDISTRIBUTE THE PROGRAM AS PERMITTED ABOVE, BE LIABLE TO YOU FOR DAMAGES,</span>
<span class="f2">+INCLUDING ANY GENERAL, SPECIAL, INCIDENTAL OR CONSEQUENTIAL DAMAGES ARISING</span>
<span class="f2">+OUT OF THE USE OR INABILITY TO USE THE PROGRAM (INCLUDING BUT NOT LIMITED</span>
<span class="f2">+TO LOSS OF DATA OR DATA BEING RENDERED INACCURATE OR LOSSES SUSTAINED BY</span>
<span class="f2">+YOU OR THIRD PARTIES OR A FAILURE OF THE PROGRAM TO OPERATE WITH ANY OTHER</span>
<span class="f2">+PROGRAMS), EVEN IF SUCH HOLDER OR OTHER PARTY HAS BEEN ADVISED OF THE</span>
<span class="f2">+POSSIBILITY OF SUCH DAMAGES.</span>
<span class="f2">+</span>
<span class="f2">+                     END OF TERMS AND CONDITIONS</span>
<span class="f2">+</span>
<span class="f2">+            How to Apply These Terms to Your New Programs</span>
<span class="f2">+</span>
<span class="f2">+  If you develop a new program, and you want it to be of the greatest</span>
<span class="f2">+possible use to the public, the best way to achieve this is to make it</span>
<span class="f2">+free software which everyone can redistribute and change under these terms.</span>
<span class="f2">+</span>
<span class="f2">+  To do so, attach the following notices to the program.  It is safest</span>
<span class="f2">+to attach them to the start of each source file to most effectively</span>
<span class="f2">+convey the exclusion of warranty; and each file should have at least</span>
<span class="f2">+the &quot;copyright&quot; line and a pointer to where the full notice is found.</span>
<span class="f2">+</span>
<span class="f2">+    &lt;one line to give the program's name and a brief idea of what it does.&gt;</span>
<span class="f2">+    Copyright (C) &lt;year&gt;  &lt;name of author&gt;</span>
<span class="f2">+</span>
<span class="f2">+    This program is free software; you can redistribute it and/or modify</span>
<span class="f2">+    it under the terms of the GNU General Public License as published by</span>
<span class="f2">+    the Free Software Foundation; either version 2 of the License, or</span>
<span class="f2">+    (at your option) any later version.</span>
<span class="f2">+</span>
<span class="f2">+    This program is distributed in the hope that it will be useful,</span>
<span class="f2">+    but WITHOUT ANY WARRANTY; without even the implied warranty of</span>
<span class="f2">+    MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the</span>
<span class="f2">+    GNU General Public License for more details.</span>
<span class="f2">+</span>
<span class="f2">+    You should have received a copy of the GNU General Public License along</span>
<span class="f2">+    with this program; if not, write to the Free Software Foundation, Inc.,</span>
<span class="f2">+    51 Franklin Street, Fifth Floor, Boston, MA 02110-1301 USA.</span>
<span class="f2">+</span>
<span class="f2">+Also add information on how to contact you by electronic and paper mail.</span>
<span class="f2">+</span>
<span class="f2">+If the program is interactive, make it output a short notice like this</span>
<span class="f2">+when it starts in an interactive mode:</span>
<span class="f2">+</span>
<span class="f2">+    Gnomovision version 69, Copyright (C) year name of author</span>
<span class="f2">+    Gnomovision comes with ABSOLUTELY NO WARRANTY; for details type `show w'.</span>
<span class="f2">+    This is free software, and you are welcome to redistribute it</span>
<span class="f2">+    under certain conditions; type `show c' for details.</span>
<span class="f2">+</span>
<span class="f2">+The hypothetical commands `show w' and `show c' should show the appropriate</span>
<span class="f2">+parts of the General Public License.  Of course, the commands you use may</span>
<span class="f2">+be called something other than `show w' and `show c'; they could even be</span>
<span class="f2">+mouse-clicks or menu items--whatever suits your program.</span>
<span class="f2">+</span>
<span class="f2">+You should also get your employer (if you work as a programmer) or your</span>
<span class="f2">+school, if any, to sign a &quot;copyright disclaimer&quot; for the program, if</span>
<span class="f2">+necessary.  Here is a sample; alter the names:</span>
<span class="f2">+</span>
<span class="f2">+  Yoyodyne, Inc., hereby disclaims all copyright interest in the program</span>
<span class="f2">+  `Gnomovision' (which makes passes at compilers) written by James Hacker.</span>
<span class="f2">+</span>
<span class="f2">+  &lt;signature of Ty Coon&gt;, 1 April 1989</span>
<span class="f2">+  Ty Coon, President of Vice</span>
<span class="f2">+</span>
<span class="f2">+This General Public License does not permit incorporating your program into</span>
<span class="f2">+proprietary programs.  If your program is a subroutine library, you may</span>
<span class="f2">+consider it more useful to permit linking proprietary applications with the</span>
<span class="f2">+library.  If this is what you want to do, use the GNU Lesser General</span>
<span class="f2">+Public License instead of this License.</span>
<span class="bold">diff --git a/platform/ot-kvm/sonic-platform-modules-ot-kvm/README.md b/platform/ot-kvm/sonic-platform-modules-ot-kvm/README.md</span>
<span class="bold">new file mode 100644</span>
<span class="bold">index 000000000..448c8722f</span>
<span class="bold">--- /dev/null</span>
<span class="bold">+++ b/platform/ot-kvm/sonic-platform-modules-ot-kvm/README.md</span>
<span class="f6">@@ -0,0 +1,4 @@</span>
<span class="f2">+OT-KVM Platform Support for SONiC</span>
<span class="f2">+================================</span>
<span class="f2">+</span>
<span class="f2">+SONiC platform monitoring implementation for OT-KVM virtual hardware.</span>
<span class="bold">diff --git a/platform/ot-kvm/sonic-platform-modules-ot-kvm/debian/changelog b/platform/ot-kvm/sonic-platform-modules-ot-kvm/debian/changelog</span>
<span class="bold">new file mode 100644</span>
<span class="bold">index 000000000..1d1e837fc</span>
<span class="bold">--- /dev/null</span>
<span class="bold">+++ b/platform/ot-kvm/sonic-platform-modules-ot-kvm/debian/changelog</span>
<span class="f6">@@ -0,0 +1,4 @@</span>
<span class="f2">+sonic-ot-kvm-platform-modules (1.1) unstable; urgency=low</span>
<span class="f2">+  * Initial release: Support SONiC platform API for OT-KVM.</span>
<span class="f2">+</span>
<span class="f2">+ -- Molex &lt;lu.mao@molex.com&gt;  Fri, 10 Feb 2023 16:00:00 +0800</span>
<span class="bold">diff --git a/platform/ot-kvm/sonic-platform-modules-ot-kvm/debian/compat b/platform/ot-kvm/sonic-platform-modules-ot-kvm/debian/compat</span>
<span class="bold">new file mode 100644</span>
<span class="bold">index 000000000..f599e28b8</span>
<span class="bold">--- /dev/null</span>
<span class="bold">+++ b/platform/ot-kvm/sonic-platform-modules-ot-kvm/debian/compat</span>
<span class="f6">@@ -0,0 +1 @@</span>
<span class="f2">+10</span>
<span class="bold">diff --git a/platform/ot-kvm/sonic-platform-modules-ot-kvm/debian/control b/platform/ot-kvm/sonic-platform-modules-ot-kvm/debian/control</span>
<span class="bold">new file mode 100644</span>
<span class="bold">index 000000000..00d135c2e</span>
<span class="bold">--- /dev/null</span>
<span class="bold">+++ b/platform/ot-kvm/sonic-platform-modules-ot-kvm/debian/control</span>
<span class="f6">@@ -0,0 +1,10 @@</span>
<span class="f2">+Source: sonic-ot-kvm-platform-modules</span>
<span class="f2">+Section: main</span>
<span class="f2">+Priority: extra</span>
<span class="f2">+Maintainer: Molex &lt;lu.mao@molex.com&gt;</span>
<span class="f2">+Build-Depends: debhelper (&gt;= 9), bzip2</span>
<span class="f2">+Standards-Version: 3.9.3</span>
<span class="f2">+</span>
<span class="f2">+Package: sonic-platform-ot-kvm-ols-v</span>
<span class="f2">+Architecture: amd64</span>
<span class="f2">+Description: kernel modules for platform devices such as fan, led, sfp</span>
<span class="bold">diff --git a/platform/ot-kvm/sonic-platform-modules-ot-kvm/debian/rules b/platform/ot-kvm/sonic-platform-modules-ot-kvm/debian/rules</span>
<span class="bold">new file mode 100755</span>
<span class="bold">index 000000000..72e2c41db</span>
<span class="bold">--- /dev/null</span>
<span class="bold">+++ b/platform/ot-kvm/sonic-platform-modules-ot-kvm/debian/rules</span>
<span class="f6">@@ -0,0 +1,37 @@</span>
<span class="f2">+#!/usr/bin/make -f</span>
<span class="f2">+</span>
<span class="f2">+export INSTALL_MOD_DIR:=extra</span>
<span class="f2">+</span>
<span class="f2">+PACKAGE_PRE_NAME := sonic-platform-ot-kvm</span>
<span class="f2">+KVERSION   ?= $(shell uname -r)</span>
<span class="f2">+KERNEL_SRC :=  /lib/modules/$(KVERSION)</span>
<span class="f2">+MOD_SRC_DIR:= $(shell pwd)</span>
<span class="f2">+MODULE_DIRS:= ols-v</span>
<span class="f2">+</span>
<span class="f2">+%:</span>
<span class="f2">+</span>	<span class="f2">dh $@ --with python3</span>
<span class="f2">+</span>
<span class="f2">+override_dh_auto_build:</span>
<span class="f2">+</span>	<span class="f2">(for mod in $(MODULE_DIRS); do \</span>
<span class="f2">+</span>	<span class="f2">    cd $(MOD_SRC_DIR)/$${mod}; \</span>
<span class="f2">+</span>	<span class="f2">    if [ -f setup.py ]; then \</span>
<span class="f2">+</span>	<span class="f2">        python3 setup.py bdist_wheel -d $(MOD_SRC_DIR)/$${mod}; \</span>
<span class="f2">+</span>		<span class="f2">echo &quot;Finished making whl package for $$mod&quot;; \</span>
<span class="f2">+</span>	<span class="f2">    fi; \</span>
<span class="f2">+</span>	<span class="f2">    cd $(MOD_SRC_DIR); \</span>
<span class="f2">+</span>	<span class="f2">done)</span>
<span class="f2">+</span>
<span class="f2">+override_dh_auto_install:</span>
<span class="f2">+</span>	<span class="f2">(for mod in $(MODULE_DIRS); do \</span>
<span class="f2">+</span>	<span class="f2">    cd $(MOD_SRC_DIR)/$${mod}; \</span>
<span class="f2">+</span>	<span class="f2">    python3 setup.py install --root=$(MOD_SRC_DIR)/debian/$(PACKAGE_PRE_NAME)-$${mod} --install-layout=deb; \</span>
<span class="f2">+</span>	<span class="f2">    cd $(MOD_SRC_DIR); \</span>
<span class="f2">+</span>	<span class="f2">done)</span>
<span class="f2">+</span>
<span class="f2">+override_dh_usrlocal:</span>
<span class="f2">+</span>
<span class="f2">+override_dh_pysupport:</span>
<span class="f2">+</span>
<span class="f2">+override_dh_clean:</span>
<span class="f2">+</span>	<span class="f2">dh_clean</span>
<span class="f2">+</span>
<span class="bold">diff --git a/platform/ot-kvm/sonic-platform-modules-ot-kvm/debian/sonic-platform-ot-kvm-ols-v.install b/platform/ot-kvm/sonic-platform-modules-ot-kvm/debian/sonic-platform-ot-kvm-ols-v.install</span>
<span class="bold">new file mode 100644</span>
<span class="bold">index 000000000..44fbcb113</span>
<span class="bold">--- /dev/null</span>
<span class="bold">+++ b/platform/ot-kvm/sonic-platform-modules-ot-kvm/debian/sonic-platform-ot-kvm-ols-v.install</span>
<span class="f6">@@ -0,0 +1 @@</span>
<span class="f2">+ols-v/sonic_platform-1.0-py3-none-any.whl usr/share/sonic/device/x86_64-ot-kvm_x86_64-r0</span>
\ No newline at end of file
<span class="bold">diff --git a/platform/ot-kvm/sonic-platform-modules-ot-kvm/ols-v/setup.py b/platform/ot-kvm/sonic-platform-modules-ot-kvm/ols-v/setup.py</span>
<span class="bold">new file mode 100644</span>
<span class="bold">index 000000000..f2f64001c</span>
<span class="bold">--- /dev/null</span>
<span class="bold">+++ b/platform/ot-kvm/sonic-platform-modules-ot-kvm/ols-v/setup.py</span>
<span class="f6">@@ -0,0 +1,29 @@</span>
<span class="f2">+from setuptools import setup</span>
<span class="f2">+</span>
<span class="f2">+setup(</span>
<span class="f2">+    name='sonic_platform',</span>
<span class="f2">+    version='1.0',</span>
<span class="f2">+    description='SONiC platform API implementation on OT-KVM Platforms',</span>
<span class="f2">+    license='Apache 2.0',</span>
<span class="f2">+    author='Molex',</span>
<span class="f2">+    author_email='lu.mao@molex.com',</span>
<span class="f2">+    url='https://github.com/Azure/sonic-buildimage',</span>
<span class="f2">+    maintainer='Molex',</span>
<span class="f2">+    maintainer_email='lu.mao@molex.com',</span>
<span class="f2">+    packages=['sonic_platform'],</span>
<span class="f2">+    classifiers=[</span>
<span class="f2">+        'Development Status :: 3 - Alpha',</span>
<span class="f2">+        'Environment :: Plugins',</span>
<span class="f2">+        'Intended Audience :: Developers',</span>
<span class="f2">+        'Intended Audience :: Information Technology',</span>
<span class="f2">+        'Intended Audience :: System Administrators',</span>
<span class="f2">+        'License :: OSI Approved :: Apache Software License',</span>
<span class="f2">+        'Natural Language :: English',</span>
<span class="f2">+        'Operating System :: POSIX :: Linux',</span>
<span class="f2">+        'Programming Language :: Python :: 2.7',</span>
<span class="f2">+        'Programming Language :: Python :: 3.7',</span>
<span class="f2">+        'Topic :: Utilities',</span>
<span class="f2">+    ],</span>
<span class="f2">+    keywords='sonic SONiC platform PLATFORM',</span>
<span class="f2">+)</span>
<span class="f2">+</span>
<span class="bold">diff --git a/platform/ot-kvm/sonic-platform-modules-ot-kvm/ols-v/sonic_platform/__init__.py b/platform/ot-kvm/sonic-platform-modules-ot-kvm/ols-v/sonic_platform/__init__.py</span>
<span class="bold">new file mode 100644</span>
<span class="bold">index 000000000..4a5c0ad89</span>
<span class="bold">--- /dev/null</span>
<span class="bold">+++ b/platform/ot-kvm/sonic-platform-modules-ot-kvm/ols-v/sonic_platform/__init__.py</span>
<span class="f6">@@ -0,0 +1,2 @@</span>
<span class="f2">+__all__ = [&quot;platform&quot;, &quot;chassis&quot;, &quot;module&quot;, &quot;fan&quot;, &quot;fan_drawer&quot;, &quot;psu&quot;, &quot;thermal&quot;]</span>
<span class="f2">+from sonic_platform import *</span>
<span class="bold">diff --git a/platform/ot-kvm/sonic-platform-modules-ot-kvm/ols-v/sonic_platform/chassis.py b/platform/ot-kvm/sonic-platform-modules-ot-kvm/ols-v/sonic_platform/chassis.py</span>
<span class="bold">new file mode 100644</span>
<span class="bold">index 000000000..b63a622aa</span>
<span class="bold">--- /dev/null</span>
<span class="bold">+++ b/platform/ot-kvm/sonic-platform-modules-ot-kvm/ols-v/sonic_platform/chassis.py</span>
<span class="f6">@@ -0,0 +1,345 @@</span>
<span class="f2">+#!/usr/bin/env python</span>
<span class="f2">+</span>
<span class="f2">+#############################################################################</span>
<span class="f2">+# OT-KVM</span>
<span class="f2">+#</span>
<span class="f2">+# Module contains an implementation of SONiC Platform Base API and</span>
<span class="f2">+# provides the platformi information</span>
<span class="f2">+#</span>
<span class="f2">+#############################################################################</span>
<span class="f2">+</span>
<span class="f2">+</span>
<span class="f2">+try:</span>
<span class="f2">+    import os</span>
<span class="f2">+    import re</span>
<span class="f2">+    import time</span>
<span class="f2">+    import json</span>
<span class="f2">+    from sonic_platform_base.device_base import DeviceBase</span>
<span class="f2">+    from sonic_platform_base.chassis_base import ChassisBase</span>
<span class="f2">+    from sonic_platform.component import Component</span>
<span class="f2">+    from sonic_platform.fan_drawer import FanDrawer</span>
<span class="f2">+    from sonic_platform.module import Module</span>
<span class="f2">+    from sonic_platform.psu import Psu</span>
<span class="f2">+    from sonic_platform.thermal import Thermal</span>
<span class="f2">+    from sonic_platform.watchdog import Watchdog</span>
<span class="f2">+    from HalPlatformApi.client import *</span>
<span class="f2">+except ImportError as e:</span>
<span class="f2">+    raise ImportError(str(e) + &quot;- required module not found&quot;)</span>
<span class="f2">+</span>
<span class="f2">+</span>
<span class="f2">+class Chassis(ChassisBase):</span>
<span class="f2">+    &quot;&quot;&quot;</span>
<span class="f2">+    OT-KVM Platform-specific Chassis class</span>
<span class="f2">+    &quot;&quot;&quot;</span>
<span class="f2">+</span>
<span class="f2">+    def __init__(self):</span>
<span class="f2">+</span>
<span class="f2">+        ChassisBase.__init__(self)</span>
<span class="f2">+</span>
<span class="f2">+        # Initialize HAL</span>
<span class="f2">+        if not Initialize():</span>
<span class="f2">+            print('HAL init failed.')</span>
<span class="f2">+</span><span class="b1">        </span>
<span class="f2">+        # Get chassis device list</span>
<span class="f2">+        strList = ChassisGetList()</span>
<span class="f2">+</span>
<span class="f2">+        # Decode to json</span>
<span class="f2">+        self.desc = json.loads(strList)</span>
<span class="f2">+</span>
<span class="f2">+        # module</span>
<span class="f2">+        for item in self.desc['chassis']['modules']:</span>
<span class="f2">+            module = Module(item)</span>
<span class="f2">+            self._module_list.append(module)</span>
<span class="f2">+</span>
<span class="f2">+        fandrawer = FanDrawer(self.desc['chassis']['fan_drawers'])</span>
<span class="f2">+        self._fan_drawer_list.append(fandrawer)</span>
<span class="f2">+        self._fan_list.extend(fandrawer._fan_list)</span>
<span class="f2">+</span>
<span class="f2">+        for item in self.desc['chassis']['psus']:</span>
<span class="f2">+            psu = Psu(item)</span>
<span class="f2">+            self._psu_list.append(psu)</span>
<span class="f2">+</span>
<span class="f2">+        for item in self.desc['chassis']['thermals']:</span>
<span class="f2">+            thermal = Thermal(item)</span>
<span class="f2">+            self._thermal_list.append(thermal)</span>
<span class="f2">+</span>
<span class="f2">+        for item in self.desc['chassis']['components']:</span>
<span class="f2">+            component = Component(item)</span>
<span class="f2">+            self._component_list.append(component)</span>
<span class="f2">+</span>
<span class="f2">+    def __del__(self):</span>
<span class="f2">+        Destroy()</span>
<span class="f2">+</span>
<span class="f2">+    def get_name(self):</span>
<span class="f2">+        &quot;&quot;&quot;</span>
<span class="f2">+        Retrieves the hardware product name for the chassis</span>
<span class="f2">+</span>
<span class="f2">+        Returns:</span>
<span class="f2">+            A string containing the hardware product name for this chassis.</span>
<span class="f2">+        &quot;&quot;&quot;</span>
<span class="f2">+        return self.desc['chassis']['name']</span>
<span class="f2">+</span>
<span class="f2">+    def get_presence(self):</span>
<span class="f2">+        &quot;&quot;&quot;</span>
<span class="f2">+        Retrieves the presence of the device</span>
<span class="f2">+</span>
<span class="f2">+        Returns:</span>
<span class="f2">+            bool: True if device is present, False if not</span>
<span class="f2">+        &quot;&quot;&quot;</span>
<span class="f2">+        return True</span>
<span class="f2">+</span>
<span class="f2">+    def get_model(self):</span>
<span class="f2">+        &quot;&quot;&quot;</span>
<span class="f2">+        Retrieves the model number (or part number) of the device</span>
<span class="f2">+</span>
<span class="f2">+        Returns:</span>
<span class="f2">+            string: Model/part number of device</span>
<span class="f2">+        &quot;&quot;&quot;</span>
<span class="f2">+        return ChassisGetModel()</span>
<span class="f2">+</span>
<span class="f2">+    def get_serial(self):</span>
<span class="f2">+        &quot;&quot;&quot;</span>
<span class="f2">+        Retrieves the serial number of the device</span>
<span class="f2">+</span>
<span class="f2">+        Returns:</span>
<span class="f2">+            string: Serial number of device</span>
<span class="f2">+        &quot;&quot;&quot;</span>
<span class="f2">+        return ChassisGetSerial()</span>
<span class="f2">+</span>
<span class="f2">+    def get_revision(self):</span>
<span class="f2">+        &quot;&quot;&quot;</span>
<span class="f2">+        Retrieves the hardware revision of the device</span>
<span class="f2">+</span>
<span class="f2">+        Returns:</span>
<span class="f2">+            string: Revision value of device</span>
<span class="f2">+        &quot;&quot;&quot;</span>
<span class="f2">+        return ChassisGetRevision()</span>
<span class="f2">+</span>
<span class="f2">+    def get_status(self):</span>
<span class="f2">+        &quot;&quot;&quot;</span>
<span class="f2">+        Retrieves the operational status of the device</span>
<span class="f2">+</span>
<span class="f2">+        Returns:</span>
<span class="f2">+            A boolean value, True if device is operating properly, False if not</span>
<span class="f2">+        &quot;&quot;&quot;</span>
<span class="f2">+        return True</span>
<span class="f2">+</span>
<span class="f2">+    def get_position_in_parent(self):</span>
<span class="f2">+        &quot;&quot;&quot;</span>
<span class="f2">+        Retrieves 1-based relative physical position in parent device. If the agent cannot determine the parent-relative position</span>
<span class="f2">+        for some reason, or if the associated value of entPhysicalContainedIn is '0', then the value '-1' is returned</span>
<span class="f2">+        Returns:</span>
<span class="f2">+            integer: The 1-based relative physical position in parent device or -1 if cannot determine the position</span>
<span class="f2">+        &quot;&quot;&quot;</span>
<span class="f2">+        return -1</span>
<span class="f2">+</span>
<span class="f2">+    def is_replaceable(self):</span>
<span class="f2">+        &quot;&quot;&quot;</span>
<span class="f2">+        Indicate whether this device is replaceable.</span>
<span class="f2">+        Returns:</span>
<span class="f2">+            bool: True if it is replaceable.</span>
<span class="f2">+        &quot;&quot;&quot;</span>
<span class="f2">+        return False</span>
<span class="f2">+</span>
<span class="f2">+    def get_base_mac(self):</span>
<span class="f2">+        &quot;&quot;&quot;</span>
<span class="f2">+        Retrieves the base MAC address for the chassis</span>
<span class="f2">+</span>
<span class="f2">+        Returns:</span>
<span class="f2">+            A string containing the MAC address in the format</span>
<span class="f2">+            'XX:XX:XX:XX:XX:XX'</span>
<span class="f2">+        &quot;&quot;&quot;</span>
<span class="f2">+        return ChassisGetBaseMac()</span>
<span class="f2">+</span>
<span class="f2">+    def get_system_eeprom_info(self):</span>
<span class="f2">+        &quot;&quot;&quot;</span>
<span class="f2">+        Retrieves the full content of system EEPROM information for the chassis</span>
<span class="f2">+</span>
<span class="f2">+        Returns:</span>
<span class="f2">+            A dictionary where keys are the type code defined in</span>
<span class="f2">+            OCP ONIE TlvInfo EEPROM format and values are their corresponding</span>
<span class="f2">+            values.</span>
<span class="f2">+            Ex. { '0x21':'AG9064', '0x22':'V1.0', '0x23':'AG9064-0109867821',</span>
<span class="f2">+                  '0x24':'001c0f000fcd0a', '0x25':'02/03/2018 16:22:00',</span>
<span class="f2">+                  '0x26':'01', '0x27':'REV01', '0x28':'AG9064-C2358-16G'}</span>
<span class="f2">+        &quot;&quot;&quot;</span>
<span class="f2">+</span>
<span class="f2">+        return None</span>
<span class="f2">+</span>
<span class="f2">+    def get_reboot_cause(self):</span>
<span class="f2">+        &quot;&quot;&quot;</span>
<span class="f2">+        Retrieves the cause of the previous reboot</span>
<span class="f2">+</span>
<span class="f2">+        Returns:</span>
<span class="f2">+            A tuple (string, string) where the first element is a string</span>
<span class="f2">+            containing the cause of the previous reboot. This string must be</span>
<span class="f2">+            one of the predefined strings in this class. If the first string</span>
<span class="f2">+            is &quot;REBOOT_CAUSE_HARDWARE_OTHER&quot;, the second string can be used</span>
<span class="f2">+            to pass a description of the reboot cause.</span>
<span class="f2">+        &quot;&quot;&quot;</span>
<span class="f2">+        return ChassisBase.REBOOT_CAUSE_NON_HARDWARE</span>
<span class="f2">+</span>
<span class="f2">+    def get_supervisor_slot(self):</span>
<span class="f2">+        &quot;&quot;&quot;</span>
<span class="f2">+        Retrieves the physical-slot of the supervisor-module in the modular</span>
<span class="f2">+        chassis. On the supervisor or line-card modules, it will return the</span>
<span class="f2">+        physical-slot of the supervisor-module.</span>
<span class="f2">+</span>
<span class="f2">+        On the fixed-platforms, the API can be ignored.</span>
<span class="f2">+</span>
<span class="f2">+        Users of the API can catch the exception and return a default</span>
<span class="f2">+        ModuleBase.MODULE_INVALID_SLOT and bypass code for fixed-platforms.</span>
<span class="f2">+</span>
<span class="f2">+        Returns:</span>
<span class="f2">+            An integer, the vendor specific physical slot identifier of the</span>
<span class="f2">+            supervisor module in the modular-chassis.</span>
<span class="f2">+        &quot;&quot;&quot;</span>
<span class="f2">+        return ChassisGetSlot()</span>
<span class="f2">+</span>
<span class="f2">+    def get_my_slot(self):</span>
<span class="f2">+        &quot;&quot;&quot;</span>
<span class="f2">+        Retrieves the physical-slot of this module in the modular chassis.</span>
<span class="f2">+        On the supervisor, it will return the physical-slot of the supervisor</span>
<span class="f2">+        module. On the linecard, it will return the physical-slot of the</span>
<span class="f2">+        linecard module where this instance of SONiC is running.</span>
<span class="f2">+</span>
<span class="f2">+        On the fixed-platforms, the API can be ignored.</span>
<span class="f2">+</span>
<span class="f2">+        Users of the API can catch the exception and return a default</span>
<span class="f2">+        ModuleBase.MODULE_INVALID_SLOT and bypass code for fixed-platforms.</span>
<span class="f2">+</span>
<span class="f2">+        Returns:</span>
<span class="f2">+            An integer, the vendor specific physical slot identifier of this</span>
<span class="f2">+            module in the modular-chassis.</span>
<span class="f2">+        &quot;&quot;&quot;</span>
<span class="f2">+        return ChassisGetSlot()</span>
<span class="f2">+</span>
<span class="f2">+    def is_modular_chassis(self):</span>
<span class="f2">+        &quot;&quot;&quot;</span>
<span class="f2">+        Retrieves whether the sonic instance is part of modular chassis</span>
<span class="f2">+</span>
<span class="f2">+        Returns:</span>
<span class="f2">+            A bool value, should return False by default or for fixed-platforms.</span>
<span class="f2">+            Should return True for supervisor-cards, line-cards etc running as part</span>
<span class="f2">+            of modular-chassis.</span>
<span class="f2">+        &quot;&quot;&quot;</span>
<span class="f2">+        return ChassisIsModular()</span>
<span class="f2">+</span>
<span class="f2">+    def init_midplane_switch(self):</span>
<span class="f2">+        &quot;&quot;&quot;</span>
<span class="f2">+        Initializes the midplane functionality of the modular chassis. For</span>
<span class="f2">+        example, any validation of midplane, populating any lookup tables etc</span>
<span class="f2">+        can be done here. The expectation is that the required kernel modules,</span>
<span class="f2">+        ip-address assignment etc are done before the pmon, database dockers</span>
<span class="f2">+        are up.</span>
<span class="f2">+</span>
<span class="f2">+        Returns:</span>
<span class="f2">+            A bool value, should return True if the midplane initialized</span>
<span class="f2">+            successfully.</span>
<span class="f2">+        &quot;&quot;&quot;</span>
<span class="f2">+        return True</span>
<span class="f2">+</span>
<span class="f2">+    def get_module_index(self, module_name):</span>
<span class="f2">+        &quot;&quot;&quot;</span>
<span class="f2">+        Retrieves module index from the module name</span>
<span class="f2">+</span>
<span class="f2">+        Args:</span>
<span class="f2">+            module_name: A string, prefixed by SUPERVISOR, LINE-CARD or FABRIC-CARD</span>
<span class="f2">+            Ex. SUPERVISOR0, LINE-CARD1, FABRIC-CARD5</span>
<span class="f2">+</span>
<span class="f2">+        Returns:</span>
<span class="f2">+            An integer, the index of the ModuleBase object in the module_list</span>
<span class="f2">+        &quot;&quot;&quot;</span>
<span class="f2">+</span>
<span class="f2">+        index = 0</span>
<span class="f2">+        for item in self._module_list:</span>
<span class="f2">+            if (item.get_name() == module_name):</span>
<span class="f2">+                break</span>
<span class="f2">+            index += 1</span>
<span class="f2">+</span>
<span class="f2">+        return index</span>
<span class="f2">+</span>
<span class="f2">+    def get_thermal_manager(self):</span>
<span class="f2">+        &quot;&quot;&quot;</span>
<span class="f2">+        Retrieves thermal manager class on this chassis</span>
<span class="f2">+        :return: A class derived from ThermalManagerBase representing the</span>
<span class="f2">+        specified thermal manager. ThermalManagerBase is returned as default</span>
<span class="f2">+        &quot;&quot;&quot;</span>
<span class="f2">+        return None</span>
<span class="f2">+</span>
<span class="f2">+    def get_port_or_cage_type(self, index):</span>
<span class="f2">+        &quot;&quot;&quot;</span>
<span class="f2">+        Retrieves sfp port or cage type corresponding to physical port &lt;index&gt;</span>
<span class="f2">+</span>
<span class="f2">+        Args:</span>
<span class="f2">+            index: An integer (&gt;=0), the index of the sfp to retrieve.</span>
<span class="f2">+                   The index should correspond to the physical port in a chassis.</span>
<span class="f2">+                   For example:-</span>
<span class="f2">+                   1 for Ethernet0, 2 for Ethernet4 and so on for one platform.</span>
<span class="f2">+                   0 for Ethernet0, 1 for Ethernet4 and so on for another platform.</span>
<span class="f2">+</span>
<span class="f2">+        Returns:</span>
<span class="f2">+            The masks of all types of port or cage that can be supported on the port</span>
<span class="f2">+            Types are defined in sfp_base.py</span>
<span class="f2">+            Eg.</span>
<span class="f2">+                Both SFP and SFP+ are supported on the port, the return value should be 0x0a</span>
<span class="f2">+                which is 0x02 | 0x08</span>
<span class="f2">+        &quot;&quot;&quot;</span>
<span class="f2">+        return 0</span>
<span class="f2">+</span>
<span class="f2">+    def set_status_led(self, color):</span>
<span class="f2">+        &quot;&quot;&quot;</span>
<span class="f2">+        Sets the state of the system LED</span>
<span class="f2">+</span>
<span class="f2">+        Args:</span>
<span class="f2">+            color: A string representing the color with which to set the</span>
<span class="f2">+                   system LED</span>
<span class="f2">+</span>
<span class="f2">+        Returns:</span>
<span class="f2">+            bool: True if system LED state is set successfully, False if not</span>
<span class="f2">+        &quot;&quot;&quot;</span>
<span class="f2">+        return ChassisSetLedState(color)</span>
<span class="f2">+</span>
<span class="f2">+    def get_status_led(self):</span>
<span class="f2">+        &quot;&quot;&quot;</span>
<span class="f2">+        Gets the state of the system LED</span>
<span class="f2">+</span>
<span class="f2">+        Returns:</span>
<span class="f2">+            A string, one of the valid LED color strings which could be vendor</span>
<span class="f2">+            specified.</span>
<span class="f2">+        &quot;&quot;&quot;</span>
<span class="f2">+        return ChassisGetLedState()</span>
<span class="f2">+</span>
<span class="f2">+    def get_change_event(self, timeout=0):</span>
<span class="f2">+        &quot;&quot;&quot;</span>
<span class="f2">+        Returns a nested dictionary containing all devices which have</span>
<span class="f2">+        experienced a change at chassis level</span>
<span class="f2">+</span>
<span class="f2">+        Args:</span>
<span class="f2">+            timeout: Timeout in milliseconds (optional). If timeout == 0,</span>
<span class="f2">+                this method will block until a change is detected.</span>
<span class="f2">+</span>
<span class="f2">+        Returns:</span>
<span class="f2">+            (bool, dict):</span>
<span class="f2">+                - True if call successful, False if not;</span>
<span class="f2">+                - A nested dictionary where key is a device type,</span>
<span class="f2">+                  value is a dictionary with key:value pairs in the format of</span>
<span class="f2">+                  {'device_id':'device_event'},</span>
<span class="f2">+                  where device_id is the device ID for this device and</span>
<span class="f2">+                        device_event,</span>
<span class="f2">+                             status='1' represents device inserted,</span>
<span class="f2">+                             status='0' represents device removed.</span>
<span class="f2">+                  Ex. {'fan':{'0':'0', '2':'1'}, 'sfp':{'11':'0'}}</span>
<span class="f2">+                      indicates that fan 0 has been removed, fan 2</span>
<span class="f2">+                      has been inserted and sfp 11 has been removed.</span>
<span class="f2">+                  Specifically for SFP event, besides SFP plug in and plug out,</span>
<span class="f2">+                  there are some other error event could be raised from SFP, when</span>
<span class="f2">+                  these error happened, SFP eeprom will not be avalaible, XCVRD shall</span>
<span class="f2">+                  stop to read eeprom before SFP recovered from error status.</span>
<span class="f2">+                      status='2' I2C bus stuck,</span>
<span class="f2">+                      status='3' Bad eeprom,</span>
<span class="f2">+                      status='4' Unsupported cable,</span>
<span class="f2">+                      status='5' High Temperature,</span>
<span class="f2">+                      status='6' Bad cable.</span>
<span class="f2">+        &quot;&quot;&quot;</span>
<span class="f2">+        return (False, {})</span>
<span class="bold">diff --git a/platform/ot-kvm/sonic-platform-modules-ot-kvm/ols-v/sonic_platform/component.py b/platform/ot-kvm/sonic-platform-modules-ot-kvm/ols-v/sonic_platform/component.py</span>
<span class="bold">new file mode 100644</span>
<span class="bold">index 000000000..f9940aec2</span>
<span class="bold">--- /dev/null</span>
<span class="bold">+++ b/platform/ot-kvm/sonic-platform-modules-ot-kvm/ols-v/sonic_platform/component.py</span>
<span class="f6">@@ -0,0 +1,136 @@</span>
<span class="f2">+#!/usr/bin/env python</span>
<span class="f2">+</span>
<span class="f2">+########################################################################</span>
<span class="f2">+# OT-KVM</span>
<span class="f2">+#</span>
<span class="f2">+# Module contains an implementation of SONiC Platform Base API and</span>
<span class="f2">+# provides the Components' (e.g., BIOS, CPLD, FPGA, etc.) available in</span>
<span class="f2">+# the platform</span>
<span class="f2">+#</span>
<span class="f2">+########################################################################</span>
<span class="f2">+</span>
<span class="f2">+try:</span>
<span class="f2">+    import json</span>
<span class="f2">+    import os</span>
<span class="f2">+    import re</span>
<span class="f2">+    import subprocess</span>
<span class="f2">+    import tarfile</span>
<span class="f2">+    from sonic_platform_base.component_base import ComponentBase</span>
<span class="f2">+    from HalPlatformApi.client import *</span>
<span class="f2">+except ImportError as e:</span>
<span class="f2">+    raise ImportError(str(e) + &quot;- required module not found&quot;)</span>
<span class="f2">+</span>
<span class="f2">+</span>
<span class="f2">+class Component(ComponentBase):</span>
<span class="f2">+    &quot;&quot;&quot;OT-KVM Platform-specific Component class&quot;&quot;&quot;</span>
<span class="f2">+</span>
<span class="f2">+    def __init__(self, desc):</span>
<span class="f2">+</span>
<span class="f2">+        ComponentBase.__init__(self)</span>
<span class="f2">+        self.desc = desc</span>
<span class="f2">+        self.name = desc['name']</span>
<span class="f2">+</span>
<span class="f2">+    def get_name(self):</span>
<span class="f2">+        &quot;&quot;&quot;</span>
<span class="f2">+        Retrieves the name of the component</span>
<span class="f2">+</span>
<span class="f2">+        Returns:</span>
<span class="f2">+            A string containing the name of the component</span>
<span class="f2">+        &quot;&quot;&quot;</span>
<span class="f2">+        return self.name</span>
<span class="f2">+</span>
<span class="f2">+    def get_description(self):</span>
<span class="f2">+        &quot;&quot;&quot;</span>
<span class="f2">+        Retrieves the description of the component</span>
<span class="f2">+</span>
<span class="f2">+        Returns:</span>
<span class="f2">+            A string containing the description of the component</span>
<span class="f2">+        &quot;&quot;&quot;</span>
<span class="f2">+        return self.desc['description']</span>
<span class="f2">+</span>
<span class="f2">+    def get_firmware_version(self):</span>
<span class="f2">+        &quot;&quot;&quot;</span>
<span class="f2">+        Retrieves the firmware version of the component</span>
<span class="f2">+</span>
<span class="f2">+        Returns:</span>
<span class="f2">+            A string containing the firmware version of the component</span>
<span class="f2">+        &quot;&quot;&quot;</span>
<span class="f2">+        return ComponentGetFwVer(self.name)</span>
<span class="f2">+</span>
<span class="f2">+    def get_available_firmware_version(self, image_path):</span>
<span class="f2">+        &quot;&quot;&quot;</span>
<span class="f2">+        Retrieves the available firmware version of the component</span>
<span class="f2">+</span>
<span class="f2">+        Note: the firmware version will be read from image</span>
<span class="f2">+</span>
<span class="f2">+        Args:</span>
<span class="f2">+            image_path: A string, path to firmware image</span>
<span class="f2">+</span>
<span class="f2">+        Returns:</span>
<span class="f2">+            A string containing the available firmware version of the component</span>
<span class="f2">+        &quot;&quot;&quot;</span>
<span class="f2">+        return None</span>
<span class="f2">+</span>
<span class="f2">+    def install_firmware(self, image_path):</span>
<span class="f2">+        &quot;&quot;&quot;</span>
<span class="f2">+        Installs firmware to the component</span>
<span class="f2">+</span>
<span class="f2">+        Args:</span>
<span class="f2">+            image_path: A string, path to firmware image</span>
<span class="f2">+</span>
<span class="f2">+        Returns:</span>
<span class="f2">+            A boolean, True if install was successful, False if not</span>
<span class="f2">+        &quot;&quot;&quot;</span>
<span class="f2">+        return False</span>
<span class="f2">+</span>
<span class="f2">+    def update_firmware(self, image_path):</span>
<span class="f2">+        &quot;&quot;&quot;</span>
<span class="f2">+        Updates firmware of the component</span>
<span class="f2">+</span>
<span class="f2">+        This API performs firmware update: it assumes firmware installation and loading in a single call.</span>
<span class="f2">+        In case platform component requires some extra steps (apart from calling Low Level Utility)</span>
<span class="f2">+        to load the installed firmware (e.g, reboot, power cycle, etc.) - this will be done automatically by API</span>
<span class="f2">+</span>
<span class="f2">+        Args:</span>
<span class="f2">+            image_path: A string, path to firmware image</span>
<span class="f2">+</span>
<span class="f2">+        Returns:</span>
<span class="f2">+            Boolean False if image_path doesn't exist instead of throwing an exception error</span>
<span class="f2">+            Nothing when the update is successful</span>
<span class="f2">+</span>
<span class="f2">+        Raises:</span>
<span class="f2">+            RuntimeError: update failed</span>
<span class="f2">+        &quot;&quot;&quot;</span>
<span class="f2">+        return True</span>
<span class="f2">+</span>
<span class="f2">+    def auto_update_firmware(self, image_path, boot_type):</span>
<span class="f2">+        &quot;&quot;&quot;</span>
<span class="f2">+        Updates firmware of the component</span>
<span class="f2">+</span>
<span class="f2">+        This API performs firmware update automatically based on boot_type: it assumes firmware installation</span>
<span class="f2">+        and/or creating a loading task during the reboot, if needed, in a single call.</span>
<span class="f2">+        In case platform component requires some extra steps (apart from calling Low Level Utility)</span>
<span class="f2">+        to load the installed firmware (e.g, reboot, power cycle, etc.) - this will be done automatically during the reboot.</span>
<span class="f2">+        The loading task will be created by API.</span>
<span class="f2">+</span>
<span class="f2">+        Args:</span>
<span class="f2">+            image_path: A string, path to firmware image</span>
<span class="f2">+            boot_type: A string, reboot type following the upgrade</span>
<span class="f2">+                         - none/fast/warm/cold</span>
<span class="f2">+</span>
<span class="f2">+        Returns:</span>
<span class="f2">+            Output: A return code</span>
<span class="f2">+                return_code: An integer number, status of component firmware auto-update</span>
<span class="f2">+                    - return code of a positive number indicates successful auto-update</span>
<span class="f2">+                        - status_installed = 1</span>
<span class="f2">+                        - status_updated = 2</span>
<span class="f2">+                        - status_scheduled = 3</span>
<span class="f2">+                    - return_code of a negative number indicates failed auto-update</span>
<span class="f2">+                        - status_err_boot_type = -1</span>
<span class="f2">+                        - status_err_image = -2</span>
<span class="f2">+                        - status_err_unknown = -3</span>
<span class="f2">+</span>
<span class="f2">+        Raises:</span>
<span class="f2">+            RuntimeError: auto-update failure cause</span>
<span class="f2">+        &quot;&quot;&quot;</span>
<span class="f2">+        return 1</span>
<span class="bold">diff --git a/platform/ot-kvm/sonic-platform-modules-ot-kvm/ols-v/sonic_platform/fan.py b/platform/ot-kvm/sonic-platform-modules-ot-kvm/ols-v/sonic_platform/fan.py</span>
<span class="bold">new file mode 100644</span>
<span class="bold">index 000000000..422eca16b</span>
<span class="bold">--- /dev/null</span>
<span class="bold">+++ b/platform/ot-kvm/sonic-platform-modules-ot-kvm/ols-v/sonic_platform/fan.py</span>
<span class="f6">@@ -0,0 +1,170 @@</span>
<span class="f2">+#!/usr/bin/env python</span>
<span class="f2">+</span>
<span class="f2">+########################################################################</span>
<span class="f2">+# OT-KVM</span>
<span class="f2">+#</span>
<span class="f2">+# Module contains an implementation of SONiC Platform Base API and</span>
<span class="f2">+# provides the Fans' information which are available in the platform.</span>
<span class="f2">+#</span>
<span class="f2">+########################################################################</span>
<span class="f2">+</span>
<span class="f2">+import os.path</span>
<span class="f2">+</span>
<span class="f2">+try:</span>
<span class="f2">+    from sonic_platform_base.device_base import DeviceBase</span>
<span class="f2">+    from sonic_platform_base.fan_base import FanBase</span>
<span class="f2">+    from HalPlatformApi.client import *</span>
<span class="f2">+except ImportError as e:</span>
<span class="f2">+    raise ImportError(str(e) + &quot;- required module not found&quot;)</span>
<span class="f2">+</span>
<span class="f2">+</span>
<span class="f2">+class Fan(FanBase):</span>
<span class="f2">+    &quot;&quot;&quot;OT-KVM Platform-specific Fan class&quot;&quot;&quot;</span>
<span class="f2">+</span>
<span class="f2">+    def __init__(self, desc):</span>
<span class="f2">+        FanBase.__init__(self)</span>
<span class="f2">+</span><span class="b1">        </span>
<span class="f2">+        self.desc = desc</span>
<span class="f2">+        self.name = desc['name']</span>
<span class="f2">+</span>
<span class="f2">+</span>
<span class="f2">+    def get_direction(self):</span>
<span class="f2">+        &quot;&quot;&quot;</span>
<span class="f2">+        Retrieves the fan airflow direction</span>
<span class="f2">+        Returns:</span>
<span class="f2">+            A string, either FAN_DIRECTION_INTAKE or FAN_DIRECTION_EXHAUST</span>
<span class="f2">+            depending on fan direction</span>
<span class="f2">+</span>
<span class="f2">+        Notes:</span>
<span class="f2">+            In OT-KVM platforms,</span>
<span class="f2">+            - Forward/Exhaust : Air flows from Port side to Fan side.</span>
<span class="f2">+            - Reverse/Intake  : Air flows from Fan side to Port side.</span>
<span class="f2">+        &quot;&quot;&quot;</span>
<span class="f2">+</span>
<span class="f2">+        return FanGetDirection(self.name)</span>
<span class="f2">+</span>
<span class="f2">+    def get_speed(self):</span>
<span class="f2">+        &quot;&quot;&quot;</span>
<span class="f2">+        Retrieves the speed of fan</span>
<span class="f2">+        Returns:</span>
<span class="f2">+            int: percentage of the max fan speed</span>
<span class="f2">+        &quot;&quot;&quot;</span>
<span class="f2">+</span>
<span class="f2">+        return FanGetSpeed(self.name)</span>
<span class="f2">+</span>
<span class="f2">+    def get_target_speed(self):</span>
<span class="f2">+        &quot;&quot;&quot;</span>
<span class="f2">+        Retrieves the target (expected) speed of the fan</span>
<span class="f2">+        Returns:</span>
<span class="f2">+            An integer, the percentage of full fan speed, in the range 0 (off)</span>
<span class="f2">+                 to 100 (full speed)</span>
<span class="f2">+        &quot;&quot;&quot;</span>
<span class="f2">+        return FanGetTargetSpeed(self.name)</span>
<span class="f2">+</span>
<span class="f2">+    def get_speed_tolerance(self):</span>
<span class="f2">+        &quot;&quot;&quot;</span>
<span class="f2">+        Retrieves the speed tolerance of the fan</span>
<span class="f2">+        Returns:</span>
<span class="f2">+            An integer, the percentage of variance from target speed which is</span>
<span class="f2">+        considered tolerable</span>
<span class="f2">+        &quot;&quot;&quot;</span>
<span class="f2">+</span>
<span class="f2">+        return FanGetSpeedTolerance(self.name)</span>
<span class="f2">+</span>
<span class="f2">+    def set_speed(self, speed):</span>
<span class="f2">+        &quot;&quot;&quot;</span>
<span class="f2">+        Set fan speed to expected value</span>
<span class="f2">+        Args:</span>
<span class="f2">+            speed: An integer, the percentage of full fan speed to set fan to,</span>
<span class="f2">+                   in the range 0 (off) to 100 (full speed)</span>
<span class="f2">+        Returns:</span>
<span class="f2">+            bool: True if set success, False if fail.</span>
<span class="f2">+        &quot;&quot;&quot;</span>
<span class="f2">+        # Fan speeds are controlled by Smart-fussion FPGA.</span>
<span class="f2">+        return FanSetSpeed(self.name, speed)</span>
<span class="f2">+</span>
<span class="f2">+    def set_status_led(self, color):</span>
<span class="f2">+        &quot;&quot;&quot;</span>
<span class="f2">+        Set led to expected color</span>
<span class="f2">+        Args:</span>
<span class="f2">+            color: A string representing the color with which to set the</span>
<span class="f2">+                   fan module status LED</span>
<span class="f2">+        Returns:</span>
<span class="f2">+            bool: True if set success, False if fail.</span>
<span class="f2">+        &quot;&quot;&quot;</span>
<span class="f2">+        # No LED available for FanTray and PSU Fan</span>
<span class="f2">+        # Return True to avoid thermalctld alarm.</span>
<span class="f2">+        return FanSetLedState(self.name, color)</span>
<span class="f2">+</span>
<span class="f2">+    def get_status_led(self):</span>
<span class="f2">+        &quot;&quot;&quot;</span>
<span class="f2">+        Gets the state of the Fan status LED</span>
<span class="f2">+</span>
<span class="f2">+        Returns:</span>
<span class="f2">+            A string, one of the predefined STATUS_LED_COLOR_* strings.</span>
<span class="f2">+        &quot;&quot;&quot;</span>
<span class="f2">+</span>
<span class="f2">+        return FanGetLedState(self.name)</span>
<span class="f2">+</span>
<span class="f2">+    def get_name(self):</span>
<span class="f2">+        &quot;&quot;&quot;</span>
<span class="f2">+        Retrieves the fan name</span>
<span class="f2">+        Returns:</span>
<span class="f2">+            string: The name of the device</span>
<span class="f2">+        &quot;&quot;&quot;</span>
<span class="f2">+</span><span class="b1">        </span>
<span class="f2">+        return self.name</span>
<span class="f2">+</span>
<span class="f2">+    def get_model(self):</span>
<span class="f2">+        &quot;&quot;&quot;</span>
<span class="f2">+        Retrieves the part number of the FAN</span>
<span class="f2">+        Returns:</span>
<span class="f2">+            string: Part number of FAN</span>
<span class="f2">+        &quot;&quot;&quot;</span>
<span class="f2">+</span><span class="b1">        </span>
<span class="f2">+        return FanGetModel(self.name)</span>
<span class="f2">+</span>
<span class="f2">+    def get_serial(self):</span>
<span class="f2">+        &quot;&quot;&quot;</span>
<span class="f2">+        Retrieves the serial number of the FAN</span>
<span class="f2">+        Returns:</span>
<span class="f2">+            string: Serial number of FAN</span>
<span class="f2">+        &quot;&quot;&quot;</span>
<span class="f2">+</span>
<span class="f2">+        return FanGetSerial(self.name)</span>
<span class="f2">+</span>
<span class="f2">+    def get_presence(self):</span>
<span class="f2">+        &quot;&quot;&quot;</span>
<span class="f2">+        Retrieves the presence of the FAN</span>
<span class="f2">+        Returns:</span>
<span class="f2">+            bool: True if fan is present, False if not</span>
<span class="f2">+        &quot;&quot;&quot;</span>
<span class="f2">+</span>
<span class="f2">+        return FanGetPresence(self.name)</span>
<span class="f2">+</span>
<span class="f2">+    def get_status(self):</span>
<span class="f2">+        &quot;&quot;&quot;</span>
<span class="f2">+        Retrieves the operational status of the FAN</span>
<span class="f2">+        Returns:</span>
<span class="f2">+            bool: True if FAN is operating properly, False if not</span>
<span class="f2">+        &quot;&quot;&quot;</span>
<span class="f2">+</span>
<span class="f2">+        return FanGetStatus(self.name)</span>
<span class="f2">+</span>
<span class="f2">+    def get_position_in_parent(self):</span>
<span class="f2">+        &quot;&quot;&quot;</span>
<span class="f2">+        Retrieves 1-based relative physical position in parent device.</span>
<span class="f2">+        Returns:</span>
<span class="f2">+            integer: The 1-based relative physical position in parent</span>
<span class="f2">+            device or -1 if cannot determine the position</span>
<span class="f2">+        &quot;&quot;&quot;</span>
<span class="f2">+        return FanGetPositionInParent(self.name)</span>
<span class="f2">+</span>
<span class="f2">+    def is_replaceable(self):</span>
<span class="f2">+        &quot;&quot;&quot;</span>
<span class="f2">+        Indicate whether Fan is replaceable.</span>
<span class="f2">+        Returns:</span>
<span class="f2">+            bool: True if it is replaceable.</span>
<span class="f2">+        &quot;&quot;&quot;</span>
<span class="f2">+        return FanIsReplaceable(self.name)</span>
<span class="f2">+</span>
<span class="bold">diff --git a/platform/ot-kvm/sonic-platform-modules-ot-kvm/ols-v/sonic_platform/fan_drawer.py b/platform/ot-kvm/sonic-platform-modules-ot-kvm/ols-v/sonic_platform/fan_drawer.py</span>
<span class="bold">new file mode 100644</span>
<span class="bold">index 000000000..fba503c54</span>
<span class="bold">--- /dev/null</span>
<span class="bold">+++ b/platform/ot-kvm/sonic-platform-modules-ot-kvm/ols-v/sonic_platform/fan_drawer.py</span>
<span class="f6">@@ -0,0 +1,73 @@</span>
<span class="f2">+#!/usr/bin/env python</span>
<span class="f2">+</span>
<span class="f2">+########################################################################</span>
<span class="f2">+# OT-KVM</span>
<span class="f2">+#</span>
<span class="f2">+# Module contains an implementation of SONiC Platform Base API and</span>
<span class="f2">+# provides the Fan-Drawers' information available in the platform.</span>
<span class="f2">+#</span>
<span class="f2">+########################################################################</span>
<span class="f2">+</span>
<span class="f2">+try:</span>
<span class="f2">+    import os</span>
<span class="f2">+    from sonic_platform_base.device_base import DeviceBase</span>
<span class="f2">+    from sonic_platform_base.fan_drawer_base import FanDrawerBase</span>
<span class="f2">+    from sonic_platform.fan import Fan</span>
<span class="f2">+    from HalPlatformApi.client import *</span>
<span class="f2">+except ImportError as e:</span>
<span class="f2">+    raise ImportError(str(e) + &quot;- required module not found&quot;)</span>
<span class="f2">+</span>
<span class="f2">+</span>
<span class="f2">+class FanDrawer(FanDrawerBase):</span>
<span class="f2">+    &quot;&quot;&quot;OT-KVM Platform-specific Fan Drawer class&quot;&quot;&quot;</span>
<span class="f2">+</span>
<span class="f2">+    def __init__(self, desc):</span>
<span class="f2">+        FanDrawerBase.__init__(self)</span>
<span class="f2">+</span>
<span class="f2">+        self.desc = desc</span>
<span class="f2">+        self.name = desc['name']</span>
<span class="f2">+</span>
<span class="f2">+        for item in desc['fans']:</span>
<span class="f2">+            fan = Fan(item)</span>
<span class="f2">+            self._fan_list.append(fan)</span>
<span class="f2">+</span>
<span class="f2">+</span>
<span class="f2">+    def set_status_led(self, color):</span>
<span class="f2">+        &quot;&quot;&quot;</span>
<span class="f2">+        Set led to expected color</span>
<span class="f2">+        Args:</span>
<span class="f2">+            color: A string representing the color with which to set the</span>
<span class="f2">+                   fan module status LED</span>
<span class="f2">+        Returns:</span>
<span class="f2">+            bool: True if set success, False if fail.</span>
<span class="f2">+        &quot;&quot;&quot;</span>
<span class="f2">+        # Leds are controlled by Smart-fussion FPGA.</span>
<span class="f2">+        # Return True to avoid thermalctld alarm.</span>
<span class="f2">+        return FanDrawerSetLedState(self.name, color)</span>
<span class="f2">+</span>
<span class="f2">+    def get_status_led(self):</span>
<span class="f2">+        &quot;&quot;&quot;</span>
<span class="f2">+        Gets the state of the Fan status LED</span>
<span class="f2">+</span>
<span class="f2">+        Returns:</span>
<span class="f2">+            A string, one of the predefined STATUS_LED_COLOR_* strings.</span>
<span class="f2">+        &quot;&quot;&quot;</span>
<span class="f2">+        return FanDrawerGetLedState(self.name)</span>
<span class="f2">+</span>
<span class="f2">+    def get_maximum_consumed_power(self):</span>
<span class="f2">+        &quot;&quot;&quot;</span>
<span class="f2">+        Retrives the maximum power drawn by Fan Drawer</span>
<span class="f2">+</span>
<span class="f2">+        Returns:</span>
<span class="f2">+            A float, with value of the maximum consumable power of the</span>
<span class="f2">+            component.</span>
<span class="f2">+        &quot;&quot;&quot;</span>
<span class="f2">+        return None</span>
<span class="f2">+</span>
<span class="f2">+    def get_name(self):</span>
<span class="f2">+        &quot;&quot;&quot;</span>
<span class="f2">+        Retrieves the fan name</span>
<span class="f2">+        Returns:</span>
<span class="f2">+            string: The name of the device</span>
<span class="f2">+        &quot;&quot;&quot;</span>
<span class="f2">+        return self.name</span>
<span class="bold">diff --git a/platform/ot-kvm/sonic-platform-modules-ot-kvm/ols-v/sonic_platform/module.py b/platform/ot-kvm/sonic-platform-modules-ot-kvm/ols-v/sonic_platform/module.py</span>
<span class="bold">new file mode 100644</span>
<span class="bold">index 000000000..8b145e721</span>
<span class="bold">--- /dev/null</span>
<span class="bold">+++ b/platform/ot-kvm/sonic-platform-modules-ot-kvm/ols-v/sonic_platform/module.py</span>
<span class="f6">@@ -0,0 +1,150 @@</span>
<span class="f2">+#!/usr/bin/env python</span>
<span class="f2">+</span>
<span class="f2">+########################################################################</span>
<span class="f2">+# OT-KVM</span>
<span class="f2">+#</span>
<span class="f2">+# Module contains an implementation of SONiC Platform Base API and</span>
<span class="f2">+# provides the Modules' information which are available in the platform</span>
<span class="f2">+#</span>
<span class="f2">+########################################################################</span>
<span class="f2">+</span>
<span class="f2">+</span>
<span class="f2">+try:</span>
<span class="f2">+    import os</span>
<span class="f2">+    from sonic_platform_base.module_base import ModuleBase</span>
<span class="f2">+    from sonic_platform.component import Component</span>
<span class="f2">+    from HalPlatformApi.client import *</span>
<span class="f2">+except ImportError as e:</span>
<span class="f2">+    raise ImportError(str(e) + &quot;- required module not found&quot;)</span>
<span class="f2">+</span>
<span class="f2">+</span>
<span class="f2">+class Module(ModuleBase):</span>
<span class="f2">+    &quot;&quot;&quot;OT-KVM Platform-specific Module class&quot;&quot;&quot;</span>
<span class="f2">+</span>
<span class="f2">+    def __init__(self, desc):</span>
<span class="f2">+        ModuleBase.__init__(self)</span>
<span class="f2">+</span>
<span class="f2">+        self.desc = desc</span>
<span class="f2">+        self.name = desc['name']</span>
<span class="f2">+        for item in desc['components']:</span>
<span class="f2">+            component = Component(item)</span>
<span class="f2">+            self._component_list.append(component)</span>
<span class="f2">+</span>
<span class="f2">+    def get_base_mac(self):</span>
<span class="f2">+        &quot;&quot;&quot;</span>
<span class="f2">+        Retrieves the base MAC address for the module</span>
<span class="f2">+</span>
<span class="f2">+        Returns:</span>
<span class="f2">+            A string containing the MAC address in the format</span>
<span class="f2">+            'XX:XX:XX:XX:XX:XX'</span>
<span class="f2">+        &quot;&quot;&quot;</span>
<span class="f2">+</span>
<span class="f2">+        return ModuleGetBaseMac(self.name)</span>
<span class="f2">+</span>
<span class="f2">+    def get_system_eeprom_info(self):</span>
<span class="f2">+        &quot;&quot;&quot;</span>
<span class="f2">+        Retrieves the full content of system EEPROM information for the module</span>
<span class="f2">+</span>
<span class="f2">+        Returns:</span>
<span class="f2">+            A dictionary where keys are the type code defined in</span>
<span class="f2">+            OCP ONIE TlvInfo EEPROM format and values are their corresponding</span>
<span class="f2">+            values.</span>
<span class="f2">+            Ex. { '0x21':'AG9064', '0x22':'V1.0', '0x23':'AG9064-0109867821',</span>
<span class="f2">+                  '0x24':'001c0f000fcd0a', '0x25':'02/03/2018 16:22:00',</span>
<span class="f2">+                  '0x26':'01', '0x27':'REV01', '0x28':'AG9064-C2358-16G'}</span>
<span class="f2">+        &quot;&quot;&quot;</span>
<span class="f2">+        return None</span>
<span class="f2">+</span>
<span class="f2">+    def get_name(self):</span>
<span class="f2">+        &quot;&quot;&quot;</span>
<span class="f2">+        Retrieves the name of the device</span>
<span class="f2">+</span>
<span class="f2">+        Returns:</span>
<span class="f2">+            string: The name of the device</span>
<span class="f2">+        &quot;&quot;&quot;</span>
<span class="f2">+        return self.name</span>
<span class="f2">+</span>
<span class="f2">+    def get_description(self):</span>
<span class="f2">+        &quot;&quot;&quot;</span>
<span class="f2">+        Retrieves the platform vendor's product description of the module</span>
<span class="f2">+</span>
<span class="f2">+        Returns:</span>
<span class="f2">+            A string, providing the vendor's product description of the module.</span>
<span class="f2">+        &quot;&quot;&quot;</span>
<span class="f2">+        return self.desc['description']</span>
<span class="f2">+</span>
<span class="f2">+    def get_slot(self):</span>
<span class="f2">+        &quot;&quot;&quot;</span>
<span class="f2">+        Retrieves the platform vendor's slot number of the module</span>
<span class="f2">+</span>
<span class="f2">+        Returns:</span>
<span class="f2">+            An integer, indicating the slot number in the chassis</span>
<span class="f2">+        &quot;&quot;&quot;</span>
<span class="f2">+        return ModuleGetSlot(self.name)</span>
<span class="f2">+</span>
<span class="f2">+    def get_type(self):</span>
<span class="f2">+        &quot;&quot;&quot;</span>
<span class="f2">+        Retrieves the type of the module.</span>
<span class="f2">+</span>
<span class="f2">+        Returns:</span>
<span class="f2">+            A string, the module-type from one of the predefined types:</span>
<span class="f2">+            MODULE_TYPE_SUPERVISOR, MODULE_TYPE_LINE or MODULE_TYPE_FABRIC</span>
<span class="f2">+        &quot;&quot;&quot;</span>
<span class="f2">+        return ModuleGetType(self.name)</span>
<span class="f2">+</span>
<span class="f2">+    def get_oper_status(self):</span>
<span class="f2">+        &quot;&quot;&quot;</span>
<span class="f2">+        Retrieves the operational status of the module</span>
<span class="f2">+</span>
<span class="f2">+        Returns:</span>
<span class="f2">+            A string, the operational status of the module from one of the</span>
<span class="f2">+            predefined status values: MODULE_STATUS_EMPTY, MODULE_STATUS_OFFLINE,</span>
<span class="f2">+            MODULE_STATUS_FAULT, MODULE_STATUS_PRESENT or MODULE_STATUS_ONLINE</span>
<span class="f2">+        &quot;&quot;&quot;</span>
<span class="f2">+        return ModuleGetStatus(self.name)</span>
<span class="f2">+</span>
<span class="f2">+    def reboot(self, reboot_type):</span>
<span class="f2">+        &quot;&quot;&quot;</span>
<span class="f2">+        Request to reboot the module</span>
<span class="f2">+</span>
<span class="f2">+        Args:</span>
<span class="f2">+            reboot_type: A string, the type of reboot requested from one of the</span>
<span class="f2">+            predefined reboot types: MODULE_REBOOT_DEFAULT, MODULE_REBOOT_CPU_COMPLEX,</span>
<span class="f2">+            or MODULE_REBOOT_FPGA_COMPLEX</span>
<span class="f2">+</span>
<span class="f2">+        Returns:</span>
<span class="f2">+            bool: True if the request has been issued successfully, False if not</span>
<span class="f2">+        &quot;&quot;&quot;</span>
<span class="f2">+        return False</span>
<span class="f2">+</span>
<span class="f2">+</span>
<span class="f2">+    def set_admin_state(self, up):</span>
<span class="f2">+        &quot;&quot;&quot;</span>
<span class="f2">+        Request to keep the card in administratively up/down state.</span>
<span class="f2">+        The down state will power down the module and the status should show</span>
<span class="f2">+        MODULE_STATUS_OFFLINE.</span>
<span class="f2">+        The up state will take the module to MODULE_STATUS_FAULT or</span>
<span class="f2">+        MODULE_STAUS_ONLINE states.</span>
<span class="f2">+</span>
<span class="f2">+        Args:</span>
<span class="f2">+            up: A boolean, True to set the admin-state to UP. False to set the</span>
<span class="f2">+            admin-state to DOWN.</span>
<span class="f2">+</span>
<span class="f2">+        Returns:</span>
<span class="f2">+            bool: True if the request has been issued successfully, False if not</span>
<span class="f2">+        &quot;&quot;&quot;</span>
<span class="f2">+        return False</span>
<span class="f2">+</span>
<span class="f2">+    def get_maximum_consumed_power(self):</span>
<span class="f2">+        &quot;&quot;&quot;</span>
<span class="f2">+        Retrives the maximum power drawn by this module</span>
<span class="f2">+</span>
<span class="f2">+        Returns:</span>
<span class="f2">+            A float, with value of the maximum consumable power of the</span>
<span class="f2">+            module.</span>
<span class="f2">+        &quot;&quot;&quot;</span>
<span class="f2">+        return None</span>
<span class="f2">+</span>
<span class="f2">+</span>
<span class="f2">+</span>
<span class="f2">+</span>
<span class="bold">diff --git a/platform/ot-kvm/sonic-platform-modules-ot-kvm/ols-v/sonic_platform/platform.py b/platform/ot-kvm/sonic-platform-modules-ot-kvm/ols-v/sonic_platform/platform.py</span>
<span class="bold">new file mode 100644</span>
<span class="bold">index 000000000..94ad639f3</span>
<span class="bold">--- /dev/null</span>
<span class="bold">+++ b/platform/ot-kvm/sonic-platform-modules-ot-kvm/ols-v/sonic_platform/platform.py</span>
<span class="f6">@@ -0,0 +1,25 @@</span>
<span class="f2">+#!/usr/bin/env python</span>
<span class="f2">+</span>
<span class="f2">+#############################################################################</span>
<span class="f2">+#</span>
<span class="f2">+# Module contains an implementation of SONiC Platform Base API and</span>
<span class="f2">+# provides the platform information</span>
<span class="f2">+#</span>
<span class="f2">+#############################################################################</span>
<span class="f2">+</span>
<span class="f2">+try:</span>
<span class="f2">+    from sonic_platform_base.platform_base import PlatformBase</span>
<span class="f2">+    from sonic_platform.chassis import Chassis</span>
<span class="f2">+except ImportError as e:</span>
<span class="f2">+    raise ImportError(str(e) + &quot;- required module not found&quot;)</span>
<span class="f2">+</span>
<span class="f2">+</span>
<span class="f2">+class Platform(PlatformBase):</span>
<span class="f2">+    &quot;&quot;&quot;</span>
<span class="f2">+    OT-KVM Platform-specific class</span>
<span class="f2">+    &quot;&quot;&quot;</span>
<span class="f2">+</span>
<span class="f2">+    def __init__(self):</span>
<span class="f2">+        PlatformBase.__init__(self)</span>
<span class="f2">+        self._chassis = Chassis()</span>
<span class="f2">+</span>
<span class="bold">diff --git a/platform/ot-kvm/sonic-platform-modules-ot-kvm/ols-v/sonic_platform/psu.py b/platform/ot-kvm/sonic-platform-modules-ot-kvm/ols-v/sonic_platform/psu.py</span>
<span class="bold">new file mode 100644</span>
<span class="bold">index 000000000..42b86e22e</span>
<span class="bold">--- /dev/null</span>
<span class="bold">+++ b/platform/ot-kvm/sonic-platform-modules-ot-kvm/ols-v/sonic_platform/psu.py</span>
<span class="f6">@@ -0,0 +1,249 @@</span>
<span class="f2">+#!/usr/bin/env python</span>
<span class="f2">+</span>
<span class="f2">+########################################################################</span>
<span class="f2">+# OT-KVM</span>
<span class="f2">+#</span>
<span class="f2">+# Module contains an implementation of SONiC Platform Base API and</span>
<span class="f2">+# provides the PSUs' information which are available in the platform</span>
<span class="f2">+#</span>
<span class="f2">+########################################################################</span>
<span class="f2">+</span>
<span class="f2">+</span>
<span class="f2">+try:</span>
<span class="f2">+    import os</span>
<span class="f2">+    from sonic_platform_base.device_base import DeviceBase</span>
<span class="f2">+    from sonic_platform_base.psu_base import PsuBase</span>
<span class="f2">+    from sonic_platform.fan import Fan</span>
<span class="f2">+    from HalPlatformApi.client import *</span>
<span class="f2">+except ImportError as e:</span>
<span class="f2">+    raise ImportError(str(e) + &quot;- required module not found&quot;)</span>
<span class="f2">+</span>
<span class="f2">+</span>
<span class="f2">+class Psu(PsuBase):</span>
<span class="f2">+    &quot;&quot;&quot;OT-KVM Platform-specific PSU class&quot;&quot;&quot;</span>
<span class="f2">+</span>
<span class="f2">+    def __init__(self, desc):</span>
<span class="f2">+        PsuBase.__init__(self)</span>
<span class="f2">+        # PSU is 1-based in OT-KVM platforms</span>
<span class="f2">+        self.desc = desc</span>
<span class="f2">+        self.name = desc['name']</span>
<span class="f2">+</span>
<span class="f2">+        for item in desc['fans']:</span>
<span class="f2">+            fan = Fan(item)</span>
<span class="f2">+            self._fan_list.append(fan)</span>
<span class="f2">+</span>
<span class="f2">+    def get_name(self):</span>
<span class="f2">+        &quot;&quot;&quot;</span>
<span class="f2">+        Retrieves the name of the device</span>
<span class="f2">+</span>
<span class="f2">+        Returns:</span>
<span class="f2">+            string: The name of the device</span>
<span class="f2">+        &quot;&quot;&quot;</span>
<span class="f2">+</span>
<span class="f2">+        return self.name</span>
<span class="f2">+</span>
<span class="f2">+    def get_voltage(self):</span>
<span class="f2">+        &quot;&quot;&quot;</span>
<span class="f2">+        Retrieves current PSU voltage output</span>
<span class="f2">+</span>
<span class="f2">+        Returns:</span>
<span class="f2">+            A float number, the output voltage in volts,</span>
<span class="f2">+            e.g. 12.1</span>
<span class="f2">+        &quot;&quot;&quot;</span>
<span class="f2">+</span>
<span class="f2">+        return PsuGetVoltage(self.name)</span>
<span class="f2">+</span>
<span class="f2">+    def get_current(self):</span>
<span class="f2">+        &quot;&quot;&quot;</span>
<span class="f2">+        Retrieves present electric current supplied by PSU</span>
<span class="f2">+</span>
<span class="f2">+        Returns:</span>
<span class="f2">+            A float number, electric current in amperes,</span>
<span class="f2">+            e.g. 15.4</span>
<span class="f2">+        &quot;&quot;&quot;</span>
<span class="f2">+</span>
<span class="f2">+        return PsuGetCurrent(self.name)</span>
<span class="f2">+</span>
<span class="f2">+    def get_power(self):</span>
<span class="f2">+        &quot;&quot;&quot;</span>
<span class="f2">+        Retrieves current energy supplied by PSU</span>
<span class="f2">+</span>
<span class="f2">+        Returns:</span>
<span class="f2">+            A float number, the power in watts,</span>
<span class="f2">+            e.g. 302.6</span>
<span class="f2">+        &quot;&quot;&quot;</span>
<span class="f2">+</span>
<span class="f2">+        return PsuGetPower(self.name)</span>
<span class="f2">+</span>
<span class="f2">+    def get_powergood_status(self):</span>
<span class="f2">+        &quot;&quot;&quot;</span>
<span class="f2">+        Retrieves the powergood status of PSU</span>
<span class="f2">+</span>
<span class="f2">+        Returns:</span>
<span class="f2">+            A boolean, True if PSU has stablized its output voltages and</span>
<span class="f2">+            passed all its internal self-tests, False if not.</span>
<span class="f2">+        &quot;&quot;&quot;</span>
<span class="f2">+</span>
<span class="f2">+        return PsuGetStatus(self.name)</span>
<span class="f2">+</span>
<span class="f2">+    def set_status_led(self, color):</span>
<span class="f2">+        &quot;&quot;&quot;</span>
<span class="f2">+        Sets the state of the PSU status LED</span>
<span class="f2">+        Args:</span>
<span class="f2">+            color: A string representing the color with which to set the</span>
<span class="f2">+                   PSU status LED</span>
<span class="f2">+        Returns:</span>
<span class="f2">+            bool: True if status LED state is set successfully, False if</span>
<span class="f2">+                  not</span>
<span class="f2">+        &quot;&quot;&quot;</span>
<span class="f2">+</span>
<span class="f2">+        return PsuSetLedState(self.name, color)</span>
<span class="f2">+</span>
<span class="f2">+    def get_status_led(self):</span>
<span class="f2">+        &quot;&quot;&quot;</span>
<span class="f2">+        Gets the state of the PSU status LED</span>
<span class="f2">+</span>
<span class="f2">+        Returns:</span>
<span class="f2">+            A string, one of the predefined STATUS_LED_COLOR_* strings.</span>
<span class="f2">+        &quot;&quot;&quot;</span>
<span class="f2">+</span>
<span class="f2">+        return PsuGetLedState(self.name)</span>
<span class="f2">+</span>
<span class="f2">+    def get_temperature(self):</span>
<span class="f2">+        &quot;&quot;&quot;</span>
<span class="f2">+        Retrieves current temperature reading from PSU</span>
<span class="f2">+</span>
<span class="f2">+        Returns:</span>
<span class="f2">+            A float number of current temperature in Celsius up to</span>
<span class="f2">+            nearest thousandth of one degree Celsius, e.g. 30.125</span>
<span class="f2">+        &quot;&quot;&quot;</span>
<span class="f2">+</span>
<span class="f2">+        return PsuGetTemp(self.name)</span>
<span class="f2">+</span>
<span class="f2">+    def get_temperature_high_threshold(self):</span>
<span class="f2">+        &quot;&quot;&quot;</span>
<span class="f2">+        Retrieves the high threshold temperature of PSU</span>
<span class="f2">+</span>
<span class="f2">+        Returns:</span>
<span class="f2">+            A float number, the high threshold temperature of PSU in</span>
<span class="f2">+            Celsius up to nearest thousandth of one degree Celsius,</span>
<span class="f2">+            e.g. 30.125</span>
<span class="f2">+        &quot;&quot;&quot;</span>
<span class="f2">+        return 90.0</span>
<span class="f2">+</span>
<span class="f2">+    def get_voltage_high_threshold(self):</span>
<span class="f2">+        &quot;&quot;&quot;</span>
<span class="f2">+        Retrieves the high threshold PSU voltage output</span>
<span class="f2">+</span>
<span class="f2">+        Returns:</span>
<span class="f2">+            A float number, the high threshold output voltage in volts,</span>
<span class="f2">+            e.g. 12.1</span>
<span class="f2">+        &quot;&quot;&quot;</span>
<span class="f2">+        voltage_high_threshold = 12.5</span>
<span class="f2">+</span>
<span class="f2">+        return voltage_high_threshold</span>
<span class="f2">+</span>
<span class="f2">+    def get_voltage_low_threshold(self):</span>
<span class="f2">+        &quot;&quot;&quot;</span>
<span class="f2">+        Retrieves the low threshold PSU voltage output</span>
<span class="f2">+</span>
<span class="f2">+        Returns:</span>
<span class="f2">+            A float number, the low threshold output voltage in volts,</span>
<span class="f2">+            e.g. 12.1</span>
<span class="f2">+        &quot;&quot;&quot;</span>
<span class="f2">+        voltage_low_threshold = 11.5</span>
<span class="f2">+</span>
<span class="f2">+        return voltage_low_threshold</span>
<span class="f2">+</span>
<span class="f2">+    def get_maximum_supplied_power(self):</span>
<span class="f2">+        &quot;&quot;&quot;</span>
<span class="f2">+        Retrieves the maximum supplied power by PSU</span>
<span class="f2">+</span>
<span class="f2">+        Returns:</span>
<span class="f2">+            A float number, the maximum power output in Watts.</span>
<span class="f2">+            e.g. 1200.1</span>
<span class="f2">+        &quot;&quot;&quot;</span>
<span class="f2">+        psu_maxpower = 120.0</span>
<span class="f2">+</span>
<span class="f2">+        return psu_maxpower</span>
<span class="f2">+</span>
<span class="f2">+    def get_psu_power_warning_suppress_threshold(self):</span>
<span class="f2">+        &quot;&quot;&quot;</span>
<span class="f2">+        Retrieve the warning suppress threshold of the power on this PSU</span>
<span class="f2">+        The value can be volatile, so the caller should call the API each time it is used.</span>
<span class="f2">+</span>
<span class="f2">+        Returns:</span>
<span class="f2">+            A float number, the warning suppress threshold of the PSU in watts.</span>
<span class="f2">+        &quot;&quot;&quot;</span>
<span class="f2">+        return 120.0</span>
<span class="f2">+</span>
<span class="f2">+    def get_psu_power_critical_threshold(self):</span>
<span class="f2">+        &quot;&quot;&quot;</span>
<span class="f2">+        Retrieve the critical threshold of the power on this PSU</span>
<span class="f2">+        The value can be volatile, so the caller should call the API each time it is used.</span>
<span class="f2">+</span>
<span class="f2">+        Returns:</span>
<span class="f2">+            A float number, the critical threshold of the PSU in watts.</span>
<span class="f2">+        &quot;&quot;&quot;</span>
<span class="f2">+        return 120.0</span>
<span class="f2">+</span>
<span class="f2">+    def get_input_voltage(self):</span>
<span class="f2">+        &quot;&quot;&quot;</span>
<span class="f2">+        Retrieves current PSU voltage input</span>
<span class="f2">+</span>
<span class="f2">+        Returns:</span>
<span class="f2">+            A float number, the input voltage in volts,</span>
<span class="f2">+            e.g. 12.1</span>
<span class="f2">+        &quot;&quot;&quot;</span>
<span class="f2">+</span>
<span class="f2">+        return PsuGetInputVoltage(self.name)</span>
<span class="f2">+</span>
<span class="f2">+    def get_input_current(self):</span>
<span class="f2">+        &quot;&quot;&quot;</span>
<span class="f2">+        Retrieves the input current draw of the power supply</span>
<span class="f2">+</span>
<span class="f2">+        Returns:</span>
<span class="f2">+            A float number, the electric current in amperes, e.g 15.4</span>
<span class="f2">+        &quot;&quot;&quot;</span>
<span class="f2">+</span>
<span class="f2">+        return PsuGetInputCurrent(self.name)</span>
<span class="f2">+</span>
<span class="f2">+    def get_presence(self):</span>
<span class="f2">+        &quot;&quot;&quot;</span>
<span class="f2">+        Retrieves the presence of the Power Supply Unit (PSU)</span>
<span class="f2">+</span>
<span class="f2">+        Returns:</span>
<span class="f2">+            bool: True if PSU is present, False if not</span>
<span class="f2">+        &quot;&quot;&quot;</span>
<span class="f2">+</span>
<span class="f2">+        return PsuGetPresence(self.name)</span>
<span class="f2">+</span>
<span class="f2">+    def get_model(self):</span>
<span class="f2">+        &quot;&quot;&quot;</span>
<span class="f2">+        Retrieves the part number of the PSU</span>
<span class="f2">+</span>
<span class="f2">+        Returns:</span>
<span class="f2">+            string: Part number of PSU</span>
<span class="f2">+        &quot;&quot;&quot;</span>
<span class="f2">+</span>
<span class="f2">+        return PsuGetModel(self.name)</span>
<span class="f2">+</span>
<span class="f2">+    def get_serial(self):</span>
<span class="f2">+        &quot;&quot;&quot;</span>
<span class="f2">+        Retrieves the serial number of the PSU</span>
<span class="f2">+</span>
<span class="f2">+        Returns:</span>
<span class="f2">+            string: Serial number of PSU</span>
<span class="f2">+        &quot;&quot;&quot;</span>
<span class="f2">+</span>
<span class="f2">+        return PsuGetSerial(self.name)</span>
<span class="f2">+</span>
<span class="f2">+    def get_revision(self):</span>
<span class="f2">+        &quot;&quot;&quot;</span>
<span class="f2">+        Retrieves the hardware revision of the device</span>
<span class="f2">+</span>
<span class="f2">+        Returns:</span>
<span class="f2">+            string: Revision value of device</span>
<span class="f2">+        &quot;&quot;&quot;</span>
<span class="f2">+</span>
<span class="f2">+        return PsuGetRevision(self.name)</span>
\ No newline at end of file
<span class="bold">diff --git a/platform/ot-kvm/sonic-platform-modules-ot-kvm/ols-v/sonic_platform/sfp.py b/platform/ot-kvm/sonic-platform-modules-ot-kvm/ols-v/sonic_platform/sfp.py</span>
<span class="bold">new file mode 100644</span>
<span class="bold">index 000000000..f9bfc8e7d</span>
<span class="bold">--- /dev/null</span>
<span class="bold">+++ b/platform/ot-kvm/sonic-platform-modules-ot-kvm/ols-v/sonic_platform/sfp.py</span>
<span class="f6">@@ -0,0 +1,365 @@</span>
<span class="f2">+#!/usr/bin/env python</span>
<span class="f2">+</span>
<span class="f2">+#############################################################################</span>
<span class="f2">+# OT-KVM</span>
<span class="f2">+#</span>
<span class="f2">+# Module contains an implementation of SONiC Platform Base API and</span>
<span class="f2">+# provides the platform information</span>
<span class="f2">+#</span>
<span class="f2">+#############################################################################</span>
<span class="f2">+</span>
<span class="f2">+try:</span>
<span class="f2">+    import os</span>
<span class="f2">+    import syslog</span>
<span class="f2">+    import time</span>
<span class="f2">+    from sonic_platform_base.sfp_base import SfpBase</span>
<span class="f2">+except ImportError as e:</span>
<span class="f2">+    raise ImportError(str(e) + &quot;- required module not found&quot;)</span>
<span class="f2">+</span>
<span class="f2">+QSFP_INFO_OFFSET = 128</span>
<span class="f2">+</span>
<span class="f2">+</span>
<span class="f2">+class Sfp(SfpBase):</span>
<span class="f2">+    &quot;&quot;&quot;</span>
<span class="f2">+    OT-KVM Platform-specific Sfp class</span>
<span class="f2">+    &quot;&quot;&quot;</span>
<span class="f2">+</span>
<span class="f2">+    def __init__(self, index):</span>
<span class="f2">+        SfpBase.__init__(self)</span>
<span class="f2">+        self.index = index + 1</span>
<span class="f2">+</span>
<span class="f2">+    def get_transceiver_info(self):</span>
<span class="f2">+        &quot;&quot;&quot;</span>
<span class="f2">+        Retrieves transceiver info of this SFP</span>
<span class="f2">+</span>
<span class="f2">+        Returns:</span>
<span class="f2">+            A dict which contains following keys/values :</span>
<span class="f2">+        ================================================================================</span>
<span class="f2">+        keys                       |Value Format   |Information</span>
<span class="f2">+        ---------------------------|---------------|----------------------------</span>
<span class="f2">+        type                       |1*255VCHAR     |type of SFP</span>
<span class="f2">+        type_abbrv_name            |1*255VCHAR     |type of SFP, abbreviated</span>
<span class="f2">+        hardware_rev               |1*255VCHAR     |hardware version of SFP</span>
<span class="f2">+        vendor_rev                 |1*255VCHAR     |vendor revision of SFP</span>
<span class="f2">+        serial                     |1*255VCHAR     |serial number of the SFP</span>
<span class="f2">+        manufacturer               |1*255VCHAR     |SFP vendor name</span>
<span class="f2">+        model                      |1*255VCHAR     |SFP model name</span>
<span class="f2">+        connector                  |1*255VCHAR     |connector information</span>
<span class="f2">+        encoding                   |1*255VCHAR     |encoding information</span>
<span class="f2">+        ext_identifier             |1*255VCHAR     |extend identifier</span>
<span class="f2">+        ext_rateselect_compliance  |1*255VCHAR     |extended rateSelect compliance</span>
<span class="f2">+        cable_length               |INT            |cable length in m</span>
<span class="f2">+        nominal_bit_rate           |INT            |nominal bit rate by 100Mbs</span>
<span class="f2">+        specification_compliance   |1*255VCHAR     |specification compliance</span>
<span class="f2">+        vendor_date                |1*255VCHAR     |vendor date</span>
<span class="f2">+        vendor_oui                 |1*255VCHAR     |vendor OUI</span>
<span class="f2">+        application_advertisement  |1*255VCHAR     |supported applications advertisement</span>
<span class="f2">+        ================================================================================</span>
<span class="f2">+        &quot;&quot;&quot;</span>
<span class="f2">+        return None</span>
<span class="f2">+</span>
<span class="f2">+    def get_transceiver_bulk_status(self):</span>
<span class="f2">+        &quot;&quot;&quot;</span>
<span class="f2">+        Retrieves transceiver bulk status of this SFP</span>
<span class="f2">+</span>
<span class="f2">+        Returns:</span>
<span class="f2">+            A dict which contains following keys/values :</span>
<span class="f2">+        ========================================================================</span>
<span class="f2">+        keys                       |Value Format   |Information</span>
<span class="f2">+        ---------------------------|---------------|----------------------------</span>
<span class="f2">+        rx_los                     |BOOLEAN        |RX loss-of-signal status, True if has RX los, False if not.</span>
<span class="f2">+        tx_fault                   |BOOLEAN        |TX fault status, True if has TX fault, False if not.</span>
<span class="f2">+        reset_status               |BOOLEAN        |reset status, True if SFP in reset, False if not.</span>
<span class="f2">+        lp_mode                    |BOOLEAN        |low power mode status, True in lp mode, False if not.</span>
<span class="f2">+        tx_disable                 |BOOLEAN        |TX disable status, True TX disabled, False if not.</span>
<span class="f2">+        tx_disabled_channel        |HEX            |disabled TX channels in hex, bits 0 to 3 represent channel 0</span>
<span class="f2">+                                   |               |to channel 3.</span>
<span class="f2">+        temperature                |INT            |module temperature in Celsius</span>
<span class="f2">+        voltage                    |INT            |supply voltage in mV</span>
<span class="f2">+        tx&lt;n&gt;bias                  |INT            |TX Bias Current in mA, n is the channel number,</span>
<span class="f2">+                                   |               |for example, tx2bias stands for tx bias of channel 2.</span>
<span class="f2">+        rx&lt;n&gt;power                 |INT            |received optical power in mW, n is the channel number,</span>
<span class="f2">+                                   |               |for example, rx2power stands for rx power of channel 2.</span>
<span class="f2">+        tx&lt;n&gt;power                 |INT            |TX output power in mW, n is the channel number,</span>
<span class="f2">+                                   |               |for example, tx2power stands for tx power of channel 2.</span>
<span class="f2">+        ========================================================================</span>
<span class="f2">+        &quot;&quot;&quot;</span>
<span class="f2">+        return None</span>
<span class="f2">+</span>
<span class="f2">+    def get_transceiver_threshold_info(self):</span>
<span class="f2">+        &quot;&quot;&quot;</span>
<span class="f2">+        Retrieves transceiver threshold info of this SFP</span>
<span class="f2">+</span>
<span class="f2">+        Returns:</span>
<span class="f2">+            A dict which contains following keys/values :</span>
<span class="f2">+        ========================================================================</span>
<span class="f2">+        keys                       |Value Format   |Information</span>
<span class="f2">+        ---------------------------|---------------|----------------------------</span>
<span class="f2">+        temphighalarm              |FLOAT          |High Alarm Threshold value of temperature in Celsius.</span>
<span class="f2">+        templowalarm               |FLOAT          |Low Alarm Threshold value of temperature in Celsius.</span>
<span class="f2">+        temphighwarning            |FLOAT          |High Warning Threshold value of temperature in Celsius.</span>
<span class="f2">+        templowwarning             |FLOAT          |Low Warning Threshold value of temperature in Celsius.</span>
<span class="f2">+        vcchighalarm               |FLOAT          |High Alarm Threshold value of supply voltage in mV.</span>
<span class="f2">+        vcclowalarm                |FLOAT          |Low Alarm Threshold value of supply voltage in mV.</span>
<span class="f2">+        vcchighwarning             |FLOAT          |High Warning Threshold value of supply voltage in mV.</span>
<span class="f2">+        vcclowwarning              |FLOAT          |Low Warning Threshold value of supply voltage in mV.</span>
<span class="f2">+        rxpowerhighalarm           |FLOAT          |High Alarm Threshold value of received power in dBm.</span>
<span class="f2">+        rxpowerlowalarm            |FLOAT          |Low Alarm Threshold value of received power in dBm.</span>
<span class="f2">+        rxpowerhighwarning         |FLOAT          |High Warning Threshold value of received power in dBm.</span>
<span class="f2">+        rxpowerlowwarning          |FLOAT          |Low Warning Threshold value of received power in dBm.</span>
<span class="f2">+        txpowerhighalarm           |FLOAT          |High Alarm Threshold value of transmit power in dBm.</span>
<span class="f2">+        txpowerlowalarm            |FLOAT          |Low Alarm Threshold value of transmit power in dBm.</span>
<span class="f2">+        txpowerhighwarning         |FLOAT          |High Warning Threshold value of transmit power in dBm.</span>
<span class="f2">+        txpowerlowwarning          |FLOAT          |Low Warning Threshold value of transmit power in dBm.</span>
<span class="f2">+        txbiashighalarm            |FLOAT          |High Alarm Threshold value of tx Bias Current in mA.</span>
<span class="f2">+        txbiaslowalarm             |FLOAT          |Low Alarm Threshold value of tx Bias Current in mA.</span>
<span class="f2">+        txbiashighwarning          |FLOAT          |High Warning Threshold value of tx Bias Current in mA.</span>
<span class="f2">+        txbiaslowwarning           |FLOAT          |Low Warning Threshold value of tx Bias Current in mA.</span>
<span class="f2">+        ========================================================================</span>
<span class="f2">+        &quot;&quot;&quot;</span>
<span class="f2">+        return None</span>
<span class="f2">+</span>
<span class="f2">+    def get_reset_status(self):</span>
<span class="f2">+        &quot;&quot;&quot;</span>
<span class="f2">+        Retrieves the reset status of SFP</span>
<span class="f2">+</span>
<span class="f2">+        Returns:</span>
<span class="f2">+            A Boolean, True if reset enabled, False if disabled</span>
<span class="f2">+        &quot;&quot;&quot;</span>
<span class="f2">+        return True</span>
<span class="f2">+</span>
<span class="f2">+    def get_rx_los(self):</span>
<span class="f2">+        &quot;&quot;&quot;</span>
<span class="f2">+        Retrieves the RX LOS (loss-of-signal) status of SFP</span>
<span class="f2">+</span>
<span class="f2">+        Returns:</span>
<span class="f2">+            A list of boolean values, representing the RX LOS status</span>
<span class="f2">+            of each available channel, value is True if SFP channel</span>
<span class="f2">+            has RX LOS, False if not.</span>
<span class="f2">+            E.g., for a tranceiver with four channels: [False, False, True, False]</span>
<span class="f2">+            Note : RX LOS status is latched until a call to get_rx_los or a reset.</span>
<span class="f2">+        &quot;&quot;&quot;</span>
<span class="f2">+        return [True, True, True, True]</span>
<span class="f2">+</span>
<span class="f2">+    def get_tx_fault(self):</span>
<span class="f2">+        &quot;&quot;&quot;</span>
<span class="f2">+        Retrieves the TX fault status of SFP</span>
<span class="f2">+</span>
<span class="f2">+        Returns:</span>
<span class="f2">+            A list of boolean values, representing the TX fault status</span>
<span class="f2">+            of each available channel, value is True if SFP channel</span>
<span class="f2">+            has TX fault, False if not.</span>
<span class="f2">+            E.g., for a tranceiver with four channels: [False, False, True, False]</span>
<span class="f2">+            Note : TX fault status is lached until a call to get_tx_fault or a reset.</span>
<span class="f2">+        &quot;&quot;&quot;</span>
<span class="f2">+        return [True, True, True, True]</span>
<span class="f2">+</span>
<span class="f2">+    def get_tx_disable(self):</span>
<span class="f2">+        &quot;&quot;&quot;</span>
<span class="f2">+        Retrieves the tx_disable status of this SFP</span>
<span class="f2">+</span>
<span class="f2">+        Returns:</span>
<span class="f2">+            A list of boolean values, representing the TX disable status</span>
<span class="f2">+            of each available channel, value is True if SFP channel</span>
<span class="f2">+            is TX disabled, False if not.</span>
<span class="f2">+            E.g., for a tranceiver with four channels: [False, False, True, False]</span>
<span class="f2">+        &quot;&quot;&quot;</span>
<span class="f2">+        return [True, True, True, True]</span>
<span class="f2">+</span>
<span class="f2">+    def get_tx_disable_channel(self):</span>
<span class="f2">+        &quot;&quot;&quot;</span>
<span class="f2">+        Retrieves the TX disabled channels in this SFP</span>
<span class="f2">+</span>
<span class="f2">+        Returns:</span>
<span class="f2">+            A hex of 4 bits (bit 0 to bit 3 as channel 0 to channel 3) to represent</span>
<span class="f2">+            TX channels which have been disabled in this SFP.</span>
<span class="f2">+            As an example, a returned value of 0x5 indicates that channel 0</span>
<span class="f2">+            and channel 2 have been disabled.</span>
<span class="f2">+        &quot;&quot;&quot;</span>
<span class="f2">+        return 0x5</span>
<span class="f2">+</span>
<span class="f2">+    def get_lpmode(self):</span>
<span class="f2">+        &quot;&quot;&quot;</span>
<span class="f2">+        Retrieves the lpmode (low power mode) status of this SFP</span>
<span class="f2">+</span>
<span class="f2">+        Returns:</span>
<span class="f2">+            A Boolean, True if lpmode is enabled, False if disabled</span>
<span class="f2">+        &quot;&quot;&quot;</span>
<span class="f2">+        return True</span>
<span class="f2">+</span>
<span class="f2">+    def get_power_override(self):</span>
<span class="f2">+        &quot;&quot;&quot;</span>
<span class="f2">+        Retrieves the power-override status of this SFP</span>
<span class="f2">+</span>
<span class="f2">+        Returns:</span>
<span class="f2">+            A Boolean, True if power-override is enabled, False if disabled</span>
<span class="f2">+        &quot;&quot;&quot;</span>
<span class="f2">+        return True</span>
<span class="f2">+</span>
<span class="f2">+    def get_temperature(self):</span>
<span class="f2">+        &quot;&quot;&quot;</span>
<span class="f2">+        Retrieves the temperature of this SFP</span>
<span class="f2">+</span>
<span class="f2">+        Returns:</span>
<span class="f2">+            A float representing the current temperature in Celsius</span>
<span class="f2">+        &quot;&quot;&quot;</span>
<span class="f2">+        return 40.5</span>
<span class="f2">+</span>
<span class="f2">+</span>
<span class="f2">+    def get_voltage(self):</span>
<span class="f2">+        &quot;&quot;&quot;</span>
<span class="f2">+        Retrieves the supply voltage of this SFP</span>
<span class="f2">+</span>
<span class="f2">+        Returns:</span>
<span class="f2">+            A float representing the supply voltage in mV</span>
<span class="f2">+        &quot;&quot;&quot;</span>
<span class="f2">+        return 5001.1</span>
<span class="f2">+</span>
<span class="f2">+    def get_tx_bias(self):</span>
<span class="f2">+        &quot;&quot;&quot;</span>
<span class="f2">+        Retrieves the TX bias current of all SFP channels</span>
<span class="f2">+</span>
<span class="f2">+        Returns:</span>
<span class="f2">+            A list of floats, representing TX bias in mA</span>
<span class="f2">+            for each available channel</span>
<span class="f2">+            E.g., for a tranceiver with four channels: ['110.09', '111.12', '108.21', '112.09']</span>
<span class="f2">+        &quot;&quot;&quot;</span>
<span class="f2">+        return ['110.09', '111.12', '108.21', '112.09']</span>
<span class="f2">+</span>
<span class="f2">+    def get_rx_power(self):</span>
<span class="f2">+        &quot;&quot;&quot;</span>
<span class="f2">+        Retrieves the received optical power of all SFP channels</span>
<span class="f2">+</span>
<span class="f2">+        Returns:</span>
<span class="f2">+            A list of floats, representing received optical</span>
<span class="f2">+            power in mW for each available channel</span>
<span class="f2">+            E.g., for a tranceiver with four channels: ['1.77', '1.71', '1.68', '1.70']</span>
<span class="f2">+        &quot;&quot;&quot;</span>
<span class="f2">+        return ['1.77', '1.71', '1.68', '1.70']</span>
<span class="f2">+</span>
<span class="f2">+    def get_tx_power(self):</span>
<span class="f2">+        &quot;&quot;&quot;</span>
<span class="f2">+        Retrieves the TX power of all SFP channels</span>
<span class="f2">+</span>
<span class="f2">+        Returns:</span>
<span class="f2">+            A list of floats, representing TX power in mW</span>
<span class="f2">+            for each available channel</span>
<span class="f2">+            E.g., for a tranceiver with four channels: ['1.86', '1.86', '1.86', '1.86']</span>
<span class="f2">+        &quot;&quot;&quot;</span>
<span class="f2">+        return ['1.86', '1.86', '1.86', '1.86']</span>
<span class="f2">+</span>
<span class="f2">+    def reset(self):</span>
<span class="f2">+        &quot;&quot;&quot;</span>
<span class="f2">+        Reset SFP and return all user module settings to their default srate.</span>
<span class="f2">+</span>
<span class="f2">+        Returns:</span>
<span class="f2">+            A boolean, True if successful, False if not</span>
<span class="f2">+        &quot;&quot;&quot;</span>
<span class="f2">+        return True</span>
<span class="f2">+</span>
<span class="f2">+    def tx_disable(self, tx_disable):</span>
<span class="f2">+        &quot;&quot;&quot;</span>
<span class="f2">+        Disable SFP TX for all channels</span>
<span class="f2">+</span>
<span class="f2">+        Args:</span>
<span class="f2">+            tx_disable : A Boolean, True to enable tx_disable mode, False to disable</span>
<span class="f2">+                         tx_disable mode.</span>
<span class="f2">+</span>
<span class="f2">+        Returns:</span>
<span class="f2">+            A boolean, True if tx_disable is set successfully, False if not</span>
<span class="f2">+        &quot;&quot;&quot;</span>
<span class="f2">+        return True</span>
<span class="f2">+</span>
<span class="f2">+    def tx_disable_channel(self, channel, disable):</span>
<span class="f2">+        &quot;&quot;&quot;</span>
<span class="f2">+        Sets the tx_disable for specified SFP channels</span>
<span class="f2">+</span>
<span class="f2">+        Args:</span>
<span class="f2">+            channel : A hex of 4 bits (bit 0 to bit 3) which represent channel 0 to 3,</span>
<span class="f2">+                      e.g. 0x5 for channel 0 and channel 2.</span>
<span class="f2">+            disable : A boolean, True to disable TX channels specified in channel,</span>
<span class="f2">+                      False to enable</span>
<span class="f2">+</span>
<span class="f2">+        Returns:</span>
<span class="f2">+            A boolean, True if successful, False if not</span>
<span class="f2">+        &quot;&quot;&quot;</span>
<span class="f2">+        return True</span>
<span class="f2">+</span>
<span class="f2">+    def set_lpmode(self, lpmode):</span>
<span class="f2">+        &quot;&quot;&quot;</span>
<span class="f2">+        Sets the lpmode (low power mode) of SFP</span>
<span class="f2">+</span>
<span class="f2">+        Args:</span>
<span class="f2">+            lpmode: A Boolean, True to enable lpmode, False to disable it</span>
<span class="f2">+            Note  : lpmode can be overridden by set_power_override</span>
<span class="f2">+</span>
<span class="f2">+        Returns:</span>
<span class="f2">+            A boolean, True if lpmode is set successfully, False if not</span>
<span class="f2">+        &quot;&quot;&quot;</span>
<span class="f2">+        return True</span>
<span class="f2">+</span>
<span class="f2">+    def set_power_override(self, power_override, power_set):</span>
<span class="f2">+        &quot;&quot;&quot;</span>
<span class="f2">+        Sets SFP power level using power_override and power_set</span>
<span class="f2">+</span>
<span class="f2">+        Args:</span>
<span class="f2">+            power_override :</span>
<span class="f2">+                    A Boolean, True to override set_lpmode and use power_set</span>
<span class="f2">+                    to control SFP power, False to disable SFP power control</span>
<span class="f2">+                    through power_override/power_set and use set_lpmode</span>
<span class="f2">+                    to control SFP power.</span>
<span class="f2">+            power_set :</span>
<span class="f2">+                    Only valid when power_override is True.</span>
<span class="f2">+                    A Boolean, True to set SFP to low power mode, False to set</span>
<span class="f2">+                    SFP to high power mode.</span>
<span class="f2">+</span>
<span class="f2">+        Returns:</span>
<span class="f2">+            A boolean, True if power-override and power_set are set successfully,</span>
<span class="f2">+            False if not</span>
<span class="f2">+        &quot;&quot;&quot;</span>
<span class="f2">+        return True</span>
<span class="f2">+</span>
<span class="f2">+    def read_eeprom(self, offset, num_bytes):</span>
<span class="f2">+        &quot;&quot;&quot;</span>
<span class="f2">+        read eeprom specfic bytes beginning from a random offset with size as num_bytes</span>
<span class="f2">+</span>
<span class="f2">+        Args:</span>
<span class="f2">+             offset :</span>
<span class="f2">+                     Integer, the offset from which the read transaction will start</span>
<span class="f2">+             num_bytes:</span>
<span class="f2">+                     Integer, the number of bytes to be read</span>
<span class="f2">+</span>
<span class="f2">+        Returns:</span>
<span class="f2">+            bytearray, if raw sequence of bytes are read correctly from the offset of size num_bytes</span>
<span class="f2">+            None, if the read_eeprom fails</span>
<span class="f2">+        &quot;&quot;&quot;</span>
<span class="f2">+        return None</span>
<span class="f2">+</span>
<span class="f2">+    def write_eeprom(self, offset, num_bytes, write_buffer):</span>
<span class="f2">+        &quot;&quot;&quot;</span>
<span class="f2">+        write eeprom specfic bytes beginning from a random offset with size as num_bytes</span>
<span class="f2">+        and write_buffer as the required bytes</span>
<span class="f2">+</span>
<span class="f2">+        Args:</span>
<span class="f2">+             offset :</span>
<span class="f2">+                     Integer, the offset from which the read transaction will start</span>
<span class="f2">+             num_bytes:</span>
<span class="f2">+                     Integer, the number of bytes to be written</span>
<span class="f2">+             write_buffer:</span>
<span class="f2">+                     bytearray, raw bytes buffer which is to be written beginning at the offset</span>
<span class="f2">+</span>
<span class="f2">+        Returns:</span>
<span class="f2">+            a Boolean, true if the write succeeded and false if it did not succeed.</span>
<span class="f2">+        &quot;&quot;&quot;</span>
<span class="f2">+        return True</span>
<span class="f2">+</span>
<span class="f2">+    def get_error_description(self):</span>
<span class="f2">+        &quot;&quot;&quot;</span>
<span class="f2">+        Retrives the error descriptions of the SFP module</span>
<span class="f2">+</span>
<span class="f2">+        Returns:</span>
<span class="f2">+            String that represents the current error descriptions of vendor specific errors</span>
<span class="f2">+            In case there are multiple errors, they should be joined by '|',</span>
<span class="f2">+            like: &quot;Bad EEPROM|Unsupported cable&quot;</span>
<span class="f2">+        &quot;&quot;&quot;</span>
<span class="f2">+        return &quot;Bad EEPROM|Unsupported cable&quot;</span>
<span class="bold">diff --git a/platform/ot-kvm/sonic-platform-modules-ot-kvm/ols-v/sonic_platform/thermal.py b/platform/ot-kvm/sonic-platform-modules-ot-kvm/ols-v/sonic_platform/thermal.py</span>
<span class="bold">new file mode 100644</span>
<span class="bold">index 000000000..eaf096ed7</span>
<span class="bold">--- /dev/null</span>
<span class="bold">+++ b/platform/ot-kvm/sonic-platform-modules-ot-kvm/ols-v/sonic_platform/thermal.py</span>
<span class="f6">@@ -0,0 +1,173 @@</span>
<span class="f2">+#!/usr/bin/env python</span>
<span class="f2">+</span>
<span class="f2">+########################################################################</span>
<span class="f2">+# OT-KVM</span>
<span class="f2">+#</span>
<span class="f2">+# Module contains an implementation of SONiC Platform Base API and</span>
<span class="f2">+# provides the Thermals' information which are available in the platform</span>
<span class="f2">+#</span>
<span class="f2">+########################################################################</span>
<span class="f2">+</span>
<span class="f2">+</span>
<span class="f2">+try:</span>
<span class="f2">+    import os</span>
<span class="f2">+    from sonic_platform_base.thermal_base import ThermalBase</span>
<span class="f2">+    from HalPlatformApi.client import *</span>
<span class="f2">+except ImportError as e:</span>
<span class="f2">+    raise ImportError(str(e) + &quot;- required module not found&quot;)</span>
<span class="f2">+</span>
<span class="f2">+</span>
<span class="f2">+class Thermal(ThermalBase):</span>
<span class="f2">+    &quot;&quot;&quot;OT-KVM Platform-specific Thermal class&quot;&quot;&quot;</span>
<span class="f2">+</span>
<span class="f2">+</span>
<span class="f2">+    def __init__(self, desc):</span>
<span class="f2">+        ThermalBase.__init__(self)</span>
<span class="f2">+        self.desc = desc</span>
<span class="f2">+        self.name = desc['name']</span>
<span class="f2">+</span>
<span class="f2">+    def get_name(self):</span>
<span class="f2">+        &quot;&quot;&quot;</span>
<span class="f2">+        Retrieves the name of the device</span>
<span class="f2">+</span>
<span class="f2">+        Returns:</span>
<span class="f2">+            string: The name of the device</span>
<span class="f2">+        &quot;&quot;&quot;</span>
<span class="f2">+</span>
<span class="f2">+        return self.name</span>
<span class="f2">+</span>
<span class="f2">+    def get_temperature(self):</span>
<span class="f2">+        &quot;&quot;&quot;</span>
<span class="f2">+        Retrieves current temperature reading from thermal</span>
<span class="f2">+</span>
<span class="f2">+        Returns:</span>
<span class="f2">+            A float number of current temperature in Celsius up to</span>
<span class="f2">+            nearest thousandth of one degree Celsius, e.g. 30.125</span>
<span class="f2">+        &quot;&quot;&quot;</span>
<span class="f2">+</span>
<span class="f2">+        return ThermalGetTemp(self.name)</span>
<span class="f2">+</span>
<span class="f2">+    def get_high_threshold(self):</span>
<span class="f2">+        &quot;&quot;&quot;</span>
<span class="f2">+        Retrieves the high threshold temperature of thermal</span>
<span class="f2">+</span>
<span class="f2">+        Returns:</span>
<span class="f2">+            A float number, the high threshold temperature of thermal in</span>
<span class="f2">+            Celsius up to nearest thousandth of one degree Celsius,</span>
<span class="f2">+            e.g. 30.125</span>
<span class="f2">+        &quot;&quot;&quot;</span>
<span class="f2">+</span>
<span class="f2">+        return ThermalGetHighThreshold(self.name)</span>
<span class="f2">+</span>
<span class="f2">+    def get_low_threshold(self):</span>
<span class="f2">+        &quot;&quot;&quot;</span>
<span class="f2">+        Retrieves the low threshold temperature of thermal</span>
<span class="f2">+</span>
<span class="f2">+        Returns:</span>
<span class="f2">+            A float number, the low threshold temperature of thermal in</span>
<span class="f2">+            Celsius up to nearest thousandth of one degree Celsius,</span>
<span class="f2">+            e.g. 30.125</span>
<span class="f2">+        &quot;&quot;&quot;</span>
<span class="f2">+</span>
<span class="f2">+        return ThermalGetLowThreshold(self.name)</span>
<span class="f2">+</span>
<span class="f2">+    def set_high_threshold(self, temperature):</span>
<span class="f2">+        &quot;&quot;&quot;</span>
<span class="f2">+        Sets the high threshold temperature of thermal</span>
<span class="f2">+</span>
<span class="f2">+        Args :</span>
<span class="f2">+            temperature: A float number up to nearest thousandth of one</span>
<span class="f2">+            degree Celsius, e.g. 30.125</span>
<span class="f2">+        Returns:</span>
<span class="f2">+            A boolean, True if threshold is set successfully, False if</span>
<span class="f2">+            not</span>
<span class="f2">+        &quot;&quot;&quot;</span>
<span class="f2">+</span>
<span class="f2">+        return ThermalSetHighThreshold(self.name, temperature)</span>
<span class="f2">+</span>
<span class="f2">+    def set_low_threshold(self, temperature):</span>
<span class="f2">+        &quot;&quot;&quot;</span>
<span class="f2">+        Sets the low threshold temperature of thermal</span>
<span class="f2">+</span>
<span class="f2">+        Args :</span>
<span class="f2">+            temperature: A float number up to nearest thousandth of one</span>
<span class="f2">+            degree Celsius, e.g. 30.125</span>
<span class="f2">+        Returns:</span>
<span class="f2">+            A boolean, True if threshold is set successfully, False if</span>
<span class="f2">+            not</span>
<span class="f2">+        &quot;&quot;&quot;</span>
<span class="f2">+</span>
<span class="f2">+        return ThermalSetLowThreshold(self.name, temperature)</span>
<span class="f2">+</span>
<span class="f2">+    def get_high_critical_threshold(self):</span>
<span class="f2">+        &quot;&quot;&quot;</span>
<span class="f2">+        Retrieves the high critical threshold temperature of thermal</span>
<span class="f2">+</span>
<span class="f2">+        Returns:</span>
<span class="f2">+            A float number, the high critical threshold temperature of</span>
<span class="f2">+            thermal in Celsius up to nearest thousandth of one degree</span>
<span class="f2">+            Celsius, e.g. 30.125</span>
<span class="f2">+        &quot;&quot;&quot;</span>
<span class="f2">+</span>
<span class="f2">+        return ThermalGetHighCriticalThreshold(self.name)</span>
<span class="f2">+</span>
<span class="f2">+    def get_low_critical_threshold(self):</span>
<span class="f2">+        &quot;&quot;&quot;</span>
<span class="f2">+        Retrieves the low critical threshold temperature of thermal</span>
<span class="f2">+</span>
<span class="f2">+        Returns:</span>
<span class="f2">+            A float number, the low critical threshold temperature of thermal in Celsius</span>
<span class="f2">+            up to nearest thousandth of one degree Celsius, e.g. 30.125</span>
<span class="f2">+        &quot;&quot;&quot;</span>
<span class="f2">+</span>
<span class="f2">+        return ThermalGetLowCriticalThreshold(self.name)</span>
<span class="f2">+</span>
<span class="f2">+    def set_high_critical_threshold(self, temperature):</span>
<span class="f2">+        &quot;&quot;&quot;</span>
<span class="f2">+        Sets the critical high threshold temperature of thermal</span>
<span class="f2">+</span>
<span class="f2">+        Args :</span>
<span class="f2">+            temperature: A float number up to nearest thousandth of one degree Celsius,</span>
<span class="f2">+            e.g. 30.125</span>
<span class="f2">+</span>
<span class="f2">+        Returns:</span>
<span class="f2">+            A boolean, True if threshold is set successfully, False if not</span>
<span class="f2">+        &quot;&quot;&quot;</span>
<span class="f2">+</span>
<span class="f2">+        return ThermalSetHighCriticalThreshold(self.name, temperature)</span>
<span class="f2">+</span>
<span class="f2">+    def set_low_critical_threshold(self, temperature):</span>
<span class="f2">+        &quot;&quot;&quot;</span>
<span class="f2">+        Sets the critical low threshold temperature of thermal</span>
<span class="f2">+</span>
<span class="f2">+        Args :</span>
<span class="f2">+            temperature: A float number up to nearest thousandth of one degree Celsius,</span>
<span class="f2">+            e.g. 30.125</span>
<span class="f2">+</span>
<span class="f2">+        Returns:</span>
<span class="f2">+            A boolean, True if threshold is set successfully, False if not</span>
<span class="f2">+        &quot;&quot;&quot;</span>
<span class="f2">+</span>
<span class="f2">+        return ThermalSetLowCriticalThreshold(self.name, temperature)</span>
<span class="f2">+</span>
<span class="f2">+    def get_minimum_recorded(self):</span>
<span class="f2">+        &quot;&quot;&quot;</span>
<span class="f2">+        Retrieves the minimum recorded temperature of thermal</span>
<span class="f2">+</span>
<span class="f2">+        Returns:</span>
<span class="f2">+            A float number, the minimum recorded temperature of thermal in Celsius</span>
<span class="f2">+            up to nearest thousandth of one degree Celsius, e.g. 30.125</span>
<span class="f2">+        &quot;&quot;&quot;</span>
<span class="f2">+</span>
<span class="f2">+        return ThermalGetMinimumRecorded(self.name)</span>
<span class="f2">+</span>
<span class="f2">+    def get_maximum_recorded(self):</span>
<span class="f2">+        &quot;&quot;&quot;</span>
<span class="f2">+        Retrieves the maximum recorded temperature of thermal</span>
<span class="f2">+</span>
<span class="f2">+        Returns:</span>
<span class="f2">+            A float number, the maximum recorded temperature of thermal in Celsius</span>
<span class="f2">+            up to nearest thousandth of one degree Celsius, e.g. 30.125</span>
<span class="f2">+        &quot;&quot;&quot;</span>
<span class="f2">+</span>
<span class="f2">+        return ThermalGetMaximumRecorded(self.name)</span>
\ No newline at end of file
<span class="bold">diff --git a/platform/ot-kvm/sonic-platform-modules-ot-kvm/ols-v/sonic_platform/watchdog.py b/platform/ot-kvm/sonic-platform-modules-ot-kvm/ols-v/sonic_platform/watchdog.py</span>
<span class="bold">new file mode 100644</span>
<span class="bold">index 000000000..8df5eeb16</span>
<span class="bold">--- /dev/null</span>
<span class="bold">+++ b/platform/ot-kvm/sonic-platform-modules-ot-kvm/ols-v/sonic_platform/watchdog.py</span>
<span class="f6">@@ -0,0 +1,71 @@</span>
<span class="f2">+########################################################################</span>
<span class="f2">+#</span>
<span class="f2">+# OT-KVM</span>
<span class="f2">+#</span>
<span class="f2">+# Abstract base class for implementing a platform-specific class with</span>
<span class="f2">+# which to interact with a hardware watchdog module in SONiC</span>
<span class="f2">+#</span>
<span class="f2">+########################################################################</span>
<span class="f2">+</span>
<span class="f2">+try:</span>
<span class="f2">+    from sonic_platform_base.watchdog_base import WatchdogBase</span>
<span class="f2">+    from HalPlatformApi.client import *</span>
<span class="f2">+except ImportError as e:</span>
<span class="f2">+    raise ImportError(str(e) + &quot;- required module not found&quot;)</span>
<span class="f2">+</span>
<span class="f2">+</span>
<span class="f2">+class Watchdog(WatchdogBase):</span>
<span class="f2">+    &quot;&quot;&quot;</span>
<span class="f2">+    Abstract base class for interfacing with a hardware watchdog module</span>
<span class="f2">+    &quot;&quot;&quot;</span>
<span class="f2">+</span>
<span class="f2">+    def __init__(self):</span>
<span class="f2">+        print(&quot;INFO: Watchdog __init__&quot;)</span>
<span class="f2">+</span>
<span class="f2">+    def arm(self, seconds):</span>
<span class="f2">+        &quot;&quot;&quot;</span>
<span class="f2">+        Arm the hardware watchdog with a timeout of &lt;seconds&gt; seconds.</span>
<span class="f2">+        If the watchdog is currently armed, calling this function will</span>
<span class="f2">+        simply reset the timer to the provided value. If the underlying</span>
<span class="f2">+        hardware does not support the value provided in &lt;seconds&gt;, this</span>
<span class="f2">+        method should arm the watchdog with the *next greater* available</span>
<span class="f2">+        value.</span>
<span class="f2">+</span>
<span class="f2">+        Returns:</span>
<span class="f2">+            An integer specifying the *actual* number of seconds the watchdog</span>
<span class="f2">+            was armed with. On failure returns -1.</span>
<span class="f2">+        &quot;&quot;&quot;</span>
<span class="f2">+        print(&quot;ERROR: Platform did not implement arm()&quot;)</span>
<span class="f2">+        return -1</span>
<span class="f2">+</span>
<span class="f2">+    def disarm(self):</span>
<span class="f2">+        &quot;&quot;&quot;</span>
<span class="f2">+        Disarm the hardware watchdog</span>
<span class="f2">+</span>
<span class="f2">+        Returns:</span>
<span class="f2">+            A boolean, True if watchdog is disarmed successfully, False if not</span>
<span class="f2">+        &quot;&quot;&quot;</span>
<span class="f2">+        print(&quot;ERROR: Platform did not implement disarm()&quot;)</span>
<span class="f2">+        return False</span>
<span class="f2">+</span>
<span class="f2">+    def is_armed(self):</span>
<span class="f2">+        &quot;&quot;&quot;</span>
<span class="f2">+        Retrieves the armed state of the hardware watchdog.</span>
<span class="f2">+</span>
<span class="f2">+        Returns:</span>
<span class="f2">+            A boolean, True if watchdog is armed, False if not</span>
<span class="f2">+        &quot;&quot;&quot;</span>
<span class="f2">+        print(&quot;ERROR: Platform did not implement is_armed()&quot;)</span>
<span class="f2">+        return False</span>
<span class="f2">+</span>
<span class="f2">+    def get_remaining_time(self):</span>
<span class="f2">+        &quot;&quot;&quot;</span>
<span class="f2">+        If the watchdog is armed, retrieve the number of seconds remaining on</span>
<span class="f2">+        the watchdog timer</span>
<span class="f2">+</span>
<span class="f2">+        Returns:</span>
<span class="f2">+            An integer specifying the number of seconds remaining on thei</span>
<span class="f2">+            watchdog timer. If the watchdog is not armed, returns -1.</span>
<span class="f2">+        &quot;&quot;&quot;</span>
<span class="f2">+        print(&quot;ERROR: Platform did not implement get_remaining_time()&quot;)</span>
<span class="f2">+        return -1</span>
<span class="bold">diff --git a/platform/ot-kvm/sonic-version.dep b/platform/ot-kvm/sonic-version.dep</span>
<span class="bold">new file mode 100644</span>
<span class="bold">index 000000000..1398415bd</span>
<span class="bold">--- /dev/null</span>
<span class="bold">+++ b/platform/ot-kvm/sonic-version.dep</span>
<span class="f6">@@ -0,0 +1,2 @@</span>
<span class="f2">+#DPKG FRK</span>
<span class="f2">+$(SONIC_VERSION)_CACHE_MODE  := none</span>
<span class="bold">diff --git a/platform/ot-kvm/sonic-version.mk b/platform/ot-kvm/sonic-version.mk</span>
<span class="bold">new file mode 100644</span>
<span class="bold">index 000000000..9e2157322</span>
<span class="bold">--- /dev/null</span>
<span class="bold">+++ b/platform/ot-kvm/sonic-version.mk</span>
<span class="f6">@@ -0,0 +1,13 @@</span>
<span class="f2">+# sonic version yml file</span>
<span class="f2">+</span>
<span class="f2">+sonic_version=$(SONIC_GET_VERSION)</span>
<span class="f2">+sonic_asic_platform=$(CONFIGURED_PLATFORM)</span>
<span class="f2">+</span>
<span class="f2">+export sonic_version</span>
<span class="f2">+export sonic_asic_platform</span>
<span class="f2">+</span>
<span class="f2">+SONIC_VERSION = sonic_version.yml</span>
<span class="f2">+$(SONIC_VERSION)_SRC_PATH = $(PLATFORM_PATH)/sonic-version</span>
<span class="f2">+SONIC_MAKE_FILES += $(SONIC_VERSION)</span>
<span class="f2">+</span>
<span class="f2">+SONIC_PHONY_TARGETS += $(addprefix $(FILES_PATH)/, $(SONIC_VERSION))</span>
<span class="bold">diff --git a/platform/ot-kvm/sonic-version/Makefile b/platform/ot-kvm/sonic-version/Makefile</span>
<span class="bold">new file mode 100644</span>
<span class="bold">index 000000000..2b2386031</span>
<span class="bold">--- /dev/null</span>
<span class="bold">+++ b/platform/ot-kvm/sonic-version/Makefile</span>
<span class="f6">@@ -0,0 +1,10 @@</span>
<span class="f2">+.ONESHELL:</span>
<span class="f2">+SHELL = /bin/bash</span>
<span class="f2">+.SHELLFLAGS += -e</span>
<span class="f2">+</span>
<span class="f2">+MAIN_TARGET = sonic_version.yml</span>
<span class="f2">+</span>
<span class="f2">+$(addprefix $(DEST)/, $(MAIN_TARGET)): $(DEST)/% :</span>
<span class="f2">+</span>	<span class="f2">./build_sonic_version.sh $(MAIN_TARGET)</span>
<span class="f2">+</span>
<span class="f2">+</span>	<span class="f2">mv $(MAIN_TARGET) $(DEST)/</span>
<span class="bold">diff --git a/platform/ot-kvm/sonic-version/build_sonic_version.sh b/platform/ot-kvm/sonic-version/build_sonic_version.sh</span>
<span class="bold">new file mode 100644</span>
<span class="bold">index 000000000..2e3d5c42f</span>
<span class="bold">--- /dev/null</span>
<span class="bold">+++ b/platform/ot-kvm/sonic-version/build_sonic_version.sh</span>
<span class="f6">@@ -0,0 +1,8 @@</span>
<span class="f2">+export build_version=&quot;${sonic_version}&quot;</span>
<span class="f2">+export asic_type=&quot;${sonic_asic_platform}&quot;</span>
<span class="f2">+export commit_id=&quot;$(git rev-parse --short HEAD)&quot;</span>
<span class="f2">+export branch=&quot;$(git rev-parse --abbrev-ref HEAD)&quot;</span>
<span class="f2">+export build_date=&quot;$(date -u)&quot;</span>
<span class="f2">+export build_number=&quot;${BUILD_NUMBER:-0}&quot;</span>
<span class="f2">+export built_by=&quot;$USER@$BUILD_HOSTNAME&quot;</span>
<span class="f2">+j2 sonic_version.yml.j2 &gt; $1</span>
<span class="bold">diff --git a/platform/ot-kvm/sonic-version/sonic_version.yml.j2 b/platform/ot-kvm/sonic-version/sonic_version.yml.j2</span>
<span class="bold">new file mode 120000</span>
<span class="bold">index 000000000..2bbebeb22</span>
<span class="bold">--- /dev/null</span>
<span class="bold">+++ b/platform/ot-kvm/sonic-version/sonic_version.yml.j2</span>
<span class="f6">@@ -0,0 +1 @@</span>
<span class="f2">+../../../files/build_templates/sonic_version.yml.j2</span>
\ No newline at end of file
<span class="bold">diff --git a/rules/config b/rules/config</span>
<span class="bold">index ac6a30ba6..78db7394c 100644</span>
<span class="bold">--- a/rules/config</span>
<span class="bold">+++ b/rules/config</span>
<span class="f6">@@ -73,7 +73,7 @@</span> DEFAULT_PASSWORD = YourPaSsWoRd
 
 # SONIC_USE_PDDF_FRAMEWORK - Use PDDF generic drivers and plugins
 # Uncomment next line to enable:
<span class="f1">-SONIC_USE_PDDF_FRAMEWORK = y</span>
<span class="f2">+SONIC_USE_PDDF_FRAMEWORK = n</span>
 
 # SONIC_ROUTING_STACK - specify the routing-stack being elected to drive SONiC's control-plane.
 # Supported routing stacks on SONiC are:
<span class="f6">@@ -132,7 +132,7 @@</span> INCLUDE_SYSTEM_TELEMETRY = y
 INCLUDE_ICCPD = n
 
 # INCLUDE_SFLOW - build docker-sflow for sFlow support
<span class="f1">-INCLUDE_SFLOW = y</span>
<span class="f2">+INCLUDE_SFLOW = n</span>
 
 # INCLUDE_MGMT_FRAMEWORK - build docker-sonic-mgmt-framework for CLI and REST server support
 INCLUDE_MGMT_FRAMEWORK = y
<span class="f6">@@ -145,10 +145,10 @@</span> ENABLE_HOST_SERVICE_ON_START = y
 INCLUDE_RESTAPI = n
 
 # INCLUDE_NAT - build docker-nat for nat support
<span class="f1">-INCLUDE_NAT = y</span>
<span class="f2">+INCLUDE_NAT = n</span>
 
 # INCLUDE_DHCP_RELAY - build and install dhcp-relay package
<span class="f1">-INCLUDE_DHCP_RELAY = y</span>
<span class="f2">+INCLUDE_DHCP_RELAY = n</span>
 
 # INCLUDE_DHCP_SERVER - build and install dhcp-server package
 INCLUDE_DHCP_SERVER = n
<span class="f6">@@ -157,7 +157,7 @@</span> INCLUDE_DHCP_SERVER = n
 INCLUDE_P4RT = n
 
 # ENABLE_AUTO_TECH_SUPPORT - Enable the configuration for event-driven techsupport &amp; coredump mgmt feature
<span class="f1">-ENABLE_AUTO_TECH_SUPPORT = y</span>
<span class="f2">+ENABLE_AUTO_TECH_SUPPORT = n</span>
 
 # ENABLE_TRANSLIB_WRITE - Enable translib write/config operations via the gNMI interface.
 # Uncomment to enable:
<span class="f6">@@ -168,16 +168,16 @@</span> ENABLE_AUTO_TECH_SUPPORT = y
 ENABLE_NATIVE_WRITE = y
 
 # INCLUDE_MACSEC - build docker-macsec for macsec support
<span class="f1">-INCLUDE_MACSEC = y</span>
<span class="f2">+INCLUDE_MACSEC = n</span>
 
 # INCLUDE_GBSYNCD - build docker-gbsyncd-* for gearbox support
<span class="f1">-INCLUDE_GBSYNCD ?= y</span>
<span class="f2">+INCLUDE_GBSYNCD ?= n</span>
 
 # INCLUDE_TEAMD - build docker-teamd for LAG protocol support
<span class="f1">-INCLUDE_TEAMD ?= y</span>
<span class="f2">+INCLUDE_TEAMD ?= n</span>
 
 # INCLUDE_ROUTER_ADVERTISER - build docker-router-advertiser for router advertisements support
<span class="f1">-INCLUDE_ROUTER_ADVERTISER ?= y</span>
<span class="f2">+INCLUDE_ROUTER_ADVERTISER ?= n</span>
 
 # INCLUDE_KUBERNETES - if set to y kubernetes packages are installed to be able to
 # run as worker node in kubernetes cluster.
<span class="f6">@@ -286,7 +286,7 @@</span> REGISTRY_SERVER_PATH ?=
 BUILD_MULTIASIC_KVM = n
 
 # INCLUDE_MUX - build docker-mux for dual ToR (Gemini)
<span class="f1">-INCLUDE_MUX = y</span>
<span class="f2">+INCLUDE_MUX = n</span>
 
 # ENABLE_ASAN - enable address sanitizer
 ENABLE_ASAN ?= n
<span class="f6">@@ -302,7 +302,7 @@</span> ENABLE_BOOTCHART = n
 
 # INCLUDE_FIPS - support FIPS feature, only for amd64 or arm64, armhf not supported yet
 # ENABLE_FIPS - support FIPS flag, if enabled, no additional config requred for the image to support FIPS
<span class="f1">-INCLUDE_FIPS ?= y</span>
<span class="f2">+INCLUDE_FIPS ?= n</span>
 ENABLE_FIPS ?= n
 
 # SONIC_SLAVE_DOCKER_DRIVER - set the sonic slave docker storage driver
</pre>
</body>
</html>
